"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{3455:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(95155),s=i(93620),o=i(700),a=i(40043);function r(e){var t,i,r;return(0,n.jsxs)(s.A,{disableFocusRipple:e.disableFocusRipple,type:"submit",variant:null!=(t=e.variant)?t:"contained",size:e.size,color:null!=(i=e.color)?i:"buttonStandard",onClick:()=>{e.onClick(e.btnKey)},loading:e.busy,disabled:e.disabled||e.busy,startIcon:e.startIcon,endIcon:e.endIcon,sx:e.sx,children:[e.content,(0,n.jsx)(o.A,{variant:"submitButton",sx:{textWrap:"balance"},children:null!=(r=e.btnText)?r:(0,n.jsx)(a.A,{i18nKey:"button.submit"})})]})}},37052:(e,t,i)=>{i.d(t,{A:()=>r,m:()=>s});var n=i(15484),s=function(e){return e.Request_SlideRefresh="REQUEST_SLIDE_REFRESH",e.WSS_Update_ConnectionState="WSS_UPDATE_CONNECTION_STATE",e.WSS_Distribute_Message="WSS_DISTRIBUTE_MESSAGE",e.Content_Progress_Update="CONTENT_PROGRESS_UPDATE",e.Media_Playback_Update="MEDIA_PLAYBACK_UPDATE",e.WSS_Refresh_Session="WSS_REFRESH_SESSION",e.WSS_Request_Disconnect="WSS_REQUEST_DISCONNECT",e.WSS_Request_Reconnect="WSS_REQUEST_RECONNECT",e}({});let o=new n.A,a={on:(e,t)=>o.on(e,t),once:(e,t)=>o.once(e,t),off:(e,t)=>o.off(e,t),emit:e=>o.emit(e.type,e)};Object.freeze(a);let r=a},40043:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(95155),s=i(12115),o=i(91218),a=i(51368);let r=()=>"t-".concat((0,a.A)());function c(e){var t,i,a;let{i18nKey:c,options:l}=e,{t:d}=(0,o.Bd)();return(0,n.jsx)(n.Fragment,{children:(i=null!=(t=e.wrapper)?t:(0,n.jsx)(n.Fragment,{}),Array.isArray(a=d(c,l))?a.map(e=>s.cloneElement(i,{key:r()},e)):"string"==typeof a?s.cloneElement(i,{key:r()},a):s.cloneElement(i,{key:r()},a.toString()))})}},50439:(e,t,i)=>{i.d(t,{S:()=>s,q:()=>o});var n=i(60683);let s=e=>{let t=async()=>{var t;let i={method:e.method,headers:{"Content-Type":null!=(t=e.contentType)?t:"application/json"}};void 0!==e.body&&(i.body=JSON.stringify(e.body)),void 0!==e.accessToken&&(i.headers.Authorization="Bearer ".concat(e.accessToken)),void 0!==e.sessionToken&&(i.headers["X-Deliberation-Session-Token"]=e.sessionToken);let n=await fetch("".concat(e.baseUri).concat(e.path),i);if(n.ok)return JSON.parse(await n.text());throw n.statusText};return new n.A({title:e.title,description:e.description,action:t,retries:e.indefinite?"indefinite":3,delay_ms:2e3,max_delay_ms:6e3,group:e.group,indicator:e.indicator})},o=(e,t,i,s,o)=>{if(0===e.size)throw"Blob is empty";let a=async()=>{console.debug("Ready to upload ".concat(e.size," bytes..."));let n=await fetch(i,{method:"PUT",headers:{"Content-Type":t},body:e});if(!n.ok)throw n.statusText;return console.debug("Upload complete."),{size:e.size,target:i,method:"PUT",response:n}};return new n.A({title:"Put: ".concat(i),description:"".concat(e.size," bytes"),action:a,retries:s?"indefinite":3,delay_ms:2e3,indicator:o})}},60683:(e,t,i)=>{i.d(t,{A:()=>o,m:()=>s});var n=i(51368),s=function(e){return e[e.Ready=0]="Ready",e[e.Running=1]="Running",e[e.Success=2]="Success",e[e.Waiting=3]="Waiting",e[e.Failed=4]="Failed",e[e.Cancelled=5]="Cancelled",e}({});class o{isFinished(){return 2===this.state||4===this.state||5===this.state}getResult(){switch(this.state){case 2:return this.result;case 4:var e;throw null!=(e=this.error)?e:"Task state: Failed";case 5:return;default:throw"Task state: ".concat(s[this.state])}}getNextDelay(){var e,t,i;return Math.min((null!=(e=this.initProps.delay_ms)?e:0)*this.attempts,null!=(i=null!=(t=this.initProps.max_delay_ms)?t:this.initProps.delay_ms)?i:0)}getLogDescription(){return"".concat(this.initProps.title,": ").concat(this.initProps.description," (").concat(this.initProps.indicator,")")}supersedes(e){return!this.isFinished()&&!e.isFinished()&&this.id!==e.id&&this.group===e.group&&this.created>e.created}constructor(e){var t;this.created=Date.now(),this.state=0,this.attempts=0,this.willTryAgain=()=>this.attempts<=("indefinite"===this.initProps.retries?50:this.initProps.retries),this.id=(0,n.A)(),this.group=null!=(t=e.group)?t:(0,n.A)(),this.created=Date.now(),this.initProps=e}}},62895:(e,t,i)=>{i.d(t,{LQ:()=>a,Th:()=>s,UN:()=>l,Vn:()=>u,_J:()=>d,fT:()=>c,jB:()=>r,sW:()=>n,ve:()=>o});var n=function(e){return e[e.Controller=0]="Controller",e[e.Client=1]="Client",e}({}),s=function(e){return e[e.LiveWorkshop=0]="LiveWorkshop",e[e.AutomatedTests=1]="AutomatedTests",e[e.TestingWorkshop=2]="TestingWorkshop",e[e.DemoWorkshop=3]="DemoWorkshop",e}({}),o=function(e){return e[e.Absent=0]="Absent",e[e.Ready=1]="Ready",e[e.Open=2]="Open",e[e.Closed=3]="Closed",e}({}),a=function(e){return e[e.InPerson=0]="InPerson",e[e.Remote=1]="Remote",e[e.RemoteWithVideoCall=2]="RemoteWithVideoCall",e}({}),r=function(e){return e[e.Init=0]="Init",e[e.Offline=1]="Offline",e[e.Online=2]="Online",e[e.Connecting=3]="Connecting",e[e.Connected=4]="Connected",e[e.Joining=5]="Joining",e[e.Joined=6]="Joined",e[e.UserDisconnecting=7]="UserDisconnecting",e[e.Disconnected=8]="Disconnected",e[e.Error=9]="Error",e}({}),c=function(e){return e[e.ContactAndConsent=0]="ContactAndConsent",e[e.EnjoymentAndSatisfaction=1]="EnjoymentAndSatisfaction",e[e.FullReport_v1=2]="FullReport_v1",e[e.FullReport_v2=3]="FullReport_v2",e[e.FullReport_v3=4]="FullReport_v3",e}({}),l=function(e){return e[e.All=0]="All",e[e.Upcoming=1]="Upcoming",e[e.Past=2]="Past",e[e.Answered=3]="Answered",e}({}),d=function(e){return e.facilitators="facilitators",e.analysts="analysts",e.administrators="administrators",e}({}),u=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Playing=1]="Playing",e[e.Paused=2]="Paused",e[e.Ended=3]="Ended",e}({})},66323:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(95155),s=i(69242),o=i(36114),a=i(54492),r=i(99927),c=i(53267),l=i(86220),d=i(700),u=i(12115),p=i(3455);function h(e){var t,i,h;let g=()=>{if(!1!==e.dismissible){var t;e.setOpen(!1),null==(t=e.onClose)||t.call(e)}},m=(0,u.useId)();return(0,u.useEffect)(()=>{console.debug("dialog open",e.open)},[e.open]),(0,n.jsxs)(o.A,{fullWidth:null==(t=e.fullWidth)||t,maxWidth:null!=(i=e.maxWidth)?i:"sm",open:e.open,disableEscapeKeyDown:!e.dismissible,onClose:g,children:[e.title&&(0,n.jsx)(a.A,{align:"center",children:e.title}),(0,n.jsxs)(r.A,{children:[(null==(h=e.showCloseButton)||h)&&(0,n.jsx)(c.A,{style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(l.A,{"aria-label":"close",onClick:g,children:(0,n.jsx)(s.A,{})})}),(0,n.jsxs)(c.A,{sx:{p:2,gap:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsxs)(c.A,{sx:{width:"100%",display:"flex",flexDirection:"start",alignItems:"start"},children:[e.promptGraphicUri&&(0,n.jsx)("img",{src:e.promptGraphicUri,alt:"Illustrative graphic",style:{width:"25%"}}),e.prompt&&(0,n.jsx)(d.A,{variant:"body1",sx:{width:"75%",mb:2,textAlign:"center",textWrap:"balance"},children:e.prompt})]}),e.content,e.options.map(t=>(0,n.jsx)(p.A,{btnKey:"dialog-".concat(m,"-option-").concat(t.key),sx:{width:"66%"},variant:t.filled?"contained":"outlined",color:"buttonStandard",onClick:()=>{var i,n,s;return i=t.key,void(e.setOpen(!1),null==(n=e.onClose)||n.call(e),null==(s=e.onSelect)||s.call(e,i))},btnText:t.text,busy:e.busy},"dialog-".concat(m,"-option-").concat(t.key)))]})]})]})}},71212:(e,t,i)=>{i.d(t,{$K:()=>l,_h:()=>a,eC:()=>o,gL:()=>r,zD:()=>c});var n=i(99013);let s=e=>"".concat(e.participantId,"-").concat(e.deliberationSessionId,"-").concat(e.kind,"-").concat(e.subject),o=(e,t)=>!((0,n.s)(e)||(0,n.s)(t))||!!(0,n.s)(e)&&!!(0,n.s)(t)&&s(e)===s(t),a=e=>{try{if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Error parsing live participant state modifiers JSON",e),{}}},r=e=>{try{if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Error parsing originator timestamps JSON",e),{}}},c={SlideIndex:"slide-index",VideoSync:e=>"video-sync:".concat(e)},l=e=>{switch(e.action){case"close":return"closing workshop";case"fullscreen":return"adjusting workshop settings";case"init-meeting":return"renewing video call";case"open":return"opening workshop";case"refresh-all":return"refreshing";case"reset":return"opening waiting room";case"set-slide-position":return"update position: ".concat(e.parameters.indexh+1);case"set-video-sync":return"synchronising video";case"start-transcription":return"starting transcription";case"stop-transcription":return"stopping transcription";case"refresh":return"refreshing state";case"video-readiness-update":return"updating video readiness";case"mute":return"muting participant";case"kick":return"removing participant";default:return"submitting data"}}},71398:(e,t,i)=>{i.d(t,{G:()=>n});let n=e=>e.split("/").at(-2)},72750:(e,t,i)=>{i.d(t,{F:()=>d,A:()=>u});var n=i(95155),s=i(12115),o=i(60683),a=i(71212),r=i(62895),c=i(50439);class l{getServerTime(){return(0,c.S)({baseUri:this.baseUri,title:"getServerTime",method:"GET",path:"/utils/servertime",indefinite:!1,indicator:"checking server time"})}postDeliberationSessionAdmin(e,t){return(0,c.S)({baseUri:this.baseUri,title:"postDeliberationSessionAdmin",method:"POST",path:"/sessions/admin",body:t,accessToken:e,indefinite:!0,indicator:"creating session"})}putDeliberationSessionAdmin(e,t){return(0,c.S)({baseUri:this.baseUri,title:"putDeliberationSessionAdmin",method:"PUT",path:"/sessions/admin/".concat(t.id),body:t,accessToken:e,indefinite:!0,indicator:"updating session"})}postParticipantAction(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(0,c.S)({baseUri:this.baseUri,title:"postParticipantAction",description:t.action,method:"POST",path:"/sessions/".concat(t.sessionId,"/actions"),body:t,group:"postParticipantAction.".concat(t.action),sessionToken:e,indefinite:i,indicator:(0,a.$K)(t)})}postFacilitatorAction(e,t,i){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,c.S)({baseUri:this.baseUri,title:"postFacilitatorAction",description:i.action,method:"POST",path:"/sessions/admin/actions/".concat(i.sessionId),body:i,group:"postFacilitatorAction.".concat(i.action),accessToken:e,sessionToken:t,indefinite:n,indicator:(0,a.$K)(i)})}getDeliberationSessionAdmin(e,t,i,n){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationSessionAdmin",description:"with access token",method:"GET",path:"/sessions/admin/".concat(e),sessionToken:t,accessToken:i,group:n,indefinite:!1,indicator:"checking workshop state"})}listDeliberationSessions(e,t,i){return(0,c.S)({baseUri:this.baseUri,title:"listDeliberationSessions",description:r.UN[t],method:"GET",path:"/sessions/list/".concat(r.UN[t]),accessToken:e,group:i,indefinite:!1,indicator:"listing sessions"})}getBasicDeliberationSession(e,t){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationSession",method:"GET",path:"/sessions/".concat(e,"/"),group:t,indefinite:!1,indicator:"checking workshop state"})}getDeliberationSession(e,t,i){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationSession",method:"GET",path:"/sessions/".concat(e),sessionToken:t,group:i,indefinite:!1,indicator:"checking workshop state"})}postMeetingJoinRequest(e,t,i,n,s,o){return(0,c.S)({baseUri:this.baseUri,title:"postMeetingJoinRequest",method:"POST",path:void 0!==o?"/sessions/admin/".concat(e,"/attendee"):"/sessions/".concat(e,"/attendee"),body:{name:s,participantId:i,preview:n},sessionToken:t,accessToken:o,indefinite:!1,indicator:n?"preparing preview":"joining video call"})}exchangeJoinCodeForSessionToken(e,t){var i=void 0!==t?"/sessions/admin/".concat(e.sessionId,"/token"):"/sessions/".concat(e.sessionId,"/token");return(0,c.S)({baseUri:this.baseUri,title:"exchangeJoinCodeForSessionToken",method:"POST",path:i,body:e,indefinite:!1,indicator:"checking join code",accessToken:t})}postDeliberationAnswer(e,t,i){let n=t.questionId;return(0,c.S)({baseUri:this.baseUri,title:"postDeliberationAnswer",method:"POST",path:"/sessions/".concat(e,"/questions/").concat(n,"/answers"),body:t,sessionToken:i,indefinite:!0,indicator:"sending answer"})}getDeliberationAnswer(e,t,i,n,s){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationAnswer",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers?pid=").concat(i),sessionToken:n,group:s,indefinite:!0,indicator:void 0})}getDeliberationAnswersForQuestion(e,t,i,n){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationAnswersForQuestion",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers"),sessionToken:i,group:n,indefinite:!0,indicator:void 0})}getDeliberationAnswersForParticipant(e,t,i,n){return(0,c.S)({baseUri:this.baseUri,title:"getDeliberationAnswersForParticipant",method:"GET",path:"/sessions/".concat(e,"/participants/").concat(t,"/answers"),sessionToken:i,group:n,indefinite:!0,indicator:void 0})}postWorkshopContentAccessRequest(e,t,i){return(0,c.S)({baseUri:this.baseUri,title:"postWorkshopContentAccessRequest",description:"".concat(i.objectKeys.length," items"),method:"POST",path:"/sessions/".concat(e,"/content"),body:i,sessionToken:t,indefinite:!0,indicator:void 0})}postPublicContentAccessRequest(e,t){return(0,c.S)({baseUri:this.baseUri,title:"postPublicContentAccessRequest",description:"".concat(t.workshopDirectory),method:"POST",path:"/sessions/".concat(e,"/content/public"),body:t,indefinite:!0,indicator:void 0})}getReport(e,t,i){return(0,c.S)({baseUri:this.baseUri,title:"getReport",description:r.fT[i],method:"GET",path:"/sessions/admin/".concat(e,"/report/").concat(r.fT[i]),accessToken:t,indefinite:!1,indicator:"retrieving report"})}getMediaUploadUrl(e,t,i,n,s,o){return(0,c.S)({baseUri:this.baseUri,title:"getMediaUploadUrl",method:"POST",path:"/sessions/admin/".concat(e,"/upload"),body:{sessionId:e,section:n,filenamePart:s,filenameSuffix:o},accessToken:i,sessionToken:t,indefinite:!0,indicator:"preparing to upload"})}postAnalystAction(e,t){return(0,c.S)({baseUri:this.baseUri,title:"postAnalystActionRequest",method:"POST",path:"/sessions/analysis",body:e,accessToken:t,indefinite:!1,indicator:"action: "+e.action})}constructor(e){this.baseUri=e}}let d=(0,s.createContext)({});function u(e){let[t,i]=(0,s.useState)(new l("https://vg2x706mjk.execute-api.eu-west-1.amazonaws.com/test")),[a,r]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,m]=(0,s.useState)([]),[b,S]=(0,s.useState)([]),[f,y]=(0,s.useState)([]),[A,k]=(0,s.useState)([]),[w,v]=(0,s.useState)(0),T=(0,s.useCallback)(async e=>(r(t=>[...t,e]),v(Date.now()),R(e)),[a,r,w,v]);(0,s.useEffect)(()=>{u([...a.filter(e=>e.state===o.m.Ready)]),h([...a.filter(e=>e.state===o.m.Running)]),m([...a.filter(e=>e.state===o.m.Waiting)]),S([...a.filter(e=>e.state===o.m.Success)]),y([...a.filter(e=>e.state===o.m.Failed)]),k([...a.filter(e=>e.state===o.m.Cancelled)])},[a,w]);let U=(0,s.useCallback)(e=>!e.isFinished()&&!a.some(t=>t.id!==e.id&&t.state===o.m.Running&&t.group===e.group),[a]),x=(0,s.useCallback)(e=>!e.isFinished()&&a.some(t=>t.supersedes(e)),[a]),D=e=>{console.debug("Superseding task: ".concat(e.getLogDescription()),e),e.state=o.m.Cancelled,v(Date.now())},C=(0,s.useCallback)(()=>{let e=a.filter(e=>x(e));e.length>0&&e.forEach(e=>{D(e)})},[a]),R=(0,s.useCallback)(async e=>{do try{if(e.isFinished())return e.getResult();x(e)?(D(e),v(Date.now())):U(e)?(console.debug("Starting task: ".concat(e.getLogDescription()),e),e.state=o.m.Running,e.started=Date.now(),v(Date.now()),C(),e.attempts++,e.promise=e.initProps.action(),e.result=await e.promise,console.debug("Completed task: ".concat(e.getLogDescription()),e),e.state=o.m.Success,v(Date.now())):(console.debug("Task ".concat(e.getLogDescription()," not ready to start"),e),e.state=o.m.Waiting,v(Date.now()),await new Promise(e=>setTimeout(e,1e3)))}catch(t){e.error=t,e.willTryAgain()?(e.state=o.m.Waiting,v(Date.now()),console.warn("Task ".concat(e.getLogDescription()," will retry in ").concat(e.getNextDelay(),"ms"),e,t),await new Promise(t=>setTimeout(t,e.getNextDelay()))):(e.state=o.m.Failed,console.error("Task ".concat(e.getLogDescription()," failed"),e,t),v(Date.now()))}while(!e.isFinished());return e.getResult()},[a,r,w,v]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.Provider,{value:{api:t,start:T,tasks:a,readyTasks:c,runningTasks:p,waitingTasks:g,succeededTasks:b,failedTasks:f,cancelledTasks:A},children:e.children})})}},90822:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(95155),s=i(16324),o=i(53267),a=i(14426),r=i(12115),c=i(60683),l=i(72750);function d(e){let{runningTasks:t,waitingTasks:i,failedTasks:d}=(0,r.useContext)(l.F),u=(0,s.A)(),p={[c.m.Waiting]:u.palette.taskWaiting.main,[c.m.Ready]:u.palette.taskReady.main,[c.m.Running]:u.palette.taskRunning.main,[c.m.Success]:u.palette.taskSuccess.main,[c.m.Failed]:u.palette.taskFailed.main,[c.m.Cancelled]:u.palette.taskCancelled.main},h=e=>{let{task:t}=e,i=t.initProps.indicator,s=!1;switch(t.state){case c.m.Waiting:i+=" (waiting)",s=!0;break;case c.m.Ready:case c.m.Running:i+="...",s=!0}return(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",borderRadius:1,backgroundColor:"white",border:1,borderColor:p[t.state],borderBottom:4,borderBottomColor:p[t.state],opacity:.75,py:1,px:2},children:[s&&(0,n.jsx)(a.A,{size:"1rem"}),i]})};return(0,r.useEffect)(()=>{t.length>0&&console.info("Running tasks: ".concat(t.length),t.map(e=>({is:e.getLogDescription(),task:e})))},[t]),(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.showRunning&&t.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,n.jsx)(h,{task:e},"task-vis-".concat(e.id,"-").concat(c.m[e.state]))),i.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,n.jsx)(h,{task:e},"task-vis-".concat(e.id,"-").concat(c.m[e.state])))]})}},99013:(e,t,i)=>{i.d(t,{s:()=>n});function n(e){return null!=e}}}]);