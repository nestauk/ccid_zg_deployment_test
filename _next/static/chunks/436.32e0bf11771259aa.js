(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{35055:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>d});var a=t(95155),i=t(99013),r=t(69003),o=t(12115),s=t(54683),n=t(35432);function d(e){let l=(0,o.useRef)(null),[t,r]=(0,o.useState)();(0,o.useEffect)(()=>{(0,i.s)(l.current)?(console.info("ZgVideoCallGrid: calculating grid properties"),r(d(e))):console.warn("ZgVideoCallGrid: eleRef.current is not defined")},[e,l]);let d=e=>{let t,a=e.tiles+e.slideSpan.cols*e.slideSpan.rows,r=e.availableWidth_px*e.availableHeight_px,o=Math.min(e.availableWidth_px/e.slideSpan.cols,Math.sqrt(r/a*e.aspectRatio)),n=(0,s.toPx)(l.current,e.minCellWidth),d=(0,s.toPx)(l.current,e.gap);if(o<n)return p(n,e,n,d);let c=o;for(;c>=n;){var x;let l=p(c,e,n,d);if(l.fitsByHeight&&l.score>(null!=(x=null==t?void 0:t.score)?x:0)&&(t=l),(0,i.s)(t)&&t.remainingAreaPerPage>l.tileArea)break;c-=1}return null!=t?t:p(n,e,n,d)},p=(e,l,t,a)=>{let i=l.tiles+l.slideSpan.cols*l.slideSpan.rows,r=e/l.aspectRatio,o=Math.max(l.slideSpan.cols,Math.floor(l.availableWidth_px/e)),s=Math.ceil(i/o)*r<l.availableHeight_px,n=e*r,d=l.availableWidth_px*l.availableHeight_px,c=n*i,p=c<=d,h=Math.floor(l.availableHeight_px/r),u=h>=l.slideSpan.rows?(o-l.slideSpan.cols)*l.slideSpan.rows+(h-l.slideSpan.rows)*o:(o-l.slideSpan.cols)*h,g=n*u,f=x(l.optimisation,e,r,c);return{calculatedCellWidth:(e*o-a*(o-1))/o,calculatedCellHeight:(r*h-a*(h-1))/h,calculatedCols:o,calculatedRows:h,availableArea:d,tileArea:n,totalArea:c,fitsByHeight:s,fitsBtArea:p,tilesPerPage:u,totalAreaPerPage:g,remainingAreaPerPage:d-g,score:f,fixed:{minCellWidth_px:t,gap_px:a}}},x=(e,l,t,a)=>{switch(e){case n.l.TileWidth:return l*t;case n.l.TiledArea:return a;default:throw Error("Unknown optimisation: ".concat(e))}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{display:"none"},ref:l}),t&&(0,a.jsx)(c,{inputs:e,calculations:t})]})}function c(e){let{inputs:l,calculations:t}=e,i={display:"grid",maxWidth:l.availableWidth_px,maxHeight:l.availableHeight_px,gridAutoFlow:"row",gridTemplateColumns:"repeat(auto-fit, ".concat(t.calculatedCellWidth,"px)"),gap:l.gap,overflow:"hidden"},o={objectFit:"contain",width:"".concat(t.calculatedCellWidth,"px"),height:"".concat(t.calculatedCellHeight,"px"),boxSizing:"border-box",border:"solid 1px grey",positionVisibility:"no-overflow",padding:"0.5rem",borderRadius:"0.4rem",backgroundColor:"darkgrey",color:"white"},s={...o,width:"".concat(t.calculatedCellWidth*l.slideSpan.cols+t.fixed.gap_px*(l.slideSpan.cols-1),"px"),height:"".concat(t.calculatedCellHeight*l.slideSpan.rows+t.fixed.gap_px*(l.slideSpan.rows-1),"px"),gridRowEnd:"span ".concat(l.slideSpan.rows),gridColumnEnd:"span ".concat(l.slideSpan.cols),overflow:"hidden",padding:"0.5rem",borderRadius:"0.4rem",backgroundColor:"white",color:"black"};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(r.A,{sx:i,children:[(0,a.jsx)(r.A,{sx:s,children:(0,a.jsxs)(r.A,{sx:{maxWidth:"100%",maxHeight:"100%",overflow:"auto",columns:2},children:[(0,a.jsx)("b",{children:"Slide"}),(0,a.jsxs)("p",{children:[t.fitsByHeight?(0,a.jsx)("span",{style:{color:"green"},children:"All tiles fit by height"}):(0,a.jsx)("span",{style:{color:"red"},children:"Cannot fit all tiles height"}),(0,a.jsx)("br",{}),t.fitsBtArea?(0,a.jsx)("span",{style:{color:"green"},children:"All tiles fit by area"}):(0,a.jsx)("span",{style:{color:"red"},children:"Cannot fit all tiles by area"}),(0,a.jsx)("br",{}),"Available width: ",l.availableWidth_px,"px",(0,a.jsx)("br",{}),"Available height: ",l.availableHeight_px,"px",(0,a.jsx)("br",{}),"Available area: ",t.availableArea.toFixed(1)," px\xb2",(0,a.jsx)("br",{}),"Tiles requested: ",l.tiles,(0,a.jsx)("br",{}),"Tiles per page: ",t.tilesPerPage,(0,a.jsx)("br",{}),"Aspect ratio: ",l.aspectRatio.toFixed(2),(0,a.jsx)("br",{}),"Minimum tile width: ",l.minCellWidth," (",t.fixed.minCellWidth_px.toFixed(1),"px)",(0,a.jsx)("br",{}),"Calculated tile width: ",t.calculatedCellWidth.toFixed(1),"px",(0,a.jsx)("br",{}),"Calculated tile height: ",t.calculatedCellHeight.toFixed(1),"px",(0,a.jsx)("br",{}),"Tile area: ",t.tileArea.toFixed(1)," px\xb2",(0,a.jsx)("br",{}),"Calculated columns: ",t.calculatedCols,(0,a.jsx)("br",{}),"Calculated rows: ",t.calculatedRows,(0,a.jsx)("br",{}),"Total area: ",t.totalAreaPerPage.toFixed(1)," px\xb2",(0,a.jsx)("br",{}),"Remaining area: ",t.remainingAreaPerPage.toFixed(1)," px\xb2"]})]})}),Array.from({length:Math.min(l.tiles,t.tilesPerPage)},(e,l)=>(0,a.jsx)(r.A,{sx:o,children:(0,a.jsxs)("b",{children:["Tile: ",l]})},"tile-".concat(l)))]})})}},54683:function(e,l,t){var a,i,r;i="undefined"!=typeof self?self:"undefined"!=typeof window?window:this,r=function(e,l){"use strict";var t,a=e.createElement("test"),i=e.documentElement,r=e.defaultView,o=r&&r.getComputedStyle,s=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,n={},d=[1/25.4,1/2.54,1/72,1/6],c=["mm","cm","pt","pc","in","mozmm"],p=6;for(i.appendChild(a),o&&(a.style.marginTop="1%",t="1%"===o(a).marginTop);p--;)n[c[p]+"toPx"]=d[p]?d[p]*n.inToPx:x(a,"1"+c[p]);function x(e,t,a,r){a=a||"width";var o,d,c,p=(t.match(s)||[])[2],x="px"===p?1:n[p+"toPx"];if(x||/r?em/i.test(p)&&!r)e=x?e:"rem"===p?i:"fontSize"===a&&e.parentNode||e,x=x||parseFloat(h(e,"fontSize")),c=parseFloat(t)*x;else{d=(o=e.style)[a];try{o[a]=t}catch(e){return 0}c=o[a]?parseFloat(h(e,a)):0,o[a]=l!==d?d:null}return c}function h(e,l){var a,i,r,n,d,c=["paddingTop","paddingBottom","borderTop","borderBottom"],p=4;if("%"===(r=((a=o?o(e)[l]:(i=e.style["pixel"+l.charAt(0).toUpperCase()+l.slice(1)])?i+"px":"fontSize"===l?x(e,"1em","left",1)+"px":e.currentStyle[l]).match(s)||[])[2])&&t)if(/^top|bottom/.test(l)){for(n=(d=e.parentNode||e).offsetHeight;p--;)n-=parseFloat(h(d,c[p]));a=parseFloat(a)/100*n+"px"}else a=x(e,a);else("auto"===a||r&&"px"!==r)&&o?a=0:r&&"px"!==r&&!o&&(a=x(e,a)+"px");return a}return i.removeChild(a),a=l,{toPx:x}},void 0===(a=(function(){return r(i.document)}).call(l,t,l,e))||(e.exports=a)}}]);