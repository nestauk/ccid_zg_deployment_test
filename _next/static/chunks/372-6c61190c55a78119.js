"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[372],{333:(e,t,n)=>{n.d(t,{Ay:()=>x,LY:()=>h,n8:()=>m});var i=n(95155),r=n(57300),o=n(18932),s=n(54884),a=n(32276),l=n(46671),c=n.n(l),d=n(12115),u=n(95507);let p=Number.MAX_SAFE_INTEGER;var h=function(e){return e.Chime="chime",e.Test="test",e}({});let g=(e,t,n)=>{var i,r;return{role:e.role,local:t,name:null!=(r=null!=(i=e.participantName)?i:e.deviceName)?r:"Unknown",did:e.deviceId,banned:n,subscription:e}},m=(0,d.createContext)(null);function x(e){let{subscriptions:t,deviceIdBanList:n,thisUser:l}=(0,d.useContext)(r.f),[h,x]=(0,d.useState)({arrangement:u.t}),[f,y]=(0,d.useState)([]),{roster:b}=(0,a.Abl)(),v=(0,a.b7G)();return(0,d.useEffect)(()=>{let e=v.filter(e=>(0,s.s)(b[e].externalUserId)).map(e=>b[e].externalUserId).slice(0,p);!1===c().isEqual(e,f)&&y(e)},[v,f,b]),(0,d.useEffect)(()=>{let i;console.debug("Updating video tile arrangement...");let r=null==l?void 0:l.subscriptionId,a=null==l?void 0:l.deviceId,c=!!a&&n.includes(a),d=t.filter(e=>e.subscriptionId===r).map(e=>g(e,!0,n.includes(e.deviceId))),u=t.filter(e=>e.subscriptionId!==r).map(e=>g(e,!1,n.includes(e.deviceId))),p=u.filter(e=>e.role===o.sW.Controller),h=u.filter(e=>e.role===o.sW.Client),m=[],y=h.filter(e=>!m.find(t=>t.did===e.did)),b=f.map(e=>y.find(t=>t.did===e)).filter(s.s),v=y.filter(e=>!b.find(t=>t.did===e.did));if(c)i={mandatory:[...p,...d],queued:[],active:[],inactive:[]};else switch(e.role){case o.sW.Controller:i={mandatory:[...p,...d],queued:[...m],active:[...b],inactive:[...v]};break;case o.sW.Client:i={mandatory:[...p,...d].filter(e=>!e.banned),queued:[...m].filter(e=>!e.banned),active:[...b].filter(e=>!e.banned),inactive:[...v].filter(e=>!e.banned)}}x(e=>({...e,arrangement:i}))},[t,n,null==l?void 0:l.subscriptionId,f,null==l?void 0:l.deviceId,e.role]),(0,i.jsx)(m.Provider,{value:h,children:e.children})}},2492:(e,t,n)=>{n.d(t,{O:()=>ej,A:()=>eA});var i=n(95155),r=n(80357),o=n(80317),s=n(12115),a=n(98314),l=n(25612),c=n(2768),d=n(57300),u=n(80431),p=n(21644),h=n(84073),g=n(19373),m=n(10310),x=n(18414),f=n(79200),y=n(18932),b=n(62652);function v(e){let{keepAwake:t}=e,[n,r]=(0,s.useState)(),[o,a]=(0,s.useState)();return(0,s.useEffect)(()=>{if(void 0===n&&void 0!==window.navigator){var e;r(null==(e=window.navigator)?void 0:e.wakeLock)}},[]),(0,s.useEffect)(()=>{console.debug("Wake lock: ".concat(void 0===n?"unavailable":"available",", keepAwake: ").concat(t));try{void 0!==n&&(t&&void 0===o&&n.request("screen").then(e=>{console.debug("Wake lock sentinel acquired"),a(e)}).catch(e=>{console.error("Wake lock exception",e)}),t||(void 0!==o&&console.debug("Releasing wake lock sentinel..."),null==o||o.release().then(()=>{console.debug("Wake lock sentinel released."),a(void 0)})))}catch(e){console.warn("Unable to request screen lock",e)}return()=>{void 0!==o&&console.debug("Relesaing wake lock sentinel..."),null==o||o.release().then(()=>{console.debug("Wake lock sentinel released."),a(void 0)})}},[n,t]),(0,i.jsx)(i.Fragment,{})}function w(e){let{children:t}=e;return(0,i.jsx)(r.A,{sx:{position:"fixed",right:"1.5rem",bottom:"1.5rem",zIndex:10},children:t})}function j(e){let{children:t}=e;return(0,i.jsx)(r.A,{sx:{position:"fixed",right:"1.5rem",top:"1.5rem",zIndex:10},children:t})}function A(e){let{children:t}=e;return(0,i.jsx)(r.A,{sx:{position:"fixed",left:"1.5rem",bottom:"1.5rem",zIndex:10},children:t})}var k=n(65016),S=n(25216),C=n(25789),I=n(50301),D=n(60193);function E(e){let{session:t}=(0,s.useContext)(a.$),n=(0,s.useContext)(h.yk),r=(0,s.useMemo)(()=>{var t;return(null==(t=e.elementRef)?void 0:t.current)||document.documentElement},[e.elementRef]),[o,l]=(0,s.useState)(),c=async()=>{try{!1!==document.fullscreenEnabled?r.requestFullscreen?await r.requestFullscreen({navigationUI:"hide"}):r.webkitRequestFullscreen?await r.webkitRequestFullscreen():r.webkitEnterFullscreen?await r.webkitEnterFullscreen():r.mozRequestFullScreen?await r.mozRequestFullScreen():r.msRequestFullscreen?await r.msRequestFullscreen():console.warn("No request full screen variants found"):console.warn("Fullscreen not enabled")}catch(e){console.error("Error entering fullscreen",e)}},d=async()=>{try{let e=document;document.fullscreenElement?await document.exitFullscreen():e.webkitFullscreenElement?await e.webkitExitFullscreen():e.mozFullScreenElement?await e.mozCancelFullScreen():e.msFullscreenElement?await e.msExitFullscreen():console.warn("No exit full screen variants found")}catch(e){console.error("Error exiting fullscreen",e)}};(0,s.useEffect)(()=>{document.onfullscreenchange=e=>{l(null!==document.fullscreenElement)}},[]),(0,s.useEffect)(()=>{n.role===y.sW.Client&&void 0!==r&&(e.goFullScreen&&!o&&t.facilitationState!==y.ve.Closed&&c(),!e.goFullScreen&&o&&d())},[e.goFullScreen,r]),(0,s.useEffect)(()=>{t.facilitationState===y.ve.Closed&&(console.debug("Session closed: exit fullscreen"),d())},[t.facilitationState]);let u=(0,C.A)();return(0,i.jsx)(i.Fragment,{children:n.role===y.sW.Client&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(I.A,{title:o?(0,i.jsx)(b.A,{i18nKey:"button.exitFullScreen"}):(0,i.jsx)(b.A,{i18nKey:"button.goFullScreen"}),children:(0,i.jsx)(D.A,{"aria-label":o?"back to desktop":"go full screen",onClick:()=>o?d():c(),sx:{border:"2px solid",borderColor:u.palette.promptPanelBackground.main,background:u.palette.slideSectionBackground.main,opacity:.75,"&:hover":{backgroundColor:u.palette.slideSectionBackground.main,opacity:1}},children:o?(0,i.jsx)(S.A,{}):(0,i.jsx)(k.A,{})})})})})}var T=n(48081),q=n(4615);let P=[y.jB.Error,y.jB.Offline],R=[y.jB.Disconnected],F=[y.jB.Online,y.jB.Connecting,y.jB.Connected,y.jB.Joining];var _=function(e){return e.Disconnected="Disconnected from the workshop server.",e.Connecting="Please wait, connecting to the workshop server...",e.Error="An error occurred while connecting to the workshop server.",e}(_||{});function W(){let e=(0,s.useContext)(l.j),[t,n]=(0,s.useState)(e.state),[r,o]=(0,s.useState)(void 0);return(0,s.useEffect)(()=>{console.debug("Connection warning, state: ".concat(y.jB[e.state])),n(e.state)},[e.state]),(0,s.useEffect)(()=>{o((e=>{if(R.includes(e))return"Disconnected from the workshop server.";if(F.includes(e))return"Please wait, connecting to the workshop server...";if(P.includes(e))return"An error occurred while connecting to the workshop server."})(t))},[t]),(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsxs)(q.A,{variant:"filled",severity:"An error occurred while connecting to the workshop server."===r?"error":"info",children:[r," (",y.jB[t],")"]})})}var B=n(25148),N=n(69999);function U(e){let[t,n]=(0,s.useState)(!1),[r,o]=(0,s.useState)();(0,s.useEffect)(()=>(N.A.on(N.m.WSS_Update_ConnectionState,o),()=>{N.A.off(N.m.WSS_Update_ConnectionState,o)}),[]),(0,s.useEffect)(()=>{void 0!==r&&r.type===N.m.WSS_Update_ConnectionState&&r.data>=y.jB.Connecting&&n(!0)},[r]);let a=(0,C.A)();return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)(I.A,{title:(0,i.jsx)(b.A,{i18nKey:"button.reconnect"}),children:(0,i.jsx)(D.A,{"aria-label":"refresh",onClick:()=>(()=>{switch(e.mode){case"reconnect-wss":N.A.emit({type:N.m.WSS_Request_Reconnect});break;case"reload-session":N.A.emit({type:N.m.WSS_Refresh_Session})}})(),sx:{border:"2px solid",borderColor:a.palette.promptPanelBackground.main,background:a.palette.slideSectionBackground.main,opacity:.75,"&:hover":{backgroundColor:a.palette.slideSectionBackground.main,opacity:1}},children:(0,i.jsx)(B.A,{})})})})}function V(){let{session:e}=(0,s.useContext)(m.L);return(0,s.useEffect)(()=>{document.title=e.sessionName},[]),(0,i.jsx)(i.Fragment,{})}var O=n(90073);function L(e){return(0,i.jsx)(i.Fragment,{children:e.role===y.sW.Client&&(0,i.jsx)(O.A,{sx:{display:"flex",alignItems:"center",flexDirection:"row",gap:1},children:e.children})})}var M=n(54884);function z(){return(0,s.useEffect)(()=>{var e;let t=[/defaultProps/,/of chart should be greater than 0/,/It will be ignored./,/If you accidentally passed it from a parent component, remove it from the DOM element./,/Form submission canceled because the form is not connected/,/Enriching/,/Added non-passive event/,/Form submission canceled/,/Added non-passive event listener/,/Violation/,/Warning: Invalid DOM/,/Canvas2D/],n=console.error,i=console.warn,r=console.info,o=console.debug,s=null==(e=window)?void 0:e.onerror;return console.error=function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];t.some(e=>i.some(t=>e.test("".concat(t))))||n(...i)},console.warn=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.some(e=>n.some(t=>e.test("".concat(t))))||i(...n)},console.info=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t.some(e=>n.some(t=>e.test("".concat(t))))||r(...n)},console.debug=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];t.some(e=>n.some(t=>e.test("".concat(t))))||o(...n)},(0,M.s)(window)&&(window.onerror=(e,t,n,i,r)=>{}),()=>{console.error=n,console.warn=i,console.debug=o,console.info=r,(0,M.s)(s)&&(window.onerror=s)}},[]),(0,i.jsx)(i.Fragment,{})}var K=n(48484),H=n(77914),G=n(31240),J=n(50355),Z=n(66622);function $(e){let{publicContent:t}=(0,s.useContext)(m.L),[n,a]=(0,s.useState)(""),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),p=l&&0===n.trim().length,h=!p&&n.trim().length>0,g=t=>{h&&(e.submitName(n),u(!0))};return(0,i.jsxs)(i.Fragment,{children:[!d&&(0,i.jsx)(Z.A,{privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"start",gap:2},children:[(0,i.jsx)(o.A,{variant:"h2",color:"white",children:(0,i.jsx)(b.A,{i18nKey:"onboarding.pleaseEnterName"})}),(0,i.jsx)(o.A,{variant:"body1",color:"white",children:(0,i.jsx)(b.A,{i18nKey:"onboarding.pleaseEnterNameExplanation"})}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g()},style:{alignSelf:"stretch"},children:[(0,i.jsx)(J.A,{sx:{mb:4,input:{background:"#ffffffcc"}},fullWidth:!0,style:{flexGrow:1},label:(0,i.jsx)(b.A,{i18nKey:"field.yourName"}),variant:"outlined",value:n,autoComplete:"off",autoFocus:!0,onChange:e=>{a(e.target.value),c(!0)},error:p,color:"buttonStandard"}),(0,i.jsx)(G.A,{color:"buttonReverse",btnKey:"submit",busy:!1,disabled:!h,onClick:g,btnText:(0,i.jsx)(b.A,{i18nKey:"button.continue"})})]})]})}),d&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(H.T.Provider,{value:{participantName:n},children:e.children})})]})}var Q=n(89041),Y=n(74597),X=n(72034),ee=n(33427),et=n(41133),en=n(94686),ei=n(36471),er=n(1859),eo=n(33652),es=n(74603),ea=n(90584),el=n(92253);let ec={get_request:!1,get_success:!1,get_fail_system:!1,get_fail_user:!1,get_fail_could_not_start:!1,get_fail_unknown_error:!1},ed=e=>e.get_fail_system||e.get_fail_user||e.get_fail_could_not_start||e.get_fail_unknown_error,eu=e=>{let{prompts:t}=e;return(0,i.jsxs)(i.Fragment,{children:[t.get_success&&(0,i.jsx)(q.A,{severity:"success",children:"Your camera and microphone are ready to go!"}),t.get_request&&(0,i.jsx)(q.A,{severity:"info",children:"If prompted by your browser, please grant permission to access your camera and microphone."}),t.get_fail_system&&(0,i.jsx)(q.A,{severity:"error",children:"Your browser has denied access to your camera and microphone. Please check your browser settings and reload the page."}),t.get_fail_user&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.A,{severity:"warning",children:"Your browser has been denied access to your camera and/or microphone."}),(0,i.jsxs)(o.A,{variant:"h4",component:"h2",color:"white",children:["What to do next on ",el.C0]}),el.H8&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(X.A,{fontSize:"inherit"}),children:"If you see a crossed video camera icon at the end of your address bar, click it to change permissions."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(ee.A,{fontSize:"inherit"}),children:"If you don't see a camera icon, click the info icon at the beginning of the address bar for the page settings."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(et.A,{fontSize:"inherit"}),children:"Grant permission to access camera and microphone from there."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(en.A,{fontSize:"inherit"}),children:"When done, reload the page."})]}),el.gm&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(X.A,{fontSize:"inherit"}),children:"If you see a crossed video camera or microphone icon at the start of your address bar, click it to change permissions."}),(0,i.jsxs)(q.A,{severity:"info",icon:(0,i.jsx)(ei.A,{fontSize:"inherit"}),children:["If you don't see those icons, choose ",(0,i.jsx)("b",{children:"Tools"})," > ",(0,i.jsx)("b",{children:"Page Info"})," from the menu."]}),(0,i.jsxs)(q.A,{severity:"info",icon:(0,i.jsx)(et.A,{fontSize:"inherit"}),children:["Grant permission to access camera and microphone from the ",(0,i.jsx)("b",{children:"Permissions"})," tab."]}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(en.A,{fontSize:"inherit"}),children:"When done, reload the page."}),(0,i.jsx)("img",{src:"/instructions/permissions-dialog-ff.png",style:{width:"80%",alignSelf:"center"}})]}),el.nr&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(q.A,{severity:"info",icon:(0,i.jsx)(ei.A,{fontSize:"inherit"}),children:["Choose ",(0,i.jsx)("b",{children:"Safari"})," > ",(0,i.jsx)("b",{children:"Settings"})," from the menu, then click ",(0,i.jsx)("b",{children:"Websites"}),"."]}),(0,i.jsxs)(q.A,{severity:"info",icon:(0,i.jsx)(er.A,{fontSize:"inherit"}),children:["Choose the Camera settings, and set this site to ",(0,i.jsx)("b",{children:"Allow"}),"."]}),(0,i.jsxs)(q.A,{severity:"info",icon:(0,i.jsx)(eo.A,{fontSize:"inherit"}),children:["Choose the Microphone settings, and set this site to ",(0,i.jsx)("b",{children:"Allow"}),"."]}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(es.A,{fontSize:"inherit"}),children:"When done, reload the page."}),(0,i.jsx)("img",{src:"/instructions/permissions-dialog-sf.png",style:{width:"80%",alignSelf:"center"}})]}),el.UP&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(ei.A,{fontSize:"inherit"}),children:"Select Settings and more... and select Settings."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(et.A,{fontSize:"inherit"}),children:"Select Cookies and Site Permissions on the left side."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(en.A,{fontSize:"inherit"}),children:"Under Site Permissions, select Camera or Microphone."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(es.A,{fontSize:"inherit"}),children:"Grant permissions there"}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(ea.A,{fontSize:"inherit"}),children:"When done, reload this page."})]}),!el.H8&&!el.gm&&!el.nr&&!el.UP&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(q.A,{severity:"warning",children:["We don't have instructions for ",el.C0,"."]}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(ei.A,{fontSize:"inherit"}),children:"Please grant camera and microphone permissions for this page."}),(0,i.jsx)(q.A,{severity:"info",icon:(0,i.jsx)(et.A,{fontSize:"inherit"}),children:"When done, reload the page."})]})]}),t.get_fail_could_not_start&&(0,i.jsx)(q.A,{severity:"warning",children:"Your camera and microphone are in use by another application. Please close the other application, refresh this page, and try again."}),t.get_fail_unknown_error&&(0,i.jsx)(q.A,{severity:"error",children:"An unexpected error has prevented us from checking your camera and microphone. Please reload the page to try again."})]})},ep=[{title:"Can we use your microphone and camera during this workshop?",body:"This session will involve participation and discussion, so we will need to use your microphone and camera in order to see and hear you."},{title:"Are you sure?",body:"Unfortunately, without granting access to your microphone and camera you will not be able to participate in the session. Please select below to either allow access, or to navigate out of the session."}];function eh(e){let{session:t}=(0,s.useContext)(m.L),[n,a]=(0,s.useState)(0),[l,c]=(0,s.useState)(ec),[d,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),g=t.remoteConfiguration===y.LQ.RemoteWithVideoCall;(0,s.useEffect)(()=>{g&&(u(!0),x().then(e=>{h(e)}).catch(e=>{console.error(e)}).finally(()=>{u(!1)}))},[]),(0,s.useEffect)(()=>{p&&e.onGrant(!0)},[p]);let x=async()=>{if(void 0===navigator)return console.warn("Navigator required to check permissions"),!1;try{let e=await navigator.permissions.query({name:"camera"});return"granted"===e.state}catch(e){return console.error("Error checking camera permissions",e),!1}},f=async()=>{let e=await b();if(!0===e||!1===e)h(e),c({...ec,get_success:e,get_fail_unknown_error:!e});else{let{type:t,name:n,message:i}=e;h(!1),console.error("Permission denied: ".concat(n,", ").concat(i)),c({...ec,get_success:!1,get_fail_system:t===Y.n1.SystemPermissionDenied,get_fail_user:t===Y.n1.UserPermissionDenied,get_fail_could_not_start:t===Y.n1.CouldNotStartVideoSource,get_fail_unknown_error:null==t||t===Y.n1.Generic})}},b=async()=>{try{let e=await (0,Y.yD)();if(void 0!==e)return e;throw{type:Y.n1.Generic,name:"Unknown",message:"Unknown error"}}catch(e){if(void 0!==e)return e;return{type:Y.n1.Generic,name:"Unknown",message:"Unknown error"}}};return(0,i.jsxs)(i.Fragment,{children:[!p&&g&&(0,i.jsx)(Z.A,{children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"start",gap:2},children:[(0,i.jsx)(o.A,{variant:"h2",color:"white",children:ep[n].title}),(0,i.jsx)(o.A,{variant:"body1",color:"white",children:ep[n].body}),(0,i.jsx)(r.A,{sx:{alignSelf:"stretch",display:"flex",flexDirection:"column",gap:2},children:(0,i.jsx)(eu,{prompts:l})}),(0,i.jsxs)(r.A,{sx:{mt:4,display:"flex",flexDirection:"column",gap:2},children:[d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.A,{sx:{mt:4,backgroundColor:"#444444","& .MuiLinearProgress-bar":{backgroundColor:"white"}}}),(0,i.jsx)(o.A,{variant:"body2",color:"white",children:"Checking for permission..."})]}),!d&&!ed(l)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.A,{btnKey:"allow",busy:!1,disabled:!1,onClick:f,color:"buttonReverse",btnText:"ALLOW"}),0===n&&(0,i.jsx)(G.A,{btnKey:"deny",variant:"text",busy:!1,disabled:!1,onClick:()=>a(1),color:"buttonReverse",btnText:"DO NOT ALLOW"}),1===n&&(0,i.jsx)(G.A,{btnKey:"deny",variant:"text",busy:!1,disabled:!1,onClick:()=>void window.location.reload(),color:"buttonReverse",btnText:"EXIT WORKSHOP"})]}),!d&&ed(l)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(G.A,{btnKey:"allow",variant:"outlined",busy:!1,disabled:!1,onClick:()=>{window.location.reload()},color:"buttonReverse",btnText:"RELOAD PAGE"})})]})]})}),(p||!g)&&(0,i.jsx)(i.Fragment,{children:e.children})]})}var eg=n(79005);function em(e){let{children:t}=e,{publicContent:n,session:o}=(0,s.useContext)(m.L),[a,l]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[!a&&(0,i.jsx)(Z.A,{privacyNotice:!0,workshopInformationUrl:n.workshopInformationUrl,children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"start",gap:2},children:[(0,i.jsx)(eg.A,{session:o,layout:"column",welcome:!0,white:!0}),(0,i.jsx)(G.A,{color:"buttonReverse",btnText:(0,i.jsx)(b.A,{i18nKey:"button.getStarted"}),btnKey:"start",onClick:e=>{l(!0)},sx:{mt:4}})]})}),a&&(0,i.jsx)(i.Fragment,{children:t})]})}function ex(e){let{children:t}=e,{session:n}=(0,s.useContext)(m.L),[a,l]=(0,s.useState)(n.remoteConfiguration===y.LQ.InPerson);return(0,i.jsxs)(i.Fragment,{children:[!a&&(0,i.jsx)(Z.A,{children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"start",gap:2},children:[(0,i.jsx)(o.A,{variant:"h2",color:"white",children:"We recommend using WiFi rather than mobile data"}),(0,i.jsx)(o.A,{variant:"body1",color:"white",children:"This session involves watching some video content which requires more data usage. So we recommend you use WiFi so as not to use up too much mobile data."}),(0,i.jsx)(G.A,{color:"buttonReverse",btnText:"CONTINUE",btnKey:"start",onClick:e=>{l(!0)},sx:{mt:4}})]})}),a&&(0,i.jsx)(i.Fragment,{children:t})]})}let ef=e=>{let{bar:t}=e;return(0,i.jsx)(K.A,{preTitle:(0,i.jsx)(b.A,{i18nKey:"onboarding.welcomeTo"}),title:"Zeitgeist",bar:t})},ey=()=>(0,i.jsx)(K.A,{preTitle:(0,i.jsx)(b.A,{i18nKey:"onboarding.thanks"}),title:(0,i.jsx)(b.A,{i18nKey:"onboarding.almostThere"}),bar:"Synchronizing clocks..."}),eb=()=>(0,i.jsx)(K.A,{preTitle:(0,i.jsx)(b.A,{i18nKey:"onboarding.thanks"}),title:(0,i.jsx)(b.A,{i18nKey:"onboarding.almostThere"}),bar:"Loading workshop content. This may take a few minutes..."}),ev=()=>(0,i.jsx)(K.A,{preTitle:(0,i.jsx)(b.A,{i18nKey:"onboarding.thanks"}),title:(0,i.jsx)(b.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting you to the workshop..."}),ew=e=>{let{descriptionKey:t,adviceKey:n}=e;return(0,i.jsxs)(r.A,{sx:{width:"100%",height:"100%",border:"solid 4px red",p:2,textWrap:"wrap",display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)(r.A,{children:[(0,i.jsx)(o.A,{variant:"h1",children:(0,i.jsx)(b.A,{i18nKey:t})}),(0,i.jsx)(b.A,{i18nKey:n,wrapper:(0,i.jsx)(o.A,{variant:"body1"})})]}),(0,i.jsxs)(r.A,{children:[(0,i.jsx)(o.A,{variant:"h2",children:(0,i.jsx)(b.A,{i18nKey:"onboarding.warnings.*.description"})}),(0,i.jsx)(b.A,{i18nKey:"onboarding.warnings.*.advice",wrapper:(0,i.jsx)(o.A,{variant:"body1"})})]})]})},ej=(0,s.createContext)({});function eA(e){let{role:t,sid:n,joinCode:o,refresh:k,children:S}=e,[C,I]=(0,s.useState)(!1),[D,q]=(0,s.useState)("Unknown"),[P,R]=(0,s.useState)(!1),[F,_]=(0,s.useState)(!1),B=t===y.sW.Controller;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.A,{sx:{width:"100%",height:"100%"},children:(0,i.jsxs)(x.Ay,{children:[(0,i.jsx)(w,{children:(0,i.jsx)(T.A,{})}),(0,i.jsx)(z,{}),(0,i.jsx)(h.Ay,{role:t,sid:n,joinCode:o,load:(0,i.jsx)(ef,{bar:"Checking access to the workshop..."}),err:(0,i.jsx)(ew,{descriptionKey:"onboarding.warnings.ZgSessionUserProvider.description",adviceKey:"onboarding.warnings.ZgSessionUserProvider.advice"}),children:(0,i.jsxs)(m.A,{sid:n,init:(0,i.jsx)(ef,{}),load:(0,i.jsx)(ef,{bar:(0,i.jsx)(b.A,{i18nKey:"onboarding.loadingWorkshop"})}),err:(0,i.jsx)(ew,{descriptionKey:"onboarding.warnings.ZgStaticSessionDataProvider.description",adviceKey:"onboarding.warnings.ZgStaticSessionDataProvider.advice"}),children:[(0,i.jsx)(V,{}),(0,i.jsxs)(a.A,{children:[(0,i.jsx)(j,{children:(0,i.jsxs)(L,{role:t,children:[(0,i.jsx)(U,{mode:"reconnect-wss"}),(0,i.jsx)(E,{goFullScreen:C})]})}),(0,i.jsx)(em,{children:(0,i.jsx)($,{submitName:q,children:(0,i.jsx)(eh,{onGrant:R,children:(0,i.jsx)(ex,{children:(0,i.jsx)(ej.Provider,{value:{participantName:D,videoCallPermissionsGranted:P,storagePermissionsGranted:F},children:(0,i.jsx)(c.A,{load:(0,i.jsx)(ey,{}),error:(0,i.jsx)(ew,{descriptionKey:"onboarding.warnings.ZgServerTimeProvider.description",adviceKey:"onboarding.warnings.ZgServerTimeProvider.advice"}),children:(0,i.jsx)(g.A,{sid:n,refresh:k,init:(0,i.jsx)(eb,{}),load:(0,i.jsx)(eb,{}),err:(0,i.jsx)(ew,{descriptionKey:"onboarding.warnings.ZgStaticSessionContentProvider.description",adviceKey:"onboarding.warnings.ZgStaticSessionContentProvider.advice"}),children:(0,i.jsx)(l.A,{sid:n,load:(0,i.jsx)(ev,{}),error:(0,i.jsx)(ew,{descriptionKey:"onboarding.warnings.ZgResilientWssConnectionProvider.description",adviceKey:"onboarding.warnings.ZgResilientWssConnectionProvider.advice"}),children:(0,i.jsxs)(f.A,{children:[(0,i.jsx)(A,{children:(0,i.jsx)(W,{})}),(0,i.jsx)(u.Ay,{children:(0,i.jsx)(p.A,{store:B,refresh:k,previews:!0,children:(0,i.jsxs)(d.A,{sid:n,children:[(0,i.jsx)(v,{keepAwake:!0}),S]})})})]})})})})})})})})})]})]})})]})})})}},2768:(e,t,n)=>{n.d(t,{A:()=>u,v:()=>d});var i=n(95155),r=n(12115),o=n(18932),s=n(69999),a=n(54884),l=n(10310),c=n(18414);let d=(0,r.createContext)({});function u(e){let{api:t,start:n}=(0,r.useContext)(c.F$),{session:u}=(0,r.useContext)(l.L),[p,h]=(0,r.useState)(),[g,m]=(0,r.useState)(!1),x=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let e=async()=>{let e;console.info("Synchronising Zg Server Time..."),s.A.emit({type:s.m.Content_Progress_Update,data:{overall:{completed:0,total:3},bars:{}}}),await n(t.getServerTime());let i=Number.MAX_SAFE_INTEGER,r=0;for(let o=0;o<3;o++){let l=Date.now(),c=await n(t.getServerTime());if(!(0,a.s)(c))continue;let d=Date.now(),u=d-l,p=(l+d)/2,h=c.timestamp-p;u<i&&(i=u,r=h,e=c),s.A.emit({type:s.m.Content_Progress_Update,data:{overall:{completed:o+1,total:3},bars:{}}}),await new Promise(e=>setTimeout(e,500))}return{offset:r,rtt:i,source:e,toServerTime:e=>Math.round(e+r),fromServerTime:e=>Math.round(e-r)}};!x.current&&(x.current=!0,(0,a.s)(p)||(u.remoteConfiguration===o.LQ.InPerson?e().then(e=>{h(e)}).catch(e=>{console.error(e),m(!0)}):h({offset:0,rtt:0,source:null,toServerTime:e=>e,fromServerTime:e=>e})))},[t,p,u.remoteConfiguration,n]),(0,i.jsxs)(i.Fragment,{children:[!(0,a.s)(p)&&!g&&(0,i.jsx)(i.Fragment,{children:e.load}),!(0,a.s)(p)&&g&&(0,i.jsx)(i.Fragment,{children:e.error}),(0,a.s)(p)&&(0,i.jsx)(d.Provider,{value:p,children:e.children})]})}},5611:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(95155),r=n(25789);function o(e){var t,n,o,s,a,l,c,d;let u=(0,r.A)();return(0,i.jsxs)("svg",{width:null!=(t=String(e.width))?t:"43",height:null!=(n=String(e.height))?n:"43",viewBox:"0 0 43 43",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{x:"11.5",y:"11.11",width:"21",height:"18",fill:null!=(o=e.fill)?o:u.palette.handRaisedFill.main}),(0,i.jsx)("path",{d:"M32.2501 19.7084V10.75C32.2501 9.79968 31.8726 8.88825 31.2006 8.21624C30.5286 7.54424 29.6171 7.16671 28.6668 7.16671C27.7164 7.16671 26.805 7.54424 26.133 8.21624C25.461 8.88825 25.0834 9.79968 25.0834 10.75",fill:null!=(s=e.fill)?s:u.palette.handRaisedFill.main}),(0,i.jsx)("path",{d:"M25.0834 17.9167V7.16671C25.0834 6.21635 24.7059 5.30491 24.0339 4.63291C23.3619 3.9609 22.4505 3.58337 21.5001 3.58337C20.5497 3.58337 19.6383 3.9609 18.9663 4.63291C18.2943 5.30491 17.9168 6.21635 17.9168 7.16671V10.75",fill:null!=(a=e.fill)?a:u.palette.handRaisedFill.main}),(0,i.jsx)("path",{d:"M17.9168 18.8125V10.75C17.9168 9.79968 17.5392 8.88825 16.8672 8.21624C16.1952 7.54424 15.2838 7.16671 14.3334 7.16671C13.3831 7.16671 12.4716 7.54424 11.7996 8.21624C11.1276 8.88825 10.7501 9.79968 10.7501 10.75V25.0834",fill:null!=(l=e.fill)?l:u.palette.handRaisedFill.main}),(0,i.jsx)("path",{d:"M32.2501 14.3334C32.2501 13.383 32.6276 12.4716 33.2996 11.7996C33.9716 11.1276 34.8831 10.75 35.8334 10.75C36.7838 10.75 37.6952 11.1276 38.3672 11.7996C39.0392 12.4716 39.4168 13.383 39.4168 14.3334V25.0834C39.4168 28.8848 37.9067 32.5306 35.2186 35.2186C32.5306 37.9066 28.8849 39.4167 25.0834 39.4167H21.5001C16.4834 39.4167 13.4376 37.8759 10.768 35.2242L4.31802 28.7742C3.70157 28.0915 3.37128 27.1978 3.39553 26.2783C3.41979 25.3588 3.79673 24.4838 4.44831 23.8345C5.09989 23.1852 5.97621 22.8114 6.89582 22.7904C7.81543 22.7694 8.7079 23.1028 9.38844 23.7217L12.5418 26.875",fill:null!=(c=e.fill)?c:u.palette.handRaisedFill.main}),(0,i.jsx)("path",{d:"M32.2501 19.7084V10.75C32.2501 9.79968 31.8726 8.88825 31.2006 8.21624C30.5286 7.54424 29.6171 7.16671 28.6668 7.16671C27.7164 7.16671 26.805 7.54424 26.133 8.21624C25.461 8.88825 25.0834 9.79968 25.0834 10.75M25.0834 17.9167V7.16671C25.0834 6.21635 24.7059 5.30491 24.0339 4.63291C23.3619 3.9609 22.4505 3.58337 21.5001 3.58337C20.5497 3.58337 19.6383 3.9609 18.9663 4.63291C18.2943 5.30491 17.9168 6.21635 17.9168 7.16671V10.75M17.9168 10.75V18.8125M17.9168 10.75C17.9168 9.79968 17.5392 8.88825 16.8672 8.21624C16.1952 7.54424 15.2838 7.16671 14.3334 7.16671C13.3831 7.16671 12.4716 7.54424 11.7996 8.21624C11.1276 8.88825 10.7501 9.79968 10.7501 10.75V25.0834M32.2501 14.3334C32.2501 13.383 32.6276 12.4716 33.2996 11.7996C33.9716 11.1276 34.8831 10.75 35.8334 10.75C36.7838 10.75 37.6952 11.1276 38.3672 11.7996C39.0392 12.4716 39.4168 13.383 39.4168 14.3334V25.0834C39.4168 28.8848 37.9067 32.5305 35.2186 35.2186C32.5306 37.9066 28.8849 39.4167 25.0834 39.4167H21.5001C16.4834 39.4167 13.4376 37.8759 10.768 35.2242L4.31802 28.7742C3.70157 28.0915 3.37128 27.1978 3.39553 26.2783C3.41979 25.3588 3.79673 24.4838 4.44831 23.8345C5.09989 23.1852 5.97621 22.8114 6.89582 22.7904C7.81543 22.7694 8.7079 23.1028 9.38844 23.7217L12.5418 26.875",stroke:null!=(d=e.stroke)?d:u.palette.userNametagIcon.main,strokeWidth:"2.39",strokeLinecap:"round",strokeLinejoin:"round"})]})}},10310:(e,t,n)=>{n.d(t,{A:()=>x,L:()=>m});var i=n(95155),r=n(12115),o=n(30349),s=n(18932),a=n(54884),l=n(57703),c=n(84073),d=n(18414),u=function(e){return e[e.Init=0]="Init",e[e.RetrievingSession=1]="RetrievingSession",e[e.RetrievingPublicContent=2]="RetrievingPublicContent",e[e.SessionError=3]="SessionError",e[e.Ready=4]="Ready",e}(u||{});let p=[3],h=[0],g=[1,2],m=(0,r.createContext)({});function x(e){let{api:t,start:n}=(0,r.useContext)(d.F$),{user:x,role:f,sessionToken:y}=(0,r.useContext)(c.yk),[b,v]=(0,r.useState)(0),[w,j]=(0,r.useState)(),[A,k]=(0,r.useState)(),[S,C]=(0,r.useState)(!0),[I,D]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{switch(console.debug("Static data state",u[b]),b){case 0:v(1);break;case 1:q().then(e=>{if((0,a.s)(e))j(e),v(2);else throw"Could not retrieve session."}).catch(e=>{console.error(e),v(3)});break;case 2:P().then(e=>{k(e),v(4)}).catch(e=>{console.error(e),v(3)})}D(void 0!==g.find(e=>e===b)),T(void 0!==p.find(e=>e===b)),C(void 0!==h.find(e=>e===b))},[b]);let q=async()=>f===s.sW.Controller?await n(t.getDeliberationSessionAdmin(e.sid,y,x.access_token,void 0)):await (0,o.O)(t,n,e.sid,y),P=async()=>{let e={workshopDirectory:(0,l.G)(w.sessionPresentationUris[0])};return await n(t.postPublicContentAccessRequest(w.id,e))};return(0,i.jsxs)(i.Fragment,{children:[S&&e.init,I&&e.load,E&&e.err,4===b&&(0,i.jsx)(m.Provider,{value:{sid:w.id,session:w,publicContent:A},children:e.children})]})}},17229:(e,t,n)=>{n.d(t,{zs:()=>U,H7:()=>N,ZR:()=>V,Ay:()=>O});var i=n(95155),r=n(18932),o=n(62652),s=n(54884),a=n(79200),l=n(32276),c=n(12115),d=n(55279),u=n(80317),p=n(27855),h=n(48464),g=n(57915),m=n(90073),x=n(37772),f=n(71385),y=n(88379),b=n(79952),v=n(45238),w=n(39268),j=n(76452),A=n(87920),k=n(23405),S=n(45279),C=n(19131),I=n(79158);function D(e){var t;let[n,r]=(0,c.useState)(!1),[s,a]=(0,c.useState)(!1),d=(0,l.Y$K)(e.attendee.chimeAttendeeId).muted,{kickUser:u,lowerHandUser:p,muteUser:h}=(0,j.A)(r),g=e.subscription.participantName.length>40?e.subscription.participantName.substring(0,40)+"...":e.subscription.participantName;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(A.A,{sx:{py:0},children:[(0,i.jsxs)(k.A,{disabled:n||!(null==(t=e.userSignalsForCurrentTile)?void 0:t.raiseHand),onClick:()=>{console.debug('"Lower participant\'s hand" was clicked for participant "'.concat(g,'" (').concat(e.subscription.deviceId,")")),e.requestClose(),p(e.subscription)},children:[(0,i.jsx)(S.A,{children:(0,i.jsx)(I.A,{})}),(0,i.jsx)(C.A,{inset:!1,children:(0,i.jsx)(o.A,{i18nKey:"button.lowerUserHand",options:{name:g}})})]},"attendee-control-menu-item-".concat(e.subscription.subscriptionId,"-lower-hand")),(0,i.jsxs)(k.A,{disabled:n||d,onClick:d?void 0:()=>{e.requestClose(),h(e.subscription)},children:[(0,i.jsx)(S.A,{children:d?(0,i.jsx)("img",{src:"/icons/controls/participant-muted.svg",alt:"muted"}):(0,i.jsx)("img",{src:"/icons/controls/mute-participant.svg",alt:"mute"})}),(0,i.jsx)(C.A,{inset:!1,children:d?"".concat(g," muted"):"Mute ".concat(g)})]},"attendee-control-menu-item-".concat(e.subscription.subscriptionId,"-mute")),(0,i.jsxs)(k.A,{disabled:n,onClick:()=>{a(!0)},children:[(0,i.jsx)(S.A,{children:(0,i.jsx)("img",{src:"/icons/controls/remove-participant.svg",alt:"remove"})}),(0,i.jsxs)(C.A,{inset:!1,children:["Remove ",g]})]},"attendee-control-menu-item-".concat(e.subscription.subscriptionId,"-kick"))]}),(0,i.jsx)(w.A,{prompt:"Remove the participant from the call?",options:[{key:"kick",text:"Remove participant",filled:!0},{key:"cancel",text:"Cancel",filled:!1}],onSelect:t=>{"kick"===t&&u(e.subscription)},open:s,setOpen:a,onClose:e.requestClose})]})}let E="26px",T="37px";function q(e){var t;let n=(0,g.A)();return(0,i.jsx)(m.A,{className:"user-name-tag-icon-container",sx:{alignItems:"center",backgroundColor:null!=(t=e.backgroundColor)?t:n.palette.userNametagIcon.main,borderRadius:"50%",display:"flex",flex:"none",flexDirection:"row",height:e.compactUi?E:T,justifyContent:"center",width:e.compactUi?E:T,...e.sx},children:e.children})}var P=n(18098),R=n(39142);function F(e){let t=(0,l.GVR)(e.attendee.chimeAttendeeId);return(0,i.jsx)(i.Fragment,{children:(null==t?void 0:t.muted)?(0,i.jsx)(P.A,{color:"#ffffffff",height:e.iconSize,strokeWidth:e.iconStrokeWidth,width:e.iconSize}):(0,i.jsx)(R.A,{color:"#ffffffff",height:e.iconSize,strokeWidth:e.iconStrokeWidth,width:e.iconSize})})}var _=n(74246),W=n(5611);function B(e){let t=e.compactUi?"14px":"17px";return(0,i.jsxs)(i.Fragment,{children:[e.raiseHand&&(0,i.jsx)(q,{backgroundColor:"transparent",compactUi:e.compactUi,sx:{mr:1},children:(0,i.jsx)(_.A,{badgeContent:e.raiseHandQueuePosition,color:"userNametagIcon",sx:{"& > .MuiBadge-badge":{borderRadius:"50%",fontWeight:"bold",height:t,minWidth:t,right:e.compactUi?"-1px":"1px",top:e.compactUi?"3px":"4px",width:t}},children:(0,i.jsx)(W.A,{height:e.compactUi?U+5:N+10,width:e.compactUi?U+5:N+10})})}),e.mic&&(0,i.jsx)(q,{compactUi:e.compactUi,children:(0,i.jsx)(F,{attendee:e.attendee,iconSize:e.compactUi?U:N,iconStrokeWidth:V})})]})}let N=22,U=18,V=1.5;function O(e){var t,n;let{isPreview:w}=(0,c.useContext)(v.K),j=function(e){let{roster:t}=(0,l.Abl)(),{allUserSignals:n}=(0,c.useContext)(a.F),i=n.filter(e=>e.raiseHand&&Object.values(t).map(e=>e.externalUserId).includes(e.senderDeviceId)),r=performance.now();i.sort((e,t)=>e.raiseHand.timestamp-t.raiseHand.timestamp);let o=i.findIndex(t=>t.senderDeviceId===e.deviceId)+1,s=performance.now();return s-r>1e3&&console.warn("Queue position calculation took longer than one second: ",s-r),o}(e.subscriptionForCurrentTile),A=(0,g.A)(),k=(0,d.A)(e.subscriptionForCurrentTile.deviceId),[S,C]=(0,c.useState)(!1),I=(0,c.useRef)(null),{roster:E}=(0,l.Abl)(),T=E?null==(t=Object.entries(E).find(t=>{let[n,i]=t;return i.externalUserId===e.subscriptionForCurrentTile.deviceId}))?void 0:t[1]:void 0,q=!w&&!e.banned&&T&&(0,s.s)(k),P=()=>{(0,s.s)(I.current)&&(I.current.scrollWidth>I.current.clientWidth?C(!0):C(!1))};(0,c.useEffect)(()=>{P()},[]);let{width:R}=(0,b.A)({ref:I.current});return(0,c.useEffect)(()=>{(0,s.s)(R)&&P()},[R]),(0,i.jsxs)(m.A,{className:"user-name-tag-container",sx:{alignItems:"center",backgroundColor:"#ffffffff",border:q&&(0,s.s)(null==k?void 0:k.raiseHand)?"2px solid ".concat(A.palette.userNametagIcon.main):"none",borderRadius:e.compactUi?"10px":"15px",display:"flex",flexDirection:"row",fontWeight:"bold",maxWidth:"fit-content",overflow:"hidden",p:q&&(0,s.s)(null==k?void 0:k.raiseHand)?e.compactUi?"2px":"3px":e.compactUi?"4px":"5px",pr:"4px",userSelect:e.thisUser.role===r.sW.Controller?"initial":"none",...e.sx},children:[T&&(0,i.jsx)(m.A,{className:"user-name-tag-icons-container",sx:{display:"flex",flexDirection:"row",mr:e.compactUi?.5:.75},children:(0,i.jsx)(B,{attendee:T,banned:e.banned,compactUi:e.compactUi,mic:!e.banned&&(0,s.s)(T),raiseHand:q&&(0,s.s)(null==k?void 0:k.raiseHand),raiseHandQueuePosition:j})}),(0,i.jsxs)(m.A,{className:"user-name-tag-name-container",sx:{mr:.25,overflow:"hidden",position:"relative"},children:[S&&(0,i.jsx)(m.A,{className:"user-name-tag-name-fadeout",sx:{background:"linear-gradient(90deg, #ffffff00 0%, #ffffffff 95%)",height:"100%",position:"absolute",right:"0",width:"3rem"}}),(0,i.jsxs)(u.A,{className:"user-name-tag-name",ref:I,sx:{color:"#151d51ff",textWrap:"nowrap"},children:[e.subscriptionForCurrentTile.participantName," ",e.isLocal&&(0,i.jsxs)(i.Fragment,{children:["(",(0,i.jsx)(o.A,{i18nKey:"userNametags.me"}),")"]}),!T&&!e.banned&&(0,i.jsxs)(i.Fragment,{children:["(",(0,i.jsx)(o.A,{i18nKey:"userNametags.joining"}),")"]}),e.banned&&(0,i.jsxs)(i.Fragment,{children:["(",(0,i.jsx)(o.A,{i18nKey:"userNametags.banned"}),")"]})]})]}),(null==(n=e.thisUser)?void 0:n.role)===r.sW.Controller&&!e.banned&&!e.isLocal&&T&&e.subscriptionForCurrentTile.role!==r.sW.Controller&&(0,i.jsx)(m.A,{className:"user-name-tag-settings-button-container",children:(0,i.jsx)(f.Ay,{popupId:"user-name-tag-controls-menu-".concat(e.subscriptionForCurrentTile.subscriptionId),variant:"popover",children:t=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.A,{className:"user-name-tag-settings-button",disableRipple:!0,sx:e=>({minWidth:"unset",px:.25,py:0,"&:focus-visible":{...e.customStyles.focusRing}}),...(0,y.cO)(t),children:(0,i.jsx)(x.A,{color:A.palette.userNametagIcon.main,height:e.compactUi?U:N,strokeWidth:3,width:e.compactUi?U:N})}),(0,i.jsx)(h.A,{...(0,y.NA)(t),children:(0,i.jsx)(D,{attendee:T,requestClose:t.close,subscription:e.subscriptionForCurrentTile,userSignalsForCurrentTile:k})})]})})})]})}},17448:(e,t,n)=>{n.d(t,{Ay:()=>f});var i=n(95155),r=n(57300),o=n(54884),s=n(90073),a=n(32276),l=n(34678),c=n(12115),d=n(23387),u=n(45238),p=n(80357),h=n(80317);let g=()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(p.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",border:"solid 2px grey",borderRadius:1},children:"TEST"})}),m=e=>(0,i.jsx)(p.A,{className:"shadow",sx:{borderRadius:"0.5rem",overflow:"hidden",background:"lightgray",height:"100%",width:"100%",position:"relative"},children:(0,i.jsx)(p.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,i.jsxs)(h.A,{variant:"body2",color:"gray",align:"center",sx:{mx:4,textWrap:"balance"},children:["space reserved for ",e.name]})})});var x=n(17229);function f(e){return(0,i.jsxs)(i.Fragment,{children:[e.test&&(0,i.jsx)(g,{}),!e.test&&(0,i.jsx)(y,{subscription:e.subscription})]})}let y=e=>{let{tiles:t,attendeeIdToTileId:n}=(0,a.CHz)(),{tileId:s,isVideoEnabled:l}=(0,a.oCg)(),[d,u]=(0,c.useState)(void 0),{thisUser:p}=(0,c.useContext)(r.f),{roster:h}=(0,a.Abl)(),[g,x]=(0,c.useState)(),[f,y]=(0,c.useState)(void 0),[v,w]=(0,c.useState)(void 0),j=e.subscription.deviceId===(null==p?void 0:p.deviceId);return(0,c.useEffect)(()=>{let t=((e,t)=>{var n;return null==(n=Object.entries(t).find(t=>t[1].externalUserId===e))?void 0:n[1]})(e.subscription.deviceId,h);y(null==t?void 0:t.chimeAttendeeId)},[h,e.subscription.deviceId]),(0,c.useEffect)(()=>{u((0,o.s)(f)?n[f]:void 0)},[n,f,t]),(0,c.useEffect)(()=>{j?w(null!=s?s:void 0):w(d)},[s,j,d]),(0,c.useEffect)(()=>{e.test||((0,o.s)(f)?x({isLocal:j,hasVideo:j?l:t.some(e=>e===v),tileId:v,chimeAttendeeId:f,muted:void 0,subscription:e.subscription,thisUser:p}):x(void 0))},[j,l,t,v,f,e.subscription,p,e.test]),(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(b,{...g},"video-call-tile-".concat(e.subscription.subscriptionId)),!g&&(0,i.jsx)(m,{name:e.subscription.participantName},"video-call-reservation-".concat(e.subscription.subscriptionId))]})},b=function(e){let{muted:t}=(0,a.GVR)(e.chimeAttendeeId),[n,r]=(0,c.useState)(e);return(0,c.useEffect)(()=>{r({...e,muted:t})},[e,t]),(0,i.jsx)(v,{...n})},v=((a.AWB,(e,t)=>e.tileId===t.tileId),a.fIy,function(e){let{isPreview:t}=(0,c.useContext)(u.K);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.A,{className:"shadow",sx:{borderRadius:"0.5rem",overflow:"hidden",background:"#141414",height:"100%",width:"100%",position:"relative"},children:[e.hasVideo&&!e.isLocal&&!1,e.hasVideo&&!e.isLocal&&(0,i.jsx)(a.AWB,{tileId:e.tileId}),e.hasVideo&&e.isLocal&&!1,e.hasVideo&&e.isLocal&&(0,i.jsx)(a.fIy,{}),!e.hasVideo&&(0,i.jsx)(s.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(l.A,{color:"white"})}),e.thisUser&&e.subscription&&(0,i.jsx)(s.A,{className:"user-name-tag-video-tile-container",sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"end",left:0,p:!t&&d.HN?.5:t?2:1,position:"absolute",top:0,width:"100%"},children:(0,i.jsx)(x.Ay,{compactUi:d.HN,isLocal:e.isLocal,subscriptionForCurrentTile:e.subscription,thisUser:e.thisUser})})]})})})},19373:(e,t,n)=>{n.d(t,{_:()=>t6,A:()=>ne});var i=n(95155),r=n(16405),o=n(12115),s=n(46671),a=n.n(s),l=n(74879),c=n(23971),d=n(18932),u=n(54884);let p={select:["key","label","layout","groups"],text:["key","label","textPlaceholder","textValidationRegex","textMaxLength"],"multi-select":["key","label","groups","selectionQuestion","selectionObject","selectionObject_plural","minSelections","maxSelections"]},h=e=>{if(!Object.hasOwn(p,e.mode))return{validations:["DemographicInputType mode not recognised: ".concat(e.mode)],requiredFields:[]};let t=p[e.mode],n=[];for(let i of t)(0,u.s)(e[i])||n.push("".concat(e.mode," required field invalid: ").concat(i));return{validations:!(n.length>0)||n,requiredFields:t}},g={gbr:{key:"postcode",label:"Postcode (first half)",mode:"text",layout:"column",textPlaceholder:"What is the first half of your postcode?",textValidationRegex:"^[a-zA-Z]{1,2}[0-9][0-9a-zA-Z]?$",textCapitalisation:!0,textValidationMessage:"Please enter a valid UK postcode",groups:[],textMaxLength:15}},m={key:"gender",label:"Gender",mode:"select",layout:"column",groups:[{label:"Gender",choices:[{display:"Female",key:"f"},{display:"Male",key:"m"},{display:"Non-binary",key:"nb"},{display:"I would rather not say",key:"prefer-not-to-say"}]}]},x={key:"age",label:"Age range",mode:"select",layout:"grid",layoutProps:{columns:2},groups:[{label:"Age",choices:[{display:"14 - 17",key:"14-17"},{display:"18 - 25",key:"18-25"},{display:"26 - 35",key:"26-35"},{display:"36 - 45",key:"36-45"},{display:"46 - 55",key:"46-55"},{display:"56 - 65",key:"56-65"},{display:"66 - 75",key:"66-75"},{display:"76+",key:"76+"},{display:"I would rather not say",key:"prefer-not-to-say"}]}]},f={key:"ethnicity",label:"Ethnicity",mode:"select",layout:"row",groups:[{label:"Asian or Asian British",choices:[{display:"Indian",key:"Indian"},{display:"Pakistani",key:"Pakistani"},{display:"Bangladeshi",key:"Bangladeshi"},{display:"Chinese",key:"Chinese"},{display:"Any other Asian background",key:"Any other Asian background"}]},{label:"Black, Black British, Caribbean or African",choices:[{display:"Caribbean",key:"Caribbean"},{display:"African",key:"African"},{display:"Any other Black, Black British, or Caribbean background",key:"Any other Black, Black British, or Caribbean background"}]},{label:"Mixed or multiple ethnic groups",choices:[{display:"White and Black Caribbean",key:"White and Black Caribbean"},{display:"White and Black African",key:"White and Black African"},{display:"White and Asian",key:"White and Asian"},{display:"Any other Mixed or multiple ethnic background",key:"Any other Mixed or multiple ethnic background"}]},{label:"White",choices:[{display:"English, Welsh, Scottish, Northern Irish or British",key:"English, Welsh, Scottish, Northern Irish or British"},{display:"Irish",key:"Irish"},{display:"Gypsy or Irish Traveller",key:"Gypsy or Irish Traveller"},{display:"Roma",key:"Roma"},{display:"Any other White background",key:"Any other White background"}]},{label:"Other ethnic group",choices:[{display:"Arab",key:"Arab"},{display:"Any other ethnic group",key:"Any other ethnic group"}]},{label:"Unavailable",choices:[{display:"I would rather not say",key:"prefer-not-to-say"}]}]};var y=n(62652),b=n(73017),v=n(84073),w=n(80357),j=n(27855),A=n(74434);function k(e){var t;let n=(0,o.useContext)(v.yk),{answers:r}=(0,b.Ay)(e.qids.qid),[s,a]=(0,o.useState)((0,b.fV)(r,e.qids,null==(t=e.question)?void 0:t.pii)),[l,c]=(0,o.useState)(s),[u,p]=(0,o.useState)(n.role!==d.sW.Controller),[h,g]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{c(s)},[s]),(0,i.jsxs)(i.Fragment,{children:[e.question&&(0,i.jsx)(A.A,{content:e.question}),(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",gap:1,justifyContent:e.align},children:e.options.map((t,n)=>{var r;return(0,i.jsx)(j.A,{variant:(null!=(r=t.variant)?r:0===n)?"contained":"outlined",color:t.colour,onClick:()=>(t=>{if(!u)return;g(!0);let n={...l,jsonValue:{answers:[{key:t,booleanValue:!0}]}};e.onAnswer(n).then(e=>{if(e)a(e);else throw"No response from submission"}).catch(e=>{console.error(e)}).finally(()=>{g(!1)})})(t.key),disabled:!u||h,children:t.text},"ack-".concat(e.qids.qid,"-option-").concat(t.key))})})]})}var S=n(25789),C=n(66088),I=n(80317),D=n(90073),E=n(68307);function T(e){let t=e.layoutParams.length>0?parseInt(e.layoutParams[0]):6,n=(0,S.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(D.A,{sx:{width:"100%",height:"100%",className:"stretch",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,i.jsx)(D.A,{sx:{mb:4,mx:8},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsx)(C.A,{container:!0,spacing:1,children:e.displayOptions.map((r,o)=>{let s=e.currentlySelectedKeys.find(e=>e===r.key);return(0,i.jsx)(C.A,{size:{xs:t},display:"flex",flexDirection:"column",alignContent:"stretch",children:(0,i.jsx)(j.A,{"aria-label":r.ariaLabel,variant:"contained",style:{display:"flex",flexDirection:"column",justifyContent:"center",border:"solid 4px",background:s?n.palette.optionButtonSelected.main:n.palette.optionButtonUnselected.main,borderColor:s?n.palette.optionButtonSelectedBorder.main:"transparent",color:"black"},onClick:()=>e.onSelectionClick(r.key),children:(0,i.jsx)(I.A,{variant:"submitButton",sx:{fontSize:r.fontSize,textWrap:"balance"},children:r.title})})},"answer-".concat(e.qid,"-").concat(r.key))})}),e.showSubmit&&(0,i.jsx)(D.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",sx:{mt:4},children:(0,i.jsx)(E.A,{busy:e.busy,inline:!1,enabled:e.enableSubmit,onSubmit:e.onSubmit})})]})})}function q(e){let t=(0,S.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(D.A,{sx:{width:"100%",height:"100%",className:"stretch",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(D.A,{sx:{mb:4,mx:8},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsx)(D.A,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",gap:1},children:e.displayOptions.map((n,r)=>{let o=e.currentlySelectedKeys.find(e=>e===n.key);return(0,i.jsx)(j.A,{"aria-label":n.ariaLabel,variant:"contained",style:{display:"flex",flexDirection:"column",justifyContent:"center",border:"solid 4px",background:o?t.palette.optionButtonSelected.main:t.palette.optionButtonUnselected.main,borderColor:o?t.palette.optionButtonSelectedBorder.main:"transparent",color:"black"},onClick:()=>e.onSelectionClick(n.key),children:(0,i.jsx)(I.A,{variant:"submitButton",sx:{fontSize:n.fontSize,textWrap:"balance"},children:n.title})},"answer-".concat(e.qid,"-").concat(n.key))})}),e.showSubmit&&(0,i.jsx)(D.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",sx:{mt:4},children:(0,i.jsx)(E.A,{busy:e.busy,inline:!1,enabled:e.enableSubmit,onSubmit:e.onSubmit})})]})})}function P(e){let t=(0,S.A)(),n=90-90/e.sourceOptions.filter(e=>!e.isAlt).length;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{sx:{width:"100%",height:"100%",className:"stretch",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,i.jsx)(w.A,{sx:{mb:4,mx:8},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsx)(w.A,{display:"flex",flexDirection:"row",justifyContent:"center",sx:{gap:1,width:"".concat(n,"%")},children:e.displayOptions.filter(e=>!e.isAlt).map((n,r)=>{let o=e.currentlySelectedKeys.find(e=>e===n.key);return(0,i.jsxs)(w.A,{"aria-label":n.ariaLabel,sx:{borderRadius:4,px:1,flexGrow:1,flexBasis:0},style:{minHeight:200,border:"solid 4px",background:o?t.palette.optionButtonSelected.main:t.palette.optionButtonUnselected.main,borderColor:o?t.palette.optionButtonSelectedBorder.main:"transparent",cursor:"pointer"},display:"flex",flexDirection:"column",justifyContent:"center",onClick:()=>e.onSelectionClick(n.key),children:[!!n.graphic&&(0,i.jsx)("img",{src:n.graphic,style:{alignSelf:"center",width:"40%"},alt:"".concat(n.title)}),(0,i.jsx)(I.A,{variant:"yesNoUnsureButton",sx:{fontSize:n.fontSize,textWrap:"balance"},children:n.title})]},"option-".concat(n.key,"-").concat(e.qid))})}),(0,i.jsx)(w.A,{display:"flex",flexDirection:"column",alignItems:"center",sx:{mt:2},children:e.sourceOptions.filter(e=>e.isAlt).map((n,r)=>{let o=e.currentlySelectedKeys.find(e=>e===n.key);return(0,i.jsx)(w.A,{sx:{p:2,borderRadius:4},style:{background:o?t.palette.optionButtonSelected.main:"transparent",border:"solid 4px transparent",borderColor:o?t.palette.optionButtonSelectedBorder.main:"transparent",cursor:"pointer"},onClick:()=>e.onSelectionClick(n.key),display:"flex",flexDirection:"column",justifyContent:"center",children:(0,i.jsx)(I.A,{variant:"yesNoUnsureButton",style:{borderBottom:"solid 1px black",textWrap:"balance"},children:n.title})},"option-".concat(n.key,"-").concat(e.qid))})}),e.showSubmit&&(0,i.jsx)(w.A,{display:"flex",flexDirection:"row",justifyContent:"center",sx:{mt:4},children:(0,i.jsx)(E.A,{busy:e.busy,inline:!1,enabled:e.enableSubmit,onSubmit:e.onSubmit})})]})})}function R(e){var t;let n=1===e.maxSelections,[r,s]=(0,o.useState)(e.shuffle?[...e.options].sort(()=>Math.random()-.5):e.options),{answers:a}=(0,b.Ay)(e.qids.qid),[l,c]=(0,o.useState)((0,b.fV)(a,e.qids,null==(t=e.question)?void 0:t.pii)),[u,p]=(0,o.useState)([]);(0,o.useEffect)(()=>{var t,n;let i;p((i=null!=(n=null==(t=l.jsonValue)?void 0:t.answers.filter(e=>!0===e.booleanValue).map(e=>e.key))?n:[],e.options.filter(e=>!!i.find(t=>t===e.key))))},[l]);let[h,g]=(0,o.useState)(!1),m=e.role===d.sW.Client,x=()=>u.length>=e.minSelections&&u.length<=e.maxSelections,f=async()=>{if(x())try{g(!0);var t={...l,jsonValue:{answers:u.map(t=>({key:t.key,booleanValue:!0,numericValue:1,index:e.options.findIndex(e=>e.key===t.key)}))}},n=await e.onAnswer(t);if(console.debug("Answer submitted ".concat(n?"ok":"error")),console.debug("Received answer response",n),n)c(n);else throw"No response received"}catch(e){console.error("Error submitting answer",e)}finally{g(!1)}},y=t=>{console.debug("ClosedChoiceInput: Option clicked, key: "+t);let i=e.options.find(e=>e.key===t);if(void 0!==i)if(u.find(e=>e.key===t))p(u.filter(e=>e.key!==t));else if(i.exclusive)p([i]);else if(u.length>=e.maxSelections){if(n){let e=u.find(e=>e.key!==t);p([...u.filter(t=>t!==e).filter(e=>!e.exclusive),i])}}else p([...u.filter(e=>!e.exclusive),i]);else console.warn("ClosedChoiceInput: Option key ".concat(t," not found."))},v=()=>({onSubmit:f,onSelectionClick:y,qid:e.qids.qid,question:e.question,sourceOptions:e.options,displayOptions:r,busy:h,showSubmit:m,enableSubmit:x(),minSelections:e.minSelections,maxSelections:e.maxSelections,currentlySelectedKeys:u.map(e=>e.key),layoutParams:e.layoutParams}),[j,A]=(0,o.useState)(v());return(0,o.useEffect)(()=>{A(v())},[h,u]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:(0,i.jsxs)(w.A,{sx:{flexGrow:1,display:"block"},children:["yes-no-unsure"===e.layout&&(0,i.jsx)(P,{...j}),"button-grid"===e.layout&&(0,i.jsx)(T,{...j}),"buttons-inline"===e.layout&&(0,i.jsx)(q,{...j})]})})})}var F=n(41477),_=n(13664),W=n(78095);function B(e){return(0,i.jsxs)(w.A,{sx:{width:"100%",height:"100%",className:"stretch",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,i.jsx)(w.A,{sx:{display:"block",flexGrow:1,overflowY:"auto",overflowX:"hidden"},children:e.children}),(e.startBar||e.endBar)&&(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pt:1},children:[(0,i.jsx)(w.A,{children:e.startBar}),e.endBar&&(0,i.jsx)(w.A,{children:e.endBar})]})]})}var N=n(31240);function U(e){var t;let n=(0,o.useContext)(v.yk),{answers:r}=(0,b.Ay)(e.qids.qid),[s,a]=(0,o.useState)((0,b.fV)(r,e.qids,null==(t=e.question)?void 0:t.pii)),[l,c]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1);(0,o.useEffect)(()=>{var e,t,n;c(null!=(n=null==(t=s.jsonValue)||null==(e=t.answers.find(e=>"consent"===e.key))?void 0:e.booleanValue)&&n)},[s]),(0,o.useEffect)(()=>{p(l&&n.role===d.sW.Client)},[l]);let m=t=>{if(!u)return void console.warn("Only participants can submit answers");g(!0);let n={...s,jsonValue:{answers:[{key:"consent",booleanValue:l},{key:"consentText",stringValue:e.consentText}]}};e.onAnswer(n).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),null!==e)a(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{g(!1)})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(B,{startBar:(0,i.jsx)(()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(F.A,{control:(0,i.jsx)(_.A,{checked:l,onChange:(e,t)=>c(t)}),label:(0,i.jsx)("span",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:e.consentText})})}),{}),endBar:(0,i.jsx)(()=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(N.A,{btnKey:"submit",btnText:(0,i.jsx)(y.A,{i18nKey:"button.submit"}),onClick:m,disabled:!u,busy:h})}),{}),children:[e.question&&(0,i.jsx)(A.A,{content:e.question,forceAlign:"left",sx:{fontWeight:"bold"}}),e.content.map((t,n)=>(0,i.jsx)(I.A,{variant:"consentBody",align:"left",dangerouslySetInnerHTML:{__html:(0,W.A)(t)}},"".concat(e.qids.qid,"-consent-body-").concat(n)))]})})}var V=n(86596),O=n(35057),L=n(50355),M=n(51404),z=n(21844),K=n(23405),H=n(34804);let G={objects:0,selectedKeys:[]};function J(e){let t,n=e.demographic.groups.length>1,r=()=>{var t;return null!=(t=e.skipOption)?t:{key:"prefer-not-to-say",display:"I would rather not say"}},[s,a]=(0,o.useState)((t=e.currentSelection,(0,u.s)(t)&&t.key!==r().key?(e=>{let t=e.key.split(",").map(e=>e.trim()),n=t.filter(e=>e.length>0).length;return{objects:n,selectedKeys:n>0?t:[]}})(t):G)),[l,c]=(0,o.useState)(!1),[d,p]=(0,o.useState)([]),[h,g]=(0,o.useState)(!1);(0,o.useEffect)(()=>{c(s.selectedKeys.every(e=>(0,u.s)(e))),p(s.selectedKeys.map(e=>(0,u.s)(e)&&"empty"!==e))},[s]);let m=t=>{switch(t){case"add":s.objects<e.demographic.maxSelections&&a({...s,objects:s.objects+1,selectedKeys:[...s.selectedKeys,void 0]});break;case"remove":s.objects>e.demographic.minSelections&&a({...s,objects:s.objects-1,selectedKeys:s.selectedKeys.slice(0,s.objects-1)})}},x=(0,S.A)();return(0,i.jsx)(B,{endBar:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",gap:1},children:[e.skipPermitted&&(0,i.jsx)(N.A,{btnKey:"skip",btnText:(0,i.jsx)(y.A,{i18nKey:"demographic.input.ratherNotSay"}),variant:"outlined",onClick:t=>{e.onSelection(r())}}),(0,i.jsx)(N.A,{btnKey:"submit",btnText:(0,i.jsx)(y.A,{i18nKey:"demographic.input.submit"}),variant:"contained",onClick:t=>{var n,i;l?e.onSelection((n=s,i=e.demographic,{key:n.selectedKeys.join(","),display:n.selectedKeys.map(e=>i.groups.map(t=>t.choices.filter(t=>t.key===e).map(e=>e.display)).flat()).flat().join(", ")})):g(!0)}})]}),children:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,i.jsx)(j.A,{color:"buttonStandard",variant:"text",onClick:()=>e.onBack(),children:(0,i.jsx)("img",{src:"/icons/arrow-left.svg",alt:"Back"})}),(0,i.jsx)(I.A,{variant:"slideSubHeading",align:"left",children:e.demographic.selectionQuestion})]}),(0,i.jsxs)(C.A,{container:!0,spacing:1,children:[(0,i.jsx)(C.A,{size:{xs:1},sx:{display:"flex",flexDirection:"row"},children:(0,i.jsx)(N.A,{btnKey:"remove",content:(0,i.jsx)(O.A,{}),btnText:"",variant:"outlined",onClick:e=>{m(e)},disabled:s.objects<=e.demographic.minSelections,sx:{flexGrow:.3}})}),(0,i.jsx)(C.A,{size:{xs:10},sx:{display:"flex",flexDirection:"row"},children:(0,i.jsx)(L.A,{label:e.demographic.selectionObject_plural,variant:"outlined",value:"".concat(s.objects),disabled:!0,autoComplete:"off",color:"buttonStandard",InputProps:{sx:{background:"white",fontSize:"2rem"}},sx:{flexGrow:1},InputLabelProps:{sx:{fontSize:"2rem","&.MuiOutlinedInput-notchedOutline":{fontSize:"2rem"}}}})}),(0,i.jsx)(C.A,{size:{xs:1},sx:{display:"flex",flexDirection:"row"},children:(0,i.jsx)(N.A,{btnKey:"add",content:(0,i.jsx)(V.A,{}),btnText:"",variant:"contained",onClick:e=>{m(e)},disabled:s.objects>=e.demographic.maxSelections,sx:{flexGrow:.5}})})]}),(0,i.jsx)(C.A,{container:!0,rowGap:1,children:Array.from(Array(s.objects).keys()).map(t=>{var r;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.A,{size:{xs:2},sx:{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"center"},children:(0,i.jsxs)(I.A,{variant:"slideBody",align:"left",children:[e.demographic.selectionObject," ",t+1]})},"demographic-multi-select-for-".concat(e.demographic.key,"-").concat(t,"-label")),(0,i.jsx)(C.A,{size:{xs:10},children:(0,i.jsxs)(M.A,{value:null!=(r=s.selectedKeys[t])?r:"empty",fullWidth:!0,error:h&&!d[t],input:(0,i.jsx)(z.A,{sx:{fontSize:"2rem",color:"black",textAlign:"start"}}),onChange:(e,n)=>{var i;i=e.target.value,a({...s,selectedKeys:s.selectedKeys.map((e,n)=>n===t?"empty"!==i?i:void 0:e)})},children:[(0,i.jsxs)(K.A,{value:"empty",children:[(0,u.s)(e.demographic.selectionItemPrompt)&&(0,i.jsx)(i.Fragment,{children:e.demographic.selectionItemPrompt}),!(0,u.s)(e.demographic.selectionItemPrompt)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(y.A,{i18nKey:"demographic.multi-select.default-selection-item-prompt"})})]},"demographic-multi-select-for-".concat(e.demographic.key,"-index-").concat(t,"-empty")),e.demographic.groups.map((r,o)=>[n?(0,i.jsx)(H.A,{sx:{p:1,borderBottom:"1px solid ".concat(x.palette.divider)},children:(0,i.jsx)(i.Fragment,{children:r.label})}):void 0,...r.choices.map((r,s)=>(0,i.jsx)(K.A,{value:r.key,sx:{p:1,pl:n?2:void 0},children:(0,i.jsx)(i.Fragment,{children:r.display})},"demographic-multi-select-for-".concat(e.demographic.key,"-index-").concat(t,"-group-").concat(o,"-choice-").concat(s)))])]})},"demographic-multi-select-for-".concat(e.demographic.key,"-").concat(t,"-select"))]})})})]})})}function Z(e){let t=e.demographic.groups.length>1;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,i.jsx)(j.A,{color:"buttonStandard",variant:"text",onClick:()=>e.onBack(),children:(0,i.jsx)("img",{src:"/icons/arrow-left.svg",alt:"Back"})}),(0,i.jsx)(I.A,{variant:"slideSubHeading",align:"left",children:e.demographic.label})]}),e.demographic.prompt&&(0,i.jsx)(I.A,{align:"left",component:"p",sx:{mt:"0 !important",textWrap:"balance"},variant:"demographicInputTypeHeading",children:e.demographic.prompt}),(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",gap:4,mb:4},children:e.demographic.groups.map(n=>(0,i.jsxs)(w.A,{display:"flex",flexDirection:"column",alignContent:"start",children:[t&&(0,i.jsx)(I.A,{variant:"demographicGroupHeading",align:"left",sx:{mb:.8},children:n.label}),("row"===e.layout||"column"===e.layout)&&(0,i.jsx)(w.A,{display:"flex",flexDirection:e.layout,gap:1,flexWrap:"row"===e.layout?"wrap":void 0,alignItems:"column"===e.layout?"start":void 0,children:n.choices.map(t=>{var r;return(0,i.jsx)(j.A,{variant:"contained",color:(null==(r=e.currentSelection)?void 0:r.key)===t.key?"buttonStandard":"buttonQuiet",onClick:()=>{e.onSelection(t)},children:(0,i.jsx)(I.A,{variant:"submitButton",children:t.display})},"".concat(e.demographic.label,"-section-").concat(n.label,"-value-").concat(t.key))})}),"grid"===e.layout&&(0,i.jsx)(C.A,{container:!0,sx:{width:e.layoutProps.columns<3?"66%":"100%"},rowGap:1,children:n.choices.map(t=>{var r;return(0,i.jsx)(C.A,{size:{xs:12/e.layoutProps.columns},sx:{px:1},children:(0,i.jsx)(j.A,{variant:"contained",fullWidth:!0,color:(null==(r=e.currentSelection)?void 0:r.key)===t.key?"buttonStandard":"buttonQuiet",onClick:()=>{e.onSelection(t)},children:(0,i.jsx)(I.A,{variant:"submitButton",sx:{py:1},children:t.display})})},"".concat(e.demographic.label,"-section-").concat(n.label,"-value-").concat(t.key))})})]},"".concat(e.demographic.label,"-section-").concat(n.label)))})]})}var $=n(24274);function Q(e){var t,n,r;let{t:s}=(0,$.Bd)(),a=()=>{var t;return null!=(t=e.skipOption)?t:{key:"prefer-not-to-say",display:s("demographic.input.ratherNotSay")}},[l,c]=(0,o.useState)((null==(t=e.currentSelection)?void 0:t.key)!==a().key&&null!=(r=null==(n=e.currentSelection)?void 0:n.display)?r:""),[d,u]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!1),b=t=>{var n,i;return(f(!0),e.demographic.textMaxLength&&t.length>e.demographic.textMaxLength)?(u(null!=(n=e.demographic.textValidationMessage)?n:"Maximum length: ".concat(e.demographic.textMaxLength," characters")),h(!0),m(!1),!1):e.demographic.textValidationRegex&&!new RegExp(e.demographic.textValidationRegex).test(t)?(c(t),u(null!=(i=e.demographic.textValidationMessage)?i:"Please enter a valid value for ".concat(e.demographic.label,".")),h(!0),m(!1),!1):(c(t),u(""),h(!1),m(!0),!0)};return(0,o.useEffect)(()=>{x&&m(!p)},[x,p]),(0,i.jsx)(B,{endBar:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",gap:1},children:[e.skipPermitted&&(0,i.jsx)(N.A,{btnKey:"skip",btnText:(0,i.jsx)(y.A,{i18nKey:"demographic.input.ratherNotSay"}),variant:"outlined",onClick:t=>{e.onSelection(a())}}),(0,i.jsx)(N.A,{btnKey:"submit",btnText:(0,i.jsx)(y.A,{i18nKey:"demographic.input.submit"}),variant:"contained",disabled:!g,onClick:t=>{b(l)&&e.onSelection({key:l,display:l})}})]}),children:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,i.jsx)(j.A,{color:"buttonStandard",variant:"text",onClick:()=>e.onBack(),children:(0,i.jsx)("img",{src:"/icons/arrow-left.svg",alt:"Back"})}),(0,i.jsx)(I.A,{variant:"slideSubHeading",align:"left",children:e.demographic.label})]}),(0,i.jsx)(L.A,{label:e.demographic.textPlaceholder,variant:"outlined",defaultValue:l,onChange:e=>{let t=e.target.value.trim();x?b(t):c(t)},helperText:d,error:p,autoComplete:"off",color:"buttonStandard",inputProps:{style:{textTransform:e.demographic.textCapitalisation?"uppercase":void 0}},InputProps:{sx:{background:"white",fontSize:"2rem"}},InputLabelProps:{sx:{fontSize:"2rem","&.MuiOutlinedInput-notchedOutline":{fontSize:"2rem"}}}})]})})}function Y(e){var t,n,r,s;let l,{answers:c}=(0,b.Ay)(e.qids.qid),[p,h]=(0,o.useState)((0,b.fV)(c,e.qids,null==(t=e.question)?void 0:t.pii)),[v,k]=(0,o.useState)(!1),[S,C]=(0,o.useState)(!1),[D,E]=(0,o.useState)((l=[],(null==(n=e.showGender)||n)&&l.push(m),(null==(r=e.showAge)||r)&&l.push(x),(null==(s=e.showEthnicity)||s)&&l.push(f),void 0!==e.showPostcode&&l.push(g[e.showPostcode]),[...l,...e.customDemographics])),[T,q]=(0,o.useState)(),[P,R]=(0,o.useState)({});(0,o.useEffect)(()=>{let e={};(null==p?void 0:p.jsonValue)&&p.jsonValue.answers.forEach(t=>{e[t.key]={key:t.optionKey,display:t.stringValue}}),R(e)},[p]),(0,o.useEffect)(()=>{let t=a().every(D,e=>P.hasOwnProperty(e.key));C(e.role===d.sW.Client&&t)},[P]);let F=async()=>{if(e.role!==d.sW.Client)console.warn("Only participants can submit answers");else{let t={...p,jsonValue:{answers:Object.entries(P).map(e=>({key:e[0],optionKey:e[1].key,stringValue:e[1].display}))}};k(!0),e.onAnswer(t).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),e)h(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{k(!1)})}},_=!1===e.opaqueInputBox?void 0:{background:"white"},W=e=>{var t;return(0,i.jsx)(j.A,{color:"buttonStandard",variant:"outlined",sx:{alignSelf:"stretch",py:0,...e.inputBoxSx},onClick:()=>e.onClick(),children:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",flexGrow:1,justifyContent:"space-between"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:0},children:[void 0!==e.display&&(0,i.jsx)(I.A,{variant:"selectTiny",children:e.label}),(0,i.jsx)(I.A,{variant:"selectLarge",component:"div",children:null!=(t=e.display)?t:e.label})]}),(0,i.jsx)("img",{src:"/icons/select-down.svg"})]})})};return(0,i.jsxs)(i.Fragment,{children:[!(0,u.s)(T)&&(0,i.jsx)(B,{endBar:(0,i.jsx)(N.A,{btnKey:"submit",btnText:(0,i.jsx)(y.A,{i18nKey:"button.submit"}),onClick:()=>{F()},disabled:!S,busy:v}),children:(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(w.A,{sx:{mb:4,mx:8},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),D.map(e=>(0,i.jsx)(W,{label:e.label,display:P.hasOwnProperty(e.key)?P[e.key].display:void 0,onClick:()=>{q(e)},inputBoxSx:_},"overview-demographic-".concat(e.key)))]})}),(0,u.s)(T)&&(0,i.jsxs)(i.Fragment,{children:["select"===T.mode&&(0,i.jsx)(Z,{demographic:T,currentSelection:P[T.key],onBack:()=>{q(void 0)},onSelection:e=>{R({...P,[T.key]:e}),q(void 0)},layout:T.layout,layoutProps:T.layoutProps}),"text"===T.mode&&(0,i.jsx)(Q,{demographic:T,skipPermitted:!0,currentSelection:P[T.key],onBack:()=>{q(void 0)},onSelection:e=>{R({...P,[T.key]:e}),q(void 0)}}),"multi-select"===T.mode&&(0,i.jsx)(J,{demographic:T,skipPermitted:!0,currentSelection:P[T.key],onBack:()=>{q(void 0)},onSelection:e=>{R({...P,[T.key]:e}),q(void 0)}})]})]})}var X=n(69999),ee=function(e){return e[e.Input=0]="Input",e[e.Completion=1]="Completion",e}(ee||{});function et(e){let{answers:t}=(0,b.Ay)(e.qids.qid),n=()=>(0,b._i)(t,e.qids),[r,s]=(0,o.useState)(n()),[a,l]=(0,o.useState)(+!!(0,b.Qy)(r));return(0,o.useEffect)(()=>{s(n())},[t]),(0,o.useEffect)(()=>{l(+!!(0,b.Qy)(r))},[r]),(0,o.useEffect)(()=>{X.A.emit({type:X.m.Request_SlideRefresh})},[a]),(0,i.jsxs)(i.Fragment,{children:[0===a&&e.input,1===a&&e.completion]})}var en=n(91028),ei=n(57915);function er(e){let{allAnswers:t}=(0,b.Ay)(),n=()=>{for(let n of e.qids)if(!(0,b.Qy)((0,b._i)(t[n.qid],n)))return e.qids.indexOf(n)},[r,s]=(0,o.useState)(n());(0,o.useEffect)(()=>{let e=n();r!==e&&s(e)},[t]);let l=(0,ei.A)(),c=[.2,.25],[d]=(0,en.Q)({duration:500});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{ref:d,className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",p:2,gap:2,boxSizing:"border-box"},children:[void 0!==r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A.A,{content:e.question}),(0,i.jsx)(w.A,{sx:{flexGrow:1,boxSizing:"border-box",overflowY:"auto",overflowX:"hidden",display:"block"},children:e.inputs[r]},"input-sequence-element-".concat(e.qids[r].qid))]}),void 0===r&&(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"block"},children:e.completion}),void 0!==r&&e.showProgress&&(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:a().range(0,e.inputs.length).map((t,n)=>(0,i.jsx)(w.A,{sx:{background:t===r?l.palette.progressBlipSelected.main:l.palette.progressBlipUnselected.main,width:"".concat(c[+(t===r)],"em"),height:"".concat(c[+(t===r)],"em"),borderRadius:"".concat(c[+(t===r)]/2,"em")}},"sequence-blip-".concat(t,"-").concat(e.qids[t].qid)))})]})})}var eo=n(39846);function es(e){let{answers:t}=(0,b.Ay)(e.qids.qid),n=()=>{var n;return(0,b.fV)(t,e.qids,null==(n=e.question)?void 0:n.pii)},[r,s]=(0,o.useState)(n()),[a,l]=(0,o.useState)(n()),[c,u]=(0,o.useState)(!1),[p,h]=(0,o.useState)(e.role===d.sW.Client),[g,m]=(0,o.useState)({});(0,o.useEffect)(()=>{let t={...g};e.options.forEach(n=>{var i,o,s;t[n.key]=null!=(s=null==(o=r.jsonValue)||null==(i=o.answers.find(e=>e.key===n.key))?void 0:i.numericValue)?s:Math.floor((e.min+e.max)/2)}),m(t),l({...r,jsonValue:{answers:e.options.map(n=>{var i,r;return{key:n.key,numericValue:null!=(i=t[n.key])?i:Math.floor((e.min+e.max)/2),description:n.description,index:null!=(r=t[n.key])?r:Math.floor((e.min+e.max)/2)}})}})},[r]);let x=async()=>{e.role!==d.sW.Controller&&(u(!0),e.onAnswer(a).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),e)s(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{u(!1)}))},f=e.max-e.min,v=f+1,j=Array.from(Array(v).keys()),k=-1!==e.labels.findIndex(t=>t.at===e.max),S=+(0!==e.min);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1,px:e.paddingX||8},children:[(0,i.jsxs)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",gap:1,overflowX:"hidden",overflowY:"auto",justifyContent:"center",px:0},children:[(0,i.jsx)(w.A,{sx:{mb:4},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsxs)(C.A,{container:!0,rowSpacing:e.rowSpacing,sx:{alignItems:"center"},children:[(0,i.jsx)(C.A,{size:{xs:4}}),(0,i.jsx)(C.A,{alignSelf:"flex-end",className:"all-labels-container",size:{xs:!0===k?7:8},sx:{display:"grid",gap:"".concat(16,"px"),gridTemplateColumns:"repeat(".concat(f,", 1fr)")},children:j.map((t,n)=>{if(n+1===v)return null;let r=e.labels.findIndex(e=>e.at===t+S);return -1!==r?(0,i.jsx)(w.A,{className:"label-grid-cell",sx:{alignItems:"end",display:"flex",flexDirection:"row"},children:(0,i.jsx)(I.A,{variant:"body1",component:"div",sx:{fontWeight:"bold",textAlign:"center",transform:"translate(calc(-50% - ".concat(8,"px), 0)"),width:"fit-content"},children:e.labels[r].text})},"".concat(e.qids.qid,"-label-").concat(n,"-at-").concat(e.labels[r].at)):(0,i.jsx)(w.A,{className:"empty-label-placeholder"},"step-".concat(t,"-blank-label"))})}),!0===k&&(0,i.jsx)(C.A,{alignSelf:"flex-end",size:{xs:1},children:(0,i.jsx)(I.A,{variant:"body1",component:"div",sx:{fontWeight:"bold",transform:"translate(-50%, 0)",width:"fit-content"},children:e.labels[e.labels.length-1].text})}),(0,i.jsx)(C.A,{sx:{height:"4px"},size:{xs:12}}),e.options.map((t,n)=>{let r;return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsxs)(C.A,{size:{xs:4},children:[(0,i.jsx)(I.A,{variant:"body1",align:"left",component:"div",sx:{pr:6},children:t.title}),e.showDescriptions&&!1]}),(0,i.jsx)(C.A,{size:{xs:!0===k?7:8},children:(0,i.jsx)(eo.A,{onCommit:n=>{var i,r,o,s;let c;i=t.key,(c=null!=(o=a.jsonValue)?o:{answers:[]}).answers=c.answers.filter(e=>e.key!==i),c.answers.push({key:i,numericValue:n,description:null!=(s=null==(r=e.options.find(e=>e.key===i))?void 0:r.description)?s:"".concat(n),index:n}),l({...a,jsonValue:c})},color:"secondary",sliderDefault:(r=t.key,g.hasOwnProperty(r)?g[r]:Math.floor((e.min+e.max)/2)),marks:!0,min:e.min,max:e.max,step:1,sliderMode:"multi",sx:{mt:1}})}),!0===k&&(0,i.jsx)(C.A,{size:{xs:1}})]},"".concat(e.qids.qid,"-option-").concat(t.key))})]})]}),e.role===d.sW.Client&&(0,i.jsx)(w.A,{children:(0,i.jsx)(E.A,{onSubmit:x,text:(0,i.jsx)(y.A,{i18nKey:"button.submit"}),busy:c,enabled:p,inline:!1,alignment:"right"})})]})})}var ea=n(67230);function el(e){let t=(0,o.useContext)(v.yk),{answers:n}=(0,b.Ay)(e.qids.qid),r=()=>{var t;return(0,b.fV)(n,e.qids,null==(t=e.question)?void 0:t.pii)},[s,l]=(0,o.useState)(r()),[c,u]=(0,o.useState)(r()),[p,h]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),[x,f]=(0,o.useState)(e.points),[j,k]=(0,o.useState)(e.options.map(e=>({min:0,max:e.max}))),[C,D]=(0,o.useState)(e.options.map(()=>0));(0,o.useEffect)(()=>{let n=e.points-a().sum(C);f(n);for(let t=0;t<e.options.length;t++)k(j.map((e,t)=>({min:0,max:C[t]+n})));let i={answers:[]};for(let t=0;t<e.options.length;t++)i.answers.push({key:e.options[t].key,description:e.options[t].title,numericValue:C[t]});u({...c,jsonValue:i}),m(0===n&&t.role!==d.sW.Controller)},[C,e.options,e.points,t.role]);let T=async()=>{h(!0),e.onAnswer(c).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),e)l(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{h(!1)})},q=(0,S.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",gap:1,mb:2},children:e.question&&(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"column",gap:1,flexGrow:1,overflowX:"hidden",overflowY:"auto",px:1},children:e.options.map((e,n)=>{let r,o;return(0,i.jsxs)(w.A,{sx:{background:"#f0f0f0",p:2,borderRadius:4,display:"flex",flexDirection:"row",alignItems:"stretch",gap:2},children:[e.graphic&&(0,i.jsx)(w.A,{sx:{width:"20%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:"url(".concat(e.graphic,")"),borderRadius:2}}),(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:1,width:e.graphic?"80%":"100%"},children:[(0,i.jsx)(I.A,{variant:"pointsAllocationCategoryTitle",align:"left",children:e.title}),(0,i.jsx)(I.A,{variant:"pointsAllocationCategoryDescription",align:"left",children:e.description}),(0,i.jsx)(w.A,{sx:{px:2},children:(0,i.jsx)(eo.A,{onCommit:e=>{D(C.map((t,i)=>i===n?e:t))},color:"secondary",sliderDefault:C[n],marks:(r=e.min,o=e.max,a().range(r,o+1,1).map((e,t)=>({value:e,label:"".concat(e)}))),slots:{markLabel:ea.A},min:e.min,max:e.max,step:1,sliderMode:"multi",acceptableRange:{min:j[n].min,max:j[n].max},disabled:t.role===d.sW.Controller})})]})]},"points-allocation-option-".concat(n))})}),(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"end",gap:1,mx:1},children:[(0,i.jsx)(I.A,{variant:"pointsAllocationCategoryTitle",align:"left",color:q.palette.secondary.main,children:(0,i.jsx)(y.A,{i18nKey:"poll.pointsAllocation.remaining",options:{numberOfPoints:x}})}),(0,i.jsx)(E.A,{enabled:g,inline:!0,busy:p,onSubmit:()=>T()})]})]})})}var ec=n(48266),ed=n(91703);let eu=(e,t,n)=>{if(void 0===e.jsonValue||0===e.jsonValue.answers.length)return ep(t,n);let i=[];return e.jsonValue.answers.forEach(e=>{let n=t.find(t=>t.key===e.key);n&&(i[e.index]=n)}),i},ep=(e,t)=>t?[...e].sort(()=>Math.random()-.5):e.sort((e,t)=>e.startingIndex-t.startingIndex);function eh(e){var t;let n=(0,o.useContext)(v.yk),{answers:r}=(0,b.Ay)(e.qids.qid),[s,a]=(0,o.useState)((0,b.fV)(r,e.qids,null==(t=e.question)?void 0:t.pii)),[l,c]=(0,o.useState)(n.role!==d.sW.Controller),[u,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(ep(e.options,e.shuffle));(0,o.useEffect)(()=>{g(eu(s,e.options,e.shuffle))},[s,e.options,e.shuffle]);let m=async()=>{if(n.role===d.sW.Client&&l){let t;p(!0);let n=(t={answers:[]},h.forEach((e,n)=>{t.answers.push({key:e.key,index:n,numericValue:n,description:e.title})}),{...s,jsonValue:t});e.onAnswer(n).then(t=>{if(console.debug("Answer submitted ".concat(t?"ok":"error")),console.debug("Received answer response",t),null!==t)g(eu(t,e.options,e.shuffle));else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{p(!1)})}else console.warn("Only participants can submit answers")},x=(0,S.A)(),[f]=(0,en.Q)({duration:500});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(B,{endBar:(0,i.jsx)(N.A,{btnKey:"submit",onClick:e=>{m()},disabled:!l,busy:u,variant:"contained",color:"buttonStandard",btnText:(0,i.jsx)(y.A,{i18nKey:"button.submit"})}),children:[e.question&&(0,i.jsx)(w.A,{sx:{mb:2},children:(0,i.jsx)(A.A,{content:e.question})}),(0,i.jsx)(w.A,{ref:f,sx:{display:"flex",flexDirection:"column"},children:h.map((t,n)=>(0,i.jsxs)(w.A,{sx:{border:"solid 1px black",borderRadius:2,p:1.5,display:"flex",flexDirection:"row",gap:1,alignContent:"center",alignItems:"center",background:"white",mb:1,boxSizing:"border-box"},children:[(0,i.jsxs)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pr:2},children:[t.title&&(0,i.jsx)(I.A,{variant:"rankedListItemTitle",align:"left",children:t.title}),t.description&&(0,i.jsx)(I.A,{variant:"rankedListItemDescription",align:"left",children:t.description})]}),(0,i.jsx)(w.A,{onClick:()=>{let e=h.findIndex(e=>e.key===t.key);if(e>0){let n=[...h];n.splice(e,1),n.splice(e-1,0,t),g(n)}},sx:{display:"flex",flexDirection:"column",background:x.palette.updinkBackground.main,color:x.palette.updinkText.main,p:.5,borderRadius:2,cursor:0===n?void 0:"pointer",opacity:+(0!==n)},children:(0,i.jsx)(ed.A,{sx:{fontSize:"2rem"}})}),(0,i.jsx)(w.A,{onClick:()=>{let e=h.findIndex(e=>e.key===t.key);if(e<h.length-1){let n=[...h];n.splice(e,1),n.splice(e+1,0,t),g(n)}},sx:{display:"flex",flexDirection:"column",background:x.palette.downdinkBackground.main,color:x.palette.downdinkText.main,p:.5,borderRadius:2,cursor:n===h.length-1?void 0:"pointer",opacity:+(n!==h.length-1)},children:(0,i.jsx)(ec.A,{sx:{fontSize:"2rem"}})})]},"ranked-list-".concat(e.qids.qid,"-option-").concat(t.key)))})]})})}var eg=n(91396),em=n(63608),ex=n(86004),ef=n(61451);function ey(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"column",gap:2,...e.sx},children:e.children})})}function eb(e){let{sx:t,children:n}=e;return(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",...t},children:(0,i.jsx)(w.A,{alignSelf:"center",display:"inline-block",textAlign:"center",children:n})})}function ev(e){let{sx:t,children:n}=e;return(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden",display:"block",...t},children:n})}var ew=n(46429);function ej(e){var t;let{ref:n,inView:r}=(0,ew.Wx)({threshold:0}),s=(0,o.useRef)(null),a=null==(t=e.shadow)||t;(0,o.useEffect)(()=>{if(r)(0,u.s)(s.current)&&(s.current.complete?l():s.current.addEventListener("load",l));else{var e;null==(e=s.current)||e.removeEventListener("load",l)}},[r,s]);let l=(0,o.useCallback)(()=>{X.A.emit({type:X.m.Request_SlideRefresh})},[e.src]);return(0,i.jsx)(D.A,{ref:n,sx:{width:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"},children:(0,i.jsx)("img",{ref:s,className:a?"shadow":"",alt:e.alt,style:{objectFit:"contain",marginLeft:"auto",marginRight:"auto",borderRadius:"0.5rem",...e.style},src:e.src})})}function eA(e){let[t,n]=(0,o.useState)(e.sideSx),[r,s]=(0,o.useState)(e.mainSx);return(0,o.useEffect)(()=>{void 0!==e.sideBackgroundImage&&n({backgroundImage:"url(".concat(e.sideBackgroundImage,")"),...e.sideSx}),void 0!==e.mainBackgroundImage&&s({backgroundImage:"url(".concat(e.mainBackgroundImage,")"),...e.mainSx})},[e.sideBackgroundImage,e.mainBackgroundImage,e.sideSx,e.mainSx]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"row"},children:[(0,i.jsx)(w.A,{sx:{width:"35%",display:"block",...e.sideSx},children:e.side}),(0,i.jsx)(w.A,{sx:{px:2,alignSelf:"stretch",display:"block",overflowY:"auto",width:"60%",...e.mainSx},children:e.main})]})})}function ek(e){let t={backgroundImage:"url('".concat(e.src,"')")};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"block",...t,...e.sx},children:e.children})})}function eS(e){let t={...{textWrap:"balance"},...e.sx,color:e.color};return(0,i.jsx)(I.A,{variant:e.variant,component:"div",sx:t,align:e.align,children:e.children})}function eC(e){let t=(0,S.A)(),n=void 0===e.chartBackground||e.chartBackground;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1,overflowY:"hidden"},children:[e.title&&(0,i.jsx)(eS,{color:e.color,variant:"summaryTitle",sx:{p:0,px:1,textWrap:"balance"},align:"left",children:e.title}),e.prompt&&(0,i.jsx)(eS,{color:e.color,variant:"summaryPrompt",sx:{p:0,px:1,textWrap:"balance"},align:"left",children:e.prompt}),(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"row",gap:1,alignItems:"stretch",overflowY:"hidden"},children:e.children.map((e,r)=>(0,i.jsx)(w.A,{sx:{background:n?t.palette.summaryChartBackground.main:void 0,borderRadius:n?4:void 0,flexGrow:1,flexBasis:0,p:2,display:"block",overflow:"auto"},children:e},"summary-slide-child-".concat(r)))})]})})}function eI(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("img",{src:e.src,style:e.style,alt:e.alt})})}function eD(e){var t;let{content:n,sx:r}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",...r},children:[(0,i.jsx)(I.A,{variant:"slideHeading",children:null!=(t=n.message)?t:"Thanks!"}),n.factoid&&(0,i.jsx)(I.A,{variant:"slideBody",sx:{mt:8},children:n.factoid})]})})}var eE=n(67370);let eT=e=>{let t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,255&t]},eq=(e,t,n,i)=>{let r=eT(n),o=eT(i),s=Math.round(r[0]+(o[0]-r[0])*e/t),a=Math.round(r[1]+(o[1]-r[1])*e/t),l=Math.round(r[2]+(o[2]-r[2])*e/t);return"rgb(".concat(s,",").concat(a,",").concat(l,")")};function eP(e){let{answers:t}=(0,b.Ay)(e.qids.qid),[n,r]=(0,o.useState)([]),[s,a]=(0,o.useState)([]),[l,c]=(0,o.useState)([]),d=(0,S.A)();return(0,o.useEffect)(()=>{r(null!=t?t:[])},[t]),(0,o.useEffect)(()=>{var t;let i;a((t=e.options,Object.entries((i={},n.forEach(e=>{var t;null==(t=e.jsonValue)||t.answers.forEach(e=>{var t;let n=e.key,r=null!=(t=e.numericValue)?t:0;i.hasOwnProperty(n)||(i[n]=0),i[n]+=r})}),i)).map(e=>{var n,i,r;return{key:e[0],title:null!=(r=null==(n=t.find(t=>t.key===e[0]))?void 0:n.title)?r:"",description:null==(i=t.find(t=>t.key===e[0]))?void 0:i.description,value:e[1]}})))},[n,e.options]),(0,o.useEffect)(()=>{var t;let n=d.palette.secondary.main,i=null!=(t=e.mode)?t:"normal",r=s.sort((e,t)=>e.value-t.value);"normal"===i&&(r=r.reverse()),c([...r.map((t,i)=>{var r,o;return{backgroundColor:eq(i,s.length,null!=(r=e.startColour)?r:n,null!=(o=e.endColour)?o:"#FFFFFF"),textColor:"#000000",option:t}})])},[s,e.startColour,e.endColour,d.palette.secondary.main,e.mode]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",flexDirection:"column",display:"flex",gap:1},children:[e.question&&(0,i.jsx)(A.A,{content:e.question}),(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",gap:1,justifyContent:"start"},children:l.map((t,n)=>(0,i.jsx)(w.A,{sx:{backgroundColor:t.backgroundColor,color:t.textColor,borderRadius:2,display:"flex",flexDirection:"column",p:2},children:(0,i.jsxs)(I.A,{variant:"orderedListItemTitle",align:"left",children:[n+1,". ",t.option.title]})},"ordered-display-".concat(e.qids.qid,"-option-").concat(t.option.key,"-").concat(n)))})]})})}function eR(e){let t=(0,S.A)(),n=1===e.headings.filter(e=>e.expanded).length;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e.question&&(0,i.jsx)(A.A,{content:e.question,forceAlign:"left"}),e.headings.map((r,o)=>(0,i.jsxs)(w.A,{sx:{flexGrow:r.expanded?1:void 0,flexBasis:r.expanded?0:void 0,display:"flex",flexDirection:"row",gap:2,p:2,alignItems:"stretch",backgroundColor:t.palette.summaryChartBackground.main,borderRadius:4},children:[r.expanded&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.A,{sx:{display:"inline-block",borderRadius:2,flexGrow:0,flexShrink:0,flexBasis:n?"50%":"20%",backgroundImage:"url(".concat(r.graphic,")"),backgroundSize:"cover",backgroundPosition:"center",mr:2}}),(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"column",gap:2,alignSelf:"center"},children:[(0,i.jsx)(I.A,{variant:"".concat(e.uppercaseTitle?"sectionHeadingTitle":"sectionHeadingTitleNoTransform"),align:"left",children:r.title}),r.description&&(0,i.jsx)(I.A,{variant:"sectionHeadingDescription",align:"left",children:r.description})]})]}),!r.expanded&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(I.A,{variant:"sectionHeadingTitleQuiet",align:"left",children:r.title})})]},"section-heading-".concat(e.uid,"-").concat(o)))]})})}function eF(e){let{answers:t}=(0,b.Ay)(e.qids.qid),n=(0,S.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",overflowX:"hidden",overflowY:"auto"},children:[e.question&&(0,i.jsx)(A.A,{content:e.question}),(0,i.jsx)(w.A,{display:"flex",flexDirection:"column",alignItems:"center",children:t.map((t,r)=>{var o;return(0,i.jsx)(i.Fragment,{children:null==(o=t.jsonValue)?void 0:o.answers.map(t=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{sx:{mb:4,px:2,mx:8},className:"shadow",style:{background:"white",border:"solid 2px",borderColor:r%2==0?n.palette.primary.main:n.palette.secondary.main,borderRadius:12,transform:"rotate(".concat(r%2==0?1.5:-1.5,"deg)")},children:(0,i.jsx)(I.A,{variant:"slideBody",children:t.stringValue})},"speech-bubble-".concat(e.qids.qid,"-").concat(t.key))}))})})})]})})}var e_=n(74084);function eW(e){let{answers:t}=(0,b.Ay)(e.qids.qid),[n,r]=(0,o.useState)([]),[s,a]=(0,o.useState)([]);(0,o.useEffect)(()=>{r(((e,t)=>{if(!e||0===e.length)return[];let n=new Map;return e.forEach(e=>{var t;null==(t=e.jsonValue)||t.answers.forEach(e=>{var t;let i=e.key,r=null!=(t=e.numericValue)?t:0;n.has(i)||n.set(i,0),n.set(i,n.get(i)+r)})}),Array.from(n.entries()).sort((e,t)=>e[1]-t[1]).reverse().slice(0,t).map(e=>({key:e[0],count:e[1]}))})(t,e.displayCount))},[t,e.displayCount]),(0,o.useEffect)(()=>{var t;a((t=e.options,n&&0!==n.length?t&&0!==t.length?n.map(e=>{let i=t.find(t=>t.key===e.key);return i?{key:e.key,title:i.title,description:i.description,graphic:i.graphic,count:e.count}:void console.warn("No description found for option: ".concat(e.key),n,t)}).filter(e=>!!e).map(e=>e):(console.warn("No described options available"),[]):[]))},[n,e.options]);let l=(0,S.A)();return(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[e.question&&(0,i.jsx)(A.A,{content:e.question}),(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"stretch",gap:1},children:s.map((t,n)=>(0,i.jsxs)(w.A,{sx:{flexGrow:1,flexBasis:0,p:2,borderRadius:2,background:l.palette.summaryChartBackground.main,display:"flex",flexDirection:"column",gap:1,mt:2*n},children:[(0,i.jsx)(I.A,{variant:"topOptionsOptionRank",align:"left",children:(0,e_.V)(n+1)}),(0,i.jsxs)(I.A,{variant:"topOptionsOptionPoints",align:"left",children:["Total points: ",t.count]}),(0,i.jsx)(w.A,{sx:{width:"10%",height:0,border:"4px solid black",borderRadius:"4px",mt:1,mb:3}}),(0,i.jsx)(I.A,{variant:"topOptionsOptionTitle",align:"left",children:t.title}),void 0!==t.graphic&&(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"end"},children:(0,i.jsx)(w.A,{sx:{maxHeight:"20vh",height:"20vh",backgroundImage:"url(".concat(t.graphic,")"),backgroundSize:"cover",backgroundPosition:"center",borderRadius:2}})},"".concat(e.qids.qid,"-top-option-").concat(n,"-graphic-").concat(t.key))]},"".concat(e.qids.qid,"-top-option-").concat(n,"-description-").concat(t.key)))})]})}function eB(e){let t=(0,S.A)();return(0,i.jsxs)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsxs)(w.A,{sx:{background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/qmark.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.divisiveDescription})]}),e.mostDivisive.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundDivided.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-divisive-".concat(n,"-qid-").concat(e.qid,"-entry")))]}),(0,i.jsxs)(w.A,{sx:{background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/check.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.supportedDescription})]}),e.mostlySupported.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundAgree.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-supported-".concat(n,"-qid-").concat(e.qid,"-entry")))]}),(0,i.jsxs)(w.A,{sx:{background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/cross.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.opposedDescription})]}),e.mostlyOpposed.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundDisagree.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-disagreed-".concat(n,"-qid-").concat(e.qid,"-entry")))]})]})}function eN(e){let t=(0,S.A)(),n=t.palette.secondary.main;return(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:(0,i.jsx)(w.A,{sx:{background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch",py:2},children:e.ordered.map((t,r)=>(0,i.jsxs)(eS,{variant:"orderedListItemTitle",sx:{background:eq(r,e.ordered.length,n,"#FFFFFF"),borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:[r+1,". ",t.assertion," ",0==r&&"(highest)",r==e.ordered.length-1&&"(lowest)"]},"summary-updown-ordered-".concat(r,"-qid-").concat(t.qid,"-entry")))})})}function eU(e){let t=(0,S.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:(0,i.jsxs)(C.A,{container:!0,flexGrow:1,children:[(0,i.jsx)(C.A,{size:{xs:12},sx:{pb:1},children:(0,i.jsxs)(w.A,{sx:{height:"100%",width:"100%",background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch",overflowX:"hidden",overflowY:"auto"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/qmark.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.divisiveDescription})]}),e.mostDivisive.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundDivided.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-divisive-".concat(n,"-qid-").concat(e.qid,"-entry")))]})}),(0,i.jsx)(C.A,{size:{xs:6},sx:{pr:1},children:(0,i.jsxs)(w.A,{sx:{height:"100%",width:"100%",background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch",overflowX:"hidden",overflowY:"auto"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/check.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.supportedDescription})]}),e.mostlySupported.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundAgree.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-supported-".concat(n,"-qid-").concat(e.qid,"-entry")))]})}),(0,i.jsx)(C.A,{size:{xs:6},sx:{p:0},children:(0,i.jsxs)(w.A,{sx:{height:"100%",width:"100%",background:t.palette.summaryChartBackground.main,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"stretch",overflowX:"hidden",overflowY:"auto"},children:[(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mx:2,gap:1},children:[(0,i.jsx)("img",{src:"/icons/updown/cross.svg",alt:"Disagree icon",style:{width:"auto",height:"2rem"}}),(0,i.jsx)(eS,{variant:"upDownCategory",children:e.opposedDescription})]}),e.mostlyOpposed.map((e,n)=>(0,i.jsx)(eS,{variant:"upDownQuestion",sx:{background:t.palette.backgroundDisagree.main,borderRadius:2,mx:2,p:2,mb:1,textAlign:"start"},children:e.assertion},"summary-updown-opposed-".concat(n,"-qid-").concat(e.qid,"-entry")))]})})]})})})}function eV(e){let{allAnswers:t}=(0,b.Ay)(),[n,r]=(0,o.useState)([]),[s,a]=(0,o.useState)([]),[l,c]=(0,o.useState)([]),[d,u]=(0,o.useState)([]),[p,h]=(0,o.useState)([]);return(0,o.useEffect)(()=>{let n=[],i=[],o=[],s=[],l=[];Object.entries(t).forEach(t=>{let[r,a]=t;if(void 0!==Object.keys(e.questions).find(e=>e===r)){let t=a.filter(e=>{var t,n;return(null==(n=e.jsonValue)||null==(t=n.answers[0])?void 0:t.numericValue)!==void 0&&(0,ex.M9)(e.jsonValue.answers[0].numericValue)===ex.UW.Yes}).length,c=a.filter(e=>{var t,n;return(null==(n=e.jsonValue)||null==(t=n.answers[0])?void 0:t.numericValue)!==void 0&&(0,ex.M9)(e.jsonValue.answers[0].numericValue)===ex.UW.No}).length,d=a.filter(e=>{var t,n;return(null==(n=e.jsonValue)||null==(t=n.answers[0])?void 0:t.numericValue)!==void 0&&(0,ex.M9)(e.jsonValue.answers[0].numericValue)===ex.UW.Unsure}).length,u=e.questions[r].assertion,p={qid:r,assertion:u,yes:t,no:c,unsure:d,score:t-c},h=t+c;h>0?t>=2*h/3?n=[...n,p]:c>=2*h/3?i=[...i,p]:o=[...o,p]:s=[...s,p],l.push(p)}}),l.sort((e,t)=>t.score-e.score),a(n),c(i),r(o),u(s),h(l)},[t,e.questions]),(0,i.jsxs)(i.Fragment,{children:["tshape"===e.layout&&(0,i.jsx)(eU,{mostDivisive:n,mostlySupported:s,mostlyOpposed:l,unanswered:d,ordered:p,divisiveDescription:e.divisiveDescription,supportedDescription:e.supportedDescription,opposedDescription:e.opposedDescription,unansweredDescription:e.unansweredDescription}),"column"===e.layout&&(0,i.jsx)(eB,{mostDivisive:n,mostlySupported:s,mostlyOpposed:l,unanswered:d,ordered:p,divisiveDescription:e.divisiveDescription,supportedDescription:e.supportedDescription,opposedDescription:e.opposedDescription,unansweredDescription:e.unansweredDescription}),"ordered"===e.layout&&(0,i.jsx)(eN,{mostDivisive:n,mostlySupported:s,mostlyOpposed:l,unanswered:d,ordered:p,divisiveDescription:e.divisiveDescription,supportedDescription:e.supportedDescription,opposedDescription:e.opposedDescription,unansweredDescription:e.unansweredDescription})]})}var eO=n(25804),eL=n(76709),eM=n(92747),ez=n(42271),eK=n(5082),eH=n(11107),eG=n(87551),eJ=n(76278);function eZ(e){let t=(0,ei.A)();return(0,i.jsxs)(D.A,{sx:{alignItems:"center",border:"1px solid ".concat(t.palette.rankingBreakdownBoxBorder.main),borderRadius:"5px",display:"flex",flexDirection:"row",gap:"0.15rem",padding:"0 0.2rem",minWidth:"2.75rem"},children:[e.vote===ex.UW.No&&(0,i.jsxs)(i.Fragment,{children:["arrow"===e.style&&(0,i.jsx)(eO.A,{htmlColor:t.palette.rankingBarNegative.main}),"icon"===e.style&&(0,i.jsx)(eM.A,{htmlColor:t.palette.rankingBarNegative.main}),"thumb"===e.style&&(0,i.jsx)(eG.A,{htmlColor:t.palette.rankingBarNegative.main})]}),e.vote===ex.UW.Unsure&&(0,i.jsxs)(i.Fragment,{children:["arrow"===e.style&&(0,i.jsx)(eH.A,{htmlColor:t.palette.rankingBarNeutral.main}),"icon"===e.style&&(0,i.jsx)(eK.A,{htmlColor:t.palette.rankingBarNeutral.main}),"thumb"===e.style&&(0,i.jsx)(eH.A,{htmlColor:t.palette.rankingBarNeutral.main})]}),e.vote===ex.UW.Yes&&(0,i.jsxs)(i.Fragment,{children:["arrow"===e.style&&(0,i.jsx)(eL.A,{htmlColor:t.palette.rankingBreakdownArrowPositive.main}),"icon"===e.style&&(0,i.jsx)(ez.A,{htmlColor:t.palette.rankingBreakdownArrowPositive.main}),"thumb"===e.style&&(0,i.jsx)(eJ.A,{htmlColor:t.palette.rankingBreakdownArrowPositive.main})]}),(0,i.jsx)(I.A,{variant:"body1",sx:{margin:"0 !important"},children:e.count})]})}function e$(e){return(0,i.jsx)(D.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",height:"2.5rem",marginRight:"0.25rem"},children:(0,i.jsxs)(D.A,{sx:{display:"flex",flexDirection:"row",gap:"0.25rem",height:"1.75rem",userSelect:"none"},children:[(0,i.jsx)(eZ,{style:"arrow",count:e.answer.no,vote:ex.UW.No}),(0,i.jsx)(eZ,{style:"arrow",count:e.answer.unsure,vote:ex.UW.Unsure}),(0,i.jsx)(eZ,{style:"arrow",count:e.answer.yes,vote:ex.UW.Yes})]})})}function eQ(e){let t=(0,ei.A)();return(0,i.jsxs)(D.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",marginRight:"0.25rem"},children:[(0,i.jsx)(e$,{answer:e.answer}),(0,i.jsx)(D.A,{sx:{alignItems:"center",backgroundColor:"color-mix(in srgb, ".concat(0!==e.answer.score?e.answer.score>0?t.palette.rankingBreakdownArrowPositive.main:t.palette.rankingBarNegative.main:t.palette.rankingBarNeutral.main,", transparent 80%)"),border:"1px solid ".concat(0!==e.answer.score?e.answer.score>0?t.palette.rankingBreakdownArrowPositive.main:t.palette.rankingBarNegative.main:t.palette.rankingBarNeutral.main),borderRadius:"50%",display:"flex",flexDirection:"row",height:"2rem",justifyContent:"center",width:"2rem"},children:(0,i.jsx)(I.A,{sx:{color:t.palette.rankingBarBorder.main,margin:"0 !important",textAlign:"center",userSelect:"none"},variant:"body1",children:eX(e.answer.score)})})]})}function eY(e){let t=(0,ei.A)(),n="1.5rem",r="10rem";if(void 0===e.highestScore||void 0===e.lowestScore)return null;{let o=Math.abs(e.answer.score);0===o&&(o=1);let s=e.highestScore;Math.abs(e.lowestScore)>e.highestScore?s=Math.abs(e.lowestScore):0===e.lowestScore&&0===e.highestScore&&(s=4);let a="".concat(o/s*50,"%");return(0,i.jsxs)(D.A,{sx:{backgroundColor:t.palette.rankingBarBackground.main,border:"".concat("1px"," solid ").concat(t.palette.rankingBarBorder.main),borderRadius:"5px",height:"calc(".concat(n," + (2 * ").concat("1px","))"),marginRight:"0.25rem",overflow:"hidden",width:"calc(".concat(r," + (2 * ").concat("1px","))")},children:[(0,i.jsx)(D.A,{sx:{backgroundColor:"".concat(0!==e.answer.score?e.answer.score>0?t.palette.rankingBarPositive.main:t.palette.rankingBarNegative.main:t.palette.rankingBarNeutral.main),height:"".concat(n),position:"relative",left:"".concat(0!==e.answer.score?e.answer.score>0?"calc(".concat(r," / 2)"):"calc((".concat(r," / 2) - ").concat(a,")"):"calc((".concat(r," / 2) - (").concat(a," / 2))")),width:"".concat(0===e.answer.score?"calc(".concat(a," + ").concat("1px",")"):"".concat(a))}}),(0,i.jsx)(D.A,{sx:{backgroundColor:t.palette.rankingBarCentreLine.main,height:"".concat(n),left:"50%",position:"relative",top:"calc(-".concat(n,")"),width:"".concat("1px")}})]})}}let eX=e=>"".concat(e>0?"+":"").concat(e);function e0(e){switch(e.visualisationType){case"bar-centre-scale":default:return(0,i.jsx)(eY,{answer:e.answer,highestScore:e.highestScore,lowestScore:e.lowestScore});case"breakdown-only":return(0,i.jsx)(e$,{answer:e.answer});case"breakdown-with-score":return(0,i.jsx)(eQ,{answer:e.answer})}}function e1(e){let t=(0,ei.A)(),{allAnswers:n}=(0,b.Ay)(),r=new RegExp("^".concat(e.qid).concat(ef.L,"[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$")),o=Object.entries(n).filter(e=>{let[t,n]=e;return r.test(t)});if(0===o.length)return null;let s=[];for(let t of o){let n=t[0].replace("".concat(e.qid).concat(ef.L),""),i=0,r=0,o=0,l=0;for(let e of t[1]){var a;let t=null==(a=e.jsonValue)?void 0:a.answers[0].numericValue;void 0!==t&&(i+=t,-1===t?o+=1:0===t?l+=1:1===t&&(r+=1))}s.push({originalAnswerId:n,score:i,yes:r,no:o,unsure:l})}s.sort((e,t)=>t.score-e.score);let l=s[s.length-1].score,c=s[0].score;return(0,i.jsx)(D.A,{sx:{margin:"0.5rem auto 0 auto"},children:s.map((r,o)=>{var s;return(0,i.jsxs)(D.A,{sx:{backgroundColor:"".concat(o%2!=0?t.palette.rankedListAltBackground.main:"none"),borderBottom:"1px solid ".concat(t.palette.rankedListItemBorder.main),display:"grid",gap:"0",gridTemplateColumns:"42rem 1fr",padding:"0.5rem 0"},children:[(0,i.jsx)(D.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:(0,i.jsx)(I.A,{sx:{margin:"0 !important",padding:"0 1rem 0 0.25rem",textAlign:"left"},children:null==(s=n[e.qid][n[e.qid].findIndex(e=>e.id===r.originalAnswerId)].jsonValue)?void 0:s.answers[0].stringValue})}),(0,i.jsx)(D.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"end"},children:(0,i.jsx)(e0,{answer:r,highestScore:c,lowestScore:l,visualisationType:e.visualisationType})})]},r.originalAnswerId)})})}var e2=n(98314),e5=n(2768),e8=n(18414),e3=n(80015),e4=n(88694),e7=n(89041),e9=n(34814),e6=n.n(e9),te=n(57300),tt=n(50301);function tn(e){let{subscriptions:t,thisUser:n}=(0,o.useContext)(te.f),{readiness:r}=function(e){let{records:t}=function(){let{session:e}=(0,o.useContext)(e2.$);return{records:e.participantRecords}}(),[n,i]=(0,o.useState)([]);return(0,o.useEffect)(()=>{i(t.filter(t=>t.subject===e).map(e=>{var t;return{pid:e.participantId,ready:null==(t=(0,e3._h)(e.extendedDataJson))?void 0:t.ready}}))},[t,e]),{vid:e,readiness:n}}(e.videoId),[s,a]=(0,o.useState)([]);(0,o.useEffect)(()=>{a(t.filter(e=>e.deviceId!==(null==n?void 0:n.deviceId)).map(e=>e.deviceId).map(e=>{var t;return{pid:e,ready:r.some(t=>t.pid===e)?null==(t=r.find(t=>t.pid===e))?void 0:t.ready:void 0}}))},[r,t]);let l=e=>void 0===e?"gray":e?"green":"red";return(0,i.jsxs)(i.Fragment,{children:[s.some(e=>!0!==e.ready)&&(0,i.jsxs)(I.A,{variant:"body2",color:"black",component:"div",children:[" ",(0,i.jsx)(y.A,{i18nKey:"video.notAllReady"})]}),(0,i.jsx)(w.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",gap:1},children:s.map((n,r)=>{var o,s,a;let c;return(0,i.jsx)(tt.A,{title:"".concat(null!==(s=n.pid,o=null==(a=t.find(e=>e.deviceId===s))?void 0:a.participantName)&&void 0!==o?o:"Unknown"," (").concat(void 0===(c=n.ready)?"checking":c?"ready":"not ready yet",")"),children:(0,i.jsx)(w.A,{sx:{width:"0.75rem",height:"0.75rem",borderRadius:"50%",borderColor:l(n.ready),borderWidth:"2px",borderStyle:"solid",backgroundColor:n.ready?l(n.ready):"transparent"}})},"video-".concat(e.videoId,"-readiness-").concat(r,"-").concat(n.pid))})})]})}var ti=n(39268),tr=n(92253);let to=(e,t,n)=>t===d.sW.Controller||e||!n||!tr.nr;function ts(e){let{api:t,start:n}=(0,o.useContext)(e8.F$),[r,s]=(0,o.useState)(to(e.playedOnce,e.role,e.audio)),[a,l]=(0,o.useState)(!1),[c,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1);(0,o.useEffect)(()=>{e.inView&&s(to(e.playedOnce,e.role,e.audio))},[e.playedOnce,e.role,e.audio,e.inView]),(0,o.useEffect)(()=>{e.setMayPlay(r)},[r]),(0,o.useEffect)(()=>{let t,n,i,o;l((t=e.playMode,n=e.role,i=e.audio,o=e.inView,t!==d.Vn.Playing&&!r&&n!==d.sW.Controller&&i&&tr.nr&&o))},[e.playMode,r,e.role,e.audio,e.inView]),(0,o.useEffect)(()=>{let i=async i=>{let r={action:"video-readiness-update",sessionId:e.sessionId,deviceId:e.deviceId,ticks:Date.now(),parameters:{videoId:e.videoId,ready:i}};try{p(!0),await n(t.postParticipantAction(e.sessionToken,r,!1))}catch(e){console.error(e),g(!0)}finally{p(!1)}};e.role===d.sW.Client&&e.inView&&i(r)},[r,e.inView,e.role,t,e.deviceId,e.sessionId,e.sessionToken,e.videoId]);let m=async e=>{try{await x()}catch(e){console.error(e),s(!1),g(!0)}};(0,o.useEffect)(()=>{e.setShowActivationFailed(h),e.setOverrideControls(h)},[h]);let x=async()=>{if(!(0,u.s)(e.playerRef.current))throw Error("Unable to activate video: Player not ready");try{await e.playerRef.current.play(),e.playerRef.current.pause()}catch(e){throw console.error(e),Error("Failed to activate video")}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ti.A,{open:e.inView&&a,setOpen:l,onSelect:m,dismissible:!1,showCloseButton:!1,title:"Ready for video?",prompt:"Please let us know when you are ready to watch the video.",promptGraphicUri:e.posterUri,options:[{key:"ready",text:"Ready",filled:!0}],busy:c})})}function ta(e){let{toServerTime:t,fromServerTime:n}=(0,o.useContext)(e5.v),{sid:r}=(0,o.useContext)(t6),{api:s,start:a}=(0,o.useContext)(e8.F$),{user:l,sessionToken:c,role:p,deviceId:h}=(0,o.useContext)(v.yk),{session:g}=(0,o.useContext)(e2.$),m=(0,o.useRef)(null),[x,f]=(0,o.useState)(!1),{ref:b,inView:j}=(0,ew.Wx)({threshold:0}),[A,k]=(0,o.useState)(!1),[S,C]=(0,o.useState)(0),[D,E]=(0,o.useState)(d.Vn.NotStarted),T=(0,o.useRef)(void 0),[q,P]=(0,o.useState)(0),[R,F]=(0,o.useState)(),[_,W]=(0,o.useState)(),B=(0,o.useRef)((0,e3.gL)(g.liveExperienceState.originatorTimestampsJson)),[U,V]=(0,o.useState)(!1),[O,L]=(0,o.useState)(!1),[M,z]=(0,o.useState)(!1),[K,H]=(0,o.useState)(!1),[G,J]=(0,o.useState)(!1),Z=(0,o.useContext)(e4.G);(0,o.useEffect)(()=>{(0,u.s)(m.current)&&(m.current.addEventListener("play",e=>{V(!0),E(d.Vn.Playing)}),m.current.addEventListener("pause",e=>{E(d.Vn.Paused)}),m.current.addEventListener("ended",e=>{E(d.Vn.Ended)}),document.addEventListener("visibilitychange",()=>k("visible"===document.visibilityState)),k("visible"===document.visibilityState))},[m]),(0,o.useEffect)(()=>{if((0,u.s)(m.current)&&(0,u.s)(null==Z?void 0:Z.state.current.audioOutputDevice))if((0,u.s)(m.current.setSinkId))try{m.current.setSinkId(Z.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for SimplifiedVideoSlide",e)}else console.debug("Audio.setSinkId not defined")},[m,null==Z?void 0:Z.state.current.audioOutputDevice]),(0,o.useEffect)(()=>{j?(C(1),$().then(()=>{C(2)}).catch(e=>{console.error(e),C(3)}).finally(()=>{eo(),V(!1),E(d.Vn.Paused)})):Q().then(()=>{C(0)}).catch(e=>{console.error(e),C(3)}).finally(()=>{eo(),V(!1),E(d.Vn.NotStarted),p===d.sW.Controller&&Y(d.Vn.NotStarted)})},[j]),(0,o.useEffect)(()=>{z(p!=d.sW.Controller&&D!==d.Vn.Playing)},[p,D]);let $=async()=>{if(!(0,u.s)(m.current))throw Error("Player not ready to load video");console.debug("Loading video ".concat(e.videoId)),m.current.setAttribute("src",e.videoUri),m.current.load()},Q=async()=>{if(null===m.current)throw Error("Player not ready");console.debug("Unloading video ".concat(e.videoId)),m.current.removeAttribute("src"),m.current.load()},Y=async(n,i)=>{if(null===m.current)throw Error("Player not ready");try{f(!0);let o=m.current.currentTime,u={sessionId:r,videoId:e.videoId,modeChange:n,modeChangePosition_s:n===d.Vn.NotStarted?0:o,modeChangeServerTime_ms:t(null!=i?i:Date.now())},p={action:"set-video-sync",sessionId:r,parameters:u,originator:h,ticks:Date.now()};await a(s.postFacilitatorAction(l.access_token,c,p,!1))}catch(e){console.error("sync error",e)}finally{f(!1)}},ee=e=>{if(!(0,u.s)(m.current))return void console.warn("Video player not ready for user interactions");switch(e){case"restart":m.current.currentTime=0,m.current.pause(),Y(d.Vn.NotStarted),er();break;case"back":m.current.currentTime-=15,m.current.pause(),Y(d.Vn.Paused),er();break;case"play-pause":D===d.Vn.Playing?Y(d.Vn.Paused):Y(d.Vn.Playing,Date.now()+2e3);break;case"fwd":m.current.currentTime+=15,m.current.pause(),Y(d.Vn.Paused),er()}};(0,o.useEffect)(()=>{var t,n,i,r;let o=g.liveExperienceState,s=o.originator,a=(0,e3.gL)(o.originatorTimestampsJson),l=e3.zD.VideoSync(e.videoId),c=!(0,u.s)(null==(t=B.current[l])?void 0:t[s])||(0,u.s)(null==(n=a[l])?void 0:n[s])&&(null==(i=a[l])?void 0:i[s])>=B.current[l][s];if(!(0,u.s)(_)||c){B.current=a;let t=(null==(r=o.videoSync)?void 0:r.videoId)===e.videoId?o.videoSync:void 0;(0,u.s)(t)&&et(_,t)&&W(t)}},[g.liveExperienceState]);let et=(e,t)=>!!e6()(e)||e.modeChange!==t.modeChange||e.modeChangePosition_s!==t.modeChangePosition_s||e.modeChangeServerTime_ms!==t.modeChangeServerTime_ms;(0,o.useEffect)(()=>{2===S&&(er(),j&&(0,u.s)(_)&&G&&en(_))},[S,j,_,D,G]);let en=e=>{if((0,u.s)(m.current)||console.warn("Video player not ready to enact sync"),void 0!==R&&(clearTimeout(R),F(void 0)),e.modeChange!==d.Vn.Playing)return void ei(e);let t=n(e.modeChangeServerTime_ms)-Date.now();console.debug("Video sync scheduled for "+t+"ms");let i=t<0?Math.abs(t/1e3):0,r={...e,modeChangePosition_s:e.modeChangePosition_s+i},o=setTimeout(()=>{F(void 0),ei(r)},Math.max(0,t));F(o)},ei=e=>{if(null===m.current)return void console.warn("Player not ready to enact sync");console.debug("Video sync enaction: ".concat(d.Vn[e.modeChange]," at ").concat(e.modeChangePosition_s,"s"));let t=Math.min(Math.round((e.modeChangePosition_s+Number.EPSILON)*1e3)/1e3,isFinite(m.current.duration)?m.current.duration:0);console.debug("newPosition",t),console.debug("duration",m.current.duration),m.current.currentTime=t,e.modeChange===d.Vn.Playing&&m.current.currentTime<m.current.duration?m.current.play():m.current.pause()};(0,o.useEffect)(()=>{let t={type:X.m.Media_Playback_Update,data:{muteFacilitator:e.muteFacilitator,videoId:e.videoId,isPlaying:D===d.Vn.Playing}};X.A.emit(t),er(),void 0!==T.current&&(clearInterval(T.current),T.current=void 0),D===d.Vn.Playing&&void 0===T.current&&(T.current=setInterval(()=>{D===d.Vn.Playing?er():(0,u.s)(T.current)&&(clearInterval(T.current),T.current=void 0)},100))},[D,e.videoId]);let er=()=>{(0,u.s)(m.current)?P(m.current.currentTime/m.current.duration*100):console.warn("Player not ready to update progress bar")},eo=()=>{P(0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ts,{role:p,videoId:e.videoId,audio:e.audio,inView:j,docVisible:A,state:S,playMode:D,deviceId:h,sessionId:r,playedOnce:U,playerRef:m,sessionToken:c,setOverrideControls:L,setShowActivationFailed:H,setMayPlay:J,posterUri:e.posterUri}),(0,i.jsxs)(w.A,{className:"stretch",ref:b,sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",gap:1,p:0},children:[3!==S&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{sx:{flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,i.jsxs)(w.A,{sx:{position:"relative",flexGrow:1},children:[(0,i.jsxs)(w.A,{sx:{position:"absolute",top:"100%",left:0,right:0},children:[M&&(0,i.jsx)(I.A,{variant:"body2",color:"white",children:(0,i.jsx)(y.A,{i18nKey:"video.videoReadiness"})}),K&&(0,i.jsx)(I.A,{variant:"body2",color:"red",children:(0,i.jsx)(y.A,{i18nKey:"video.videoInitFailed"})}),O&&(0,i.jsx)(I.A,{variant:"body2",color:"red",children:(0,i.jsx)(y.A,{i18nKey:"video.videoManualControl"})})]}),(0,i.jsx)("video",{ref:m,style:{width:"100%",height:"100%",borderRadius:"0.5rem",overflow:"hidden",objectFit:"contain",backgroundColor:"rgba(0,0,0,0.5)"},poster:e.posterUri,preload:"auto",loop:!1,autoPlay:!1,controls:O,disablePictureInPicture:!0,muted:!e.audio,crossOrigin:"anonymous",className:"shadow",playsInline:!0,"webkit-playsinline":"true"}),e.controls&&null!==m.current&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(w.A,{sx:{position:"absolute",left:"50%",bottom:0},children:(0,i.jsxs)(w.A,{sx:{position:"relative",left:"-50%",bottom:0,p:1,background:"rgba(255,255,255,0.75)",borderRadius:"0.5rem",alignSelf:"center",display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(e7.A,{variant:1===S?"indeterminate":"determinate",value:q,color:1===S?"primary":"error"}),(0,i.jsxs)(w.A,{sx:{display:"flex",flexDirection:"row",alignSelf:"stretch",justifyContent:"center",gap:1},children:[(0,i.jsx)(N.A,{variant:"outlined",disabled:2!==S||x,btnKey:"restart",btnText:"Restart",onClick:ee}),(0,i.jsx)(N.A,{variant:"outlined",disabled:2!==S||x,btnKey:"back",btnText:"-15s",onClick:ee}),(0,i.jsx)(N.A,{disabled:2!==S||x,btnKey:"play-pause",variant:D===d.Vn.Playing?"outlined":"contained",busy:void 0!==R,btnText:D===d.Vn.Playing?"Pause":"Play",onClick:ee}),(0,i.jsx)(N.A,{variant:"outlined",disabled:2!==S||x,btnKey:"fwd",btnText:"+15s",onClick:ee})]}),(0,i.jsx)(tn,{videoId:e.videoId})]})})})]})})}),3===S&&(0,i.jsx)("p",{children:(0,i.jsx)(y.A,{i18nKey:"video.videoInitFailed"})})]})]})}var tl=n(80431);function tc(e){let{setAllSlideAnswerRules:t}=(0,tl.zJ)(),[n,i]=(0,o.useState)(void 0);return(0,o.useEffect)(()=>{let t=[];e.children.forEach(e=>{(0,o.isValidElement)(e)&&e.props.qIds.qid&&t.push(e.props.qIds.qid)}),i(t)},[e.children]),(0,o.useEffect)(()=>{void 0!==n&&void 0!==t&&n.forEach(n=>{t(t=>({...t,[n]:function(e){let t={};return Object.entries(e).forEach(e=>{let[n,i]=e;"noselfvoting"===n&&"true"===i&&(t[n]=!0)}),t}(e.rules)}))})},[n,e.rules,t]),e.children}function td(e){let{session:t}=(0,o.useContext)(e2.$);return t.remoteConfiguration===e.config?e.children:null}var tu=n(79178);let tp=e=>({replace:(t,n)=>th(t,e)}),th=(e,t)=>{if(e instanceof r.Hg&&e.attribs){var n;let i;switch(e.tagName.toLowerCase()){case"sidebarlayout":i=tK(e,t);break;case"fullpagescrollinglayout":i=tH(e,t);break;case"fullpagecentredlayout":i=tG(e,t);break;case"columnlayout":i=tJ(e,t);break;case"slidebackgroundimage":i=tZ(e,t);break;case"imageslide":i=tL(e,t);break;case"videoslide":i=tw(e,t);break;case"summaryslidelayout":i=tj(e,t);break;case"sectionheading":i=tQ(e,t);break;case"slidetext":i=tY(e,t);break;case"slideimage":case"img":i=tX(e,t);break;case"inputorcompletion":i=tM(e,t);break;case"inputsequence":i=tz(e,t);break;case"sliderinput":i=tA(e,t);break;case"textinput":i=tD(e,t);break;case"demographicinput":i=tq(e,t);break;case"updownvoteinput":i=tP(e,t);break;case"updownvoteinputsequence":i=tR(e,t);break;case"closedchoiceinput":i=tF(e,t);break;case"pointsallocationinput":i=t_(e,t);break;case"multisliderinput":i=tW(e,t);break;case"acknowledgementinput":i=tB(e,t);break;case"rankedlistinput":i=tN(e,t);break;case"consentinput":i=tU(e,t);break;case"completion":i=t$(e,t);break;case"speechbubbles":i=tI(e,t);break;case"selectiongraph":i=tk(e,t);break;case"updownvoteresults":i=tS(e,t);break;case"updownvoteresultsrankedlist":i=tC(e,t);break;case"topoptions":i=tV(e,t);break;case"orderedlist":i=tO(e,t);break;case"answerrules":i=tb(e,t);break;case"remoteconfiguration":i=tv(e,t);break;default:return e}return null!=(n=(0,tu.p1)(i,t.keyPrefix))?n:i}},tg=(e,t)=>{let n=e.children.map((e,n)=>tp(t).replace(e,n)).filter(e=>null!=e&&!1!==e).map(e=>e instanceof r.Hg?(0,r.zd)([e],tp(t)):e);return o.Children.toArray(n)},tm=e=>{let t=[];for(let n of e.children)if(n instanceof r.Hg&&"option"===n.tagName){let e=n.attribs.key||n.attribs.value,i=n.attribs.title||n.attribs.display,r=n.attribs.description,o=n.attribs["aria-label"],s=n.attribs.fontsize,a=n.attribs.graphic,l=(0,c.$_)(n.attribs.isalt),d=(0,c.$_)(n.attribs.exclusive);if((0,u.s)(e)&&(0,u.s)(i)){let n={key:e,title:i,description:r,ariaLabel:o,fontSize:s,graphic:a,isAlt:l,exclusive:d};t.push(n)}else throw console.warn("KeyedOption option without key or title",n),"KeyedOption option without key or title"}return t},tx=(e,t)=>{let n=[];for(let i of e.children.filter(e=>e instanceof r.Hg).map(e=>e))void 0!==i.attribs.qid?n.push(tf(t,i)):n=[...n,...tx(i,t)];return n},tf=(e,t)=>{let n=t.attribs.qid;if(void 0===n)throw console.error("Question id not found for element",t),"Question id not found for element";return{sid:e.sessionId,pid:e.deviceId,qid:n}},ty=e=>{var t,n;let i=e.attribs.instruction,r=null!=(n=null!=(t=e.attribs.question)?t:e.attribs.statement)?n:e.attribs.prompt,o=e.attribs.explanation,s=(0,c.yG)(e.attribs.pii);return i||r||o||void 0!==s?{instruction:i,question:r,explanation:o,pii:s}:void 0},tb=(e,t)=>{let n=e.attribs,r=tg(e,t);return(0,i.jsx)(tc,{rules:n,children:r})},tv=(e,t)=>{let n=Number(e.attribs.config),r=tg(e,t);return(0,i.jsx)(td,{config:n,children:r})},tw=(e,t)=>{var n;console.debug("Enriching VideoSlide tag as VideoSlide...",e);let r=e.attribs.id,o=e.attribs.videouri,s=e.attribs.posteruri,a=t.role===d.sW.Controller,l=t.role===d.sW.Controller||t.remoteMedia,u=null==(n=(0,c.$_)(e.attribs["mute-facilitator"]))||n;return(0,i.jsx)(ta,{videoId:r,controls:a,audio:l,videoUri:o,posterUri:s,muteFacilitator:u})},tj=(e,t)=>{console.debug("Enriching SummarySlideLayout tag as SummarySlideLayout...",e);let n=e.attribs.color,r=e.attribs.title,o=e.attribs.prompt,s=void 0!==e.attribs.chartbackground?(0,c.yG)(e.attribs.chartbackground):void 0,a=tg(e,t);return(0,i.jsx)(eC,{color:n,title:r,prompt:o,chartBackground:s,children:a})},tA=(e,t)=>{var n,r;console.debug("Enriching SliderInput tag as SliderInput...",e);let o=tf(t,e),s=ty(e),a=(0,tu.Qs)(e.attribs.type),l=a===eg.a.categorical?(0,tu.F8)(e.attribs.marks):void 0,d=a!==eg.a.categorical?null==(n=(0,tu.F8)(e.attribs.range))?void 0:n.map(e=>(0,tu.SP)(e.trim())):void 0,u=a!==eg.a.categorical?(0,tu.SP)(e.attribs.step):void 0,p=(0,c.yG)(e.attribs.showunsure),h=null==(r=(0,c.$_)(e.attribs.fullheight))||r;return(0,i.jsx)(eg.A,{qids:o,role:t.role,type:a,marks:l,numericRange:d,numericStep:u,question:s,showUnsure:p,onAnswer:t.onAnswer,fullHeight:h})},tk=(e,t)=>{var n;console.debug("Enriching SelectionGraph tag as AnswerGraphMuiChart...",e);let r=tf(t,e),o=ty(e),s=(0,tu.$1)(e.attribs.orientation),l=(0,c.$_)(e.attribs.showorientationcontrols),d=(0,tu.tX)(e.attribs.type),u=null==(n=(0,tu.F8)(e.attribs.range))?void 0:n.map(e=>a().toNumber(e.trim())),p=(0,tu.UI)((0,tu.F8)(e.attribs.categories)),h={sortOn:e.attribs.sorton,sortOrder:e.attribs.sortorder},g=tm(e),m={left:e.attribs.marginleft?Number(e.attribs.marginleft):void 0},x=e.attribs.categorieslegendfontsize,f=e.attribs.valueslegendfontsize,y=a().parseInt(e.attribs.xaxisheight)||void 0;if(r&&void 0!==d)return(0,i.jsx)(eE.A,{role:t.role,qids:r,question:o,inputType:d,orientation:s,showOrientationControls:l,categories:p,sorting:h,range:u?{lo:u[0],hi:u[1],step:u[2]}:void 0,margin:m,categoriesLegendFontSize:x,valuesLegendFontSize:f,options:g,xAxisHeight:y});throw console.error("SelectionGraph without qIds, type, or range",e.attribs),"SelectionGraph without qIds, type, or range"},tS=(e,t)=>{console.debug("Enriching UpDownVoteResults tag as UpDownVoteResults...",e);let n=e.attribs.layout,o=e.attribs.divisivedescription,s=e.attribs.supporteddescription,a=e.attribs.opposeddescription,l=e.attribs.unanswereddescription,c={};for(let t of e.children)if(t instanceof r.Hg&&"result"===t.tagName){let e=t.attribs.qid,n=t.attribs.assertion;void 0!==e&&(c[e]={assertion:n})}return(0,i.jsx)(eV,{questions:c,layout:n,divisiveDescription:null!=o?o:(0,i.jsx)(y.A,{i18nKey:"upDownResult.divisiveDescription"}),supportedDescription:null!=s?s:(0,i.jsx)(y.A,{i18nKey:"upDownResult.supportedDescription"}),opposedDescription:null!=a?a:(0,i.jsx)(y.A,{i18nKey:"upDownResult.opposedDescription"}),unansweredDescription:null!=l?l:(0,i.jsx)(y.A,{i18nKey:"upDownResult.unansweredDescription"})})},tC=(e,t)=>(console.debug("Enriching UpDownVoteResultsRankedList tag as UpDownVoteResultsRankedList...",e),(0,i.jsx)(e1,{qid:e.attribs.qid,visualisationType:e.attribs.visualisationtype})),tI=(e,t)=>{console.debug("Enriching SpeechBubbles tag as SpeechBubbles (with children)...",e);let n=tf(t,e),r=ty(e);return(0,i.jsx)(eF,{qids:n,question:r})},tD=(e,t)=>{var n;let o;console.debug("Enriching TextInput tag as TextInput...",e);let s=tf(t,e),l=ty(e),d=(0,tu.Ap)(e.attribs.type),u=e.attribs.label,p=e.attribs.help,h=e.attribs.submittext,g=e.attribs.skiptext,m=a().parseInt(e.attribs.mincheckboxes),x=(0,c.yG)(null!=(n=e.attribs.textrequired)?n:"true"),f=[];for(let t of e.childNodes)if(t instanceof r.Hg&&"information"===t.tagName&&(o={heading:t.attribs.heading,body:t.children}),t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.key,n=t.attribs.text,i=(0,c.yG)(t.attribs.required);f.push({key:e,text:n,initial:!1,required:i,checked:!1})}let y=e.attribs.maxlength,b=(0,c.yG)(e.attribs.maxlengthcounter),v=e.attribs.minlength,w=e.attribs.minrows,j=(0,c.yG)(e.attribs.multiline),A=(0,c.yG)(e.attribs.fullheight),k=e.attribs.pattern,S=e.attribs.patternerrormessage;if(void 0===l||void 0===l.pii)throw"pii not defined for TextInput";return(0,i.jsx)(em.A,{qids:s,role:t.role,type:d,label:u,help:p,textRequired:x,minCheckboxes:m,information:o,onAnswer:t.onAnswer,checkboxes:f,question:l,submitText:h,skipText:g,maxLength:y?Number(y):void 0,maxLengthCounter:b,minLength:v?Number(v):void 0,minRows:w?Number(w):void 0,multiline:j,fullHeight:A,pattern:k,patternErrorMessage:S})},tE=e=>{let t=[];for(let n of e)if(n instanceof r.Hg&&"demographicgroup"===n.tagName){let e=n.attribs.label;if(e){let i=tT(n.children);t.push({label:e,choices:i})}else throw console.warn("DemographicGroup without label",n),"DemographicGroup without label"}return t},tT=e=>{let t=[];for(let n of e)if(n instanceof r.Hg&&"demographic"===n.tagName){let e=n.attribs.display,i=n.attribs.value;if(e&&i)t.push({display:e,key:i});else throw console.warn("Demographic without display or value",n),"Demographic without display or value"}return t},tq=(e,t)=>{console.debug("Enriching DemographicInput tag as DemographicInput...",e);let n=tf(t,e),o=ty(e),s=(0,c.yG)(e.attribs.showage),a=(0,c.yG)(e.attribs.showgender),l=(0,c.yG)(e.attribs.showethnicity),d=e.attribs.showpostcode,u=(e=>{let t=[];for(let n of e)if(n instanceof r.Hg&&"demographicinputtype"===n.tagName){let e=n.attribs.key,i=n.attribs.label,r=n.attribs.layout,o=n.attribs.mode,s=n.attribs.textplaceholder,a=n.attribs.textvalidationregex,l=(0,c.wF)(n.attribs.textmaxlength),d=(0,c.wF)(n.attribs.columns),u=void 0!==d?{columns:d}:void 0,p=n.attribs.selectionquestion,g=n.attribs.selectionobject,m=n.attribs.selectionobject_plural,x=n.attribs.selectionitemprompt,f=(0,c.wF)(n.attribs.minselections),y={key:e,label:i,layout:r,layoutProps:u,groups:[],mode:o,textPlaceholder:s,textValidationRegex:a,textMaxLength:l,selectionQuestion:p,selectionObject:g,selectionObject_plural:m,selectionItemPrompt:x,minSelections:f,maxSelections:(0,c.wF)(n.attribs.maxselections),prompt:n.attribs.prompt},{validations:b,requiredFields:v}=h(y);if(!0!==b)throw console.error("Invalid DemographicInputTypes",b),"Invalid DemographicInputTypes:\n"+b.join("\n");v.find(e=>"groups"===e)&&(y.groups=tE(n.children)),t.push(y)}return t})(e.children);return(0,i.jsx)(Y,{role:t.role,qids:n,onAnswer:t.onAnswer,question:o,showAge:s,showGender:a,showEthnicity:l,showPostcode:d,customDemographics:u})},tP=(e,t)=>{console.debug("Enriching UpDownVoteInput tag as UpDownVoteInput...",e);let n=tf(t,e),r=ty(e),o=e.attribs.assertion;return(0,i.jsx)(ex.Ay,{qids:n,role:t.role,question:r,assertion:o,onAnswer:t.onAnswer})},tR=(e,t)=>{console.debug("Enriching UpDownVoteInputSequence tag as UpDownVoteInputSequence...",e);let n=tf(t,e),r=ty(e),o=(0,c.yG)(e.attribs.showprogress),s=tg(e,t),a=s[s.length-1];return(0,i.jsx)(ef.A,{completion:a,onAnswer:t.onAnswer,qIds:n,question:r,role:t.role,showProgress:o})},tF=(e,t)=>{console.debug("Enriching ClosedChoiceInput tag as ClosedChoiceInput...",e);let n=tf(t,e),r=ty(e),o=parseInt(e.attribs.minselections),s=parseInt(e.attribs.maxselections),a=e.attribs.layout,l=e.attribs.layoutparams,d=l?(0,tu.F8)(l):[],u=(0,c.yG)(e.attribs.shuffle),p=tm(e);return(0,i.jsx)(R,{qids:n,role:t.role,question:r,options:p,shuffle:u,onAnswer:t.onAnswer,layout:a,layoutParams:d,minSelections:o,maxSelections:s,contentStore:t.contentStore})},t_=(e,t)=>{console.debug("Enriching PointsAllocationInput tag as PointsAllocationInput...",e);let n=tf(t,e),o=ty(e),s=parseInt(e.attribs.points),a=[];for(let t of e.children)if(t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.title,n=t.attribs.description,i=t.attribs.key,r=parseInt(t.attribs.min),o=parseInt(t.attribs.max),s=t.attribs.graphic;if(e&&n&&i&&void 0!==r&&void 0!==o)a.push({title:e,description:n,key:i,min:r,max:o,graphic:s});else throw"PointsAllocationInput Option without title, description, key, min, or max"}return(0,i.jsx)(el,{qids:n,question:o,points:s,options:a,onAnswer:t.onAnswer})},tW=(e,t)=>{console.debug("Enriching MultiSliderInput tag as MultiSliderInput...",e);let n=tf(t,e),o=ty(e),s=parseInt(e.attribs.min),a=parseInt(e.attribs.max),l=[],d=[],u=Number(e.attribs.paddingX)||void 0,p=Number(e.attribs.rowspacing)||void 0,h=(0,c.yG)(e.attribs.showdescriptions);for(let t of e.children)if(t instanceof r.Hg&&"label"===t.tagName){let e=parseFloat(t.attribs.at),n=t.attribs.text;void 0!==e&&n&&l.push({at:e,text:n})}else if(t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.key,n=t.attribs.title,i=t.attribs.description;e&&n&&d.push({key:e,title:n,description:i})}return(0,i.jsx)(es,{qids:n,question:o,min:s,max:a,labels:l,options:d,paddingX:u,rowSpacing:p,showDescriptions:h,role:t.role,onAnswer:t.onAnswer})},tB=(e,t)=>{console.debug("Enriching AcknowledgementInput tag as AcknowledgementInput...",e);let n=tf(t,e),o=ty(e),s=e.attribs.align,a=[];for(let t of e.children)if(t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.text,n=t.attribs.key,i=t.attribs.variant,r=t.attribs.colour;e&&n&&a.push({text:e,key:n,variant:i,colour:r})}return(0,i.jsx)(k,{qids:n,question:o,options:a,align:s,onAnswer:t.onAnswer})},tN=(e,t)=>{console.debug("Enriching RankedListInput tag as RankedListInput...",e);let n=tf(t,e),o=ty(e),s=[],a=(0,c.yG)(e.attribs.shuffle),l=0;for(let t of e.children)if(t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.key,n=t.attribs.title,i=t.attribs.description;n&&s.push({key:e,title:n,description:i,startingIndex:l++})}return(0,i.jsx)(eh,{qids:n,question:o,options:s,shuffle:a,onAnswer:t.onAnswer})},tU=(e,t)=>{console.debug("Enriching ConsentInput tag as ConsentInput...",e);let n=tf(t,e),r=ty(e),o=e.attribs.consenttext;return(0,i.jsx)(U,{qids:n,question:r,consentText:o,onAnswer:t.onAnswer,content:e.children})},tV=(e,t)=>{console.debug("Enriching TopOptions tag as TopOptionsSummary...",e);let n=tf(t,e),o=ty(e),s=parseInt(e.attribs.count),a=[];for(let t of e.children)if(t instanceof r.Hg&&"option"===t.tagName){let e=t.attribs.key,n=t.attribs.title,i=t.attribs.description,r=t.attribs.graphic;e&&n&&i&&a.push({key:e,title:n,description:i,graphic:r})}return(0,i.jsx)(eW,{qids:n,question:o,options:a,displayCount:s})},tO=(e,t)=>{console.debug("Enriching OrderedList tag as OrderedListDisplay...",e);let n=tf(t,e),r=ty(e),o=e.attribs.startcolour,s=e.attribs.endcolour,a=e.attribs.mode,l=tm(e);return(0,i.jsx)(eP,{qids:n,question:r,options:l,role:t.role,startColour:o,endColour:s,mode:a})},tL=(e,t)=>{console.debug("Enriching ImageSlide tag as ImageSlide...",e);let n=e.attribs.src,r=e.attribs.alt,o=(0,tu.$u)(e.attribs.style);return(0,i.jsx)(ej,{style:o,alt:r,src:n})},tM=(e,t)=>{let n=tg(e,t);console.debug("Enriching InputOrCompletion tag as InputOrCompletion (with children)...",n);let r=tf(t,e);return(0,i.jsx)(et,{qids:r,input:n[0],completion:n[1]})},tz=(e,t)=>{let n=tg(e,t);console.debug("Enriching InputSequence tag as InputSequence (with children)...",n);let r=[];for(let e=0;e<n.length-1;e++)r.push(n[e]);let o=n[n.length-1],s=ty(e),a=(0,c.yG)(e.attribs.showprogress),l=tx(e,t);return(0,i.jsx)(er,{question:s,showProgress:a,qids:l,inputs:r,completion:o,role:t.role})},tK=(e,t)=>{console.debug("Enriching SideBarLayout tag as SideBarLayout (with children)...",e);let n=tg(e,t),r=(0,tu.zd)(e.attribs.sidestyle),o=(0,tu.zd)(e.attribs.mainstyle),s=e.attribs.sidebackgroundimage,a=e.attribs.mainbackgroundimage;return(0,i.jsx)(eA,{side:n[0],sideSx:r,main:n[1],mainSx:o,sideBackgroundImage:s,mainBackgroundImage:a,contentStore:t.contentStore})},tH=(e,t)=>{console.debug("Enriching FullPageScrollingLayout tag as FullPageScrollingLayout (with children)...",e);let n=(0,tu.zd)(e.attribs.sx),r=tg(e,t);return(0,i.jsx)(ev,{sx:n,children:r})},tG=(e,t)=>{console.debug("Enriching FullPageCentredLayout tag as FullPageCentredLayout (with children)...",e);let n=(0,tu.zd)(e.attribs.sx),r=tg(e,t);return(0,i.jsx)(eb,{sx:n,children:r})},tJ=(e,t)=>{console.debug("Enriching ColumnLayout tag as ColumnLayout (with children)...",e);let n=(0,tu.zd)(e.attribs.sx),r=tg(e,t);return(0,i.jsx)(ey,{sx:n,children:r})},tZ=(e,t)=>{console.debug("Enriching SlideBackgroundImage tag as SlideBackgroundImage (with children)...",e);let n=tg(e,t),r=e.attribs.src,o=(0,tu.zd)(e.attribs.sx);return(0,i.jsx)(ek,{src:r,sx:o,children:n})},t$=(e,t)=>{console.debug("Enriching Completion tag as CompletionDisplay (with children)...",e);let n=e.attribs.message,r=e.attribs.factoid,o=(0,tu.zd)(e.attribs.sx);return(0,i.jsx)(eD,{content:{message:n,factoid:r},sx:o})},tQ=(e,t)=>{var n;console.debug("Enriching SectionHeading tag as SectionHeading...",e);let o=(0,l.A)(),s=ty(e),a=[],d=null==(n=(0,c.$_)(e.attribs.uppercasetitle))||n;for(let t of e.children)if(t instanceof r.Hg&&"heading"===t.tagName){let e=t.attribs.title,n=t.attribs.description,i=t.attribs.graphic,r=(0,c.yG)(t.attribs.expanded);if(e)a.push({title:e,description:n,graphic:i,expanded:r});else throw console.warn("SectionHeading without title",t),"SectionHeading without title"}return(0,i.jsx)(eR,{question:s,headings:a,uid:o,uppercaseTitle:d})},tY=(e,t)=>{console.debug("Enriching SlideText tag as SlideText (with children)...",e);let n=tg(e,t),r=(0,tu.zd)(e.attribs.sx),o=e.attribs.color,s=e.attribs.align,a=e.attribs.variant;return(0,i.jsx)(eS,{variant:a,sx:r,color:o,align:s,children:n})},tX=(e,t)=>{console.debug("Enriching ImageSlide tag as ImageSlide...",e);let n=e.attribs.src,r=(0,tu.$u)(e.attribs.style);return(0,i.jsx)(eI,{src:n,style:r})},t0=["src","graphic","videoUri","posterUri","sideBackgroundImage","mainBackgroundImage","data-background-image"],t1=["style","sideStyle","mainStyle"];class t2{getAsSectionTags(e,t){let n=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("section"),i=[];console.debug("Module ".concat(t," contains ").concat(n.length," sections."));for(let e=0;e<n.length;e++){let r=n.item(e);r&&r.setAttribute("key","module-".concat(t,"-section-").concat(e));let o=new XMLSerializer().serializeToString(r);i.push(o)}return a().join(i,"\n")}reset(){this.progressData={overall:{completed:0,total:0},bars:{}},this.sendUpdate()}updateProgress(e,t,n){this.progressData.bars[e]={completed:t,total:n},this.progressData.overall.completed=a().sum(Object.entries(this.progressData.bars).map(e=>e[1].completed)),this.progressData.overall.total=a().sum(Object.entries(this.progressData.bars).map(e=>e[1].total)),this.sendUpdate()}sendUpdate(){var e;null==(e=this.onUpdate)||e.call(this,{overall:this.progressData.overall,bars:{}})}findAllReplacements(e,t){void 0===e&&(e=this.dom.documentElement),t=this.appendNodeReplacements(e,t);for(let n=0;n<e.childNodes.length;n++)t=this.findAllReplacements(e.childNodes[n],t);return t}appendNodeReplacements(e,t){let n=[...t];if(e.nodeType===Node.ELEMENT_NODE){for(let t of t0)if(e.hasAttribute(t)||e.hasAttribute(t.toLowerCase())){var i;let r=null!=(i=e.getAttribute(t))?i:e.getAttribute(t.toLowerCase());if(void 0===n.find(e=>e.key===r)){let e=async()=>{try{return await this.zcs.getAsUrl(r,(e,t,n)=>{this.updateProgress(e,t,n)})}catch(e){throw console.error("Error fetching ".concat(t,": ").concat(r),e),e}},i={key:r,getUrlPromise:e,targets:[],attempts:0};n.push(i)}n.find(e=>e.key===r).targets.push({element:e,attribute:t})}for(let t of t1)if(e.hasAttribute(t)){let i=e.getAttribute(t);if(i.includes("url(")){let r=i.match(/url\(([^)]+)\)/)[1];if(r=a().trim(r,"\"' ()"),void 0===n.find(e=>e.key===r)){let e=async()=>{try{return await this.zcs.getAsUrl(r,(e,t,n)=>{this.updateProgress(e,t,n)})}catch(e){throw console.error("Error fetching ".concat(t,": ").concat(r),e),e}},i={key:r,getUrlPromise:e,targets:[],attempts:0};n.push(i)}n.find(e=>e.key===r).targets.push({element:e,attribute:t})}}}return n}async replaceAllReplacements(e){do{let t=e.filter(e=>this.shouldTryAgain(e)),n=await Promise.all(t.map(e=>this.replace(e)));if(n.some(e=>!e.succeeded)){let e=n.filter(e=>!1===e.succeeded);console.warn("".concat(e.length," failed replacements"),e),await new Promise(e=>setTimeout(e,1e3))}}while(e.some(e=>this.shouldTryAgain(e)));if(e.some(e=>!1===e.succeeded)){let t=e.filter(e=>!1===e.succeeded);console.error("".concat(t.length," replacements failed"),t)}return new XMLSerializer().serializeToString(this.dom)}async replace(e){try{e.attempts++;let t=await e.getUrlPromise();for(let n of e.targets){let i=n.element.getAttribute(n.attribute),r=null==i?void 0:i.replace(e.key,t);n.element.setAttribute(n.attribute,r)}e.succeeded=!0}catch(t){console.warn("Error fetching ".concat(e.key),t),e.succeeded=!1,e.error=t}finally{return e}}shouldTryAgain(e){return!0!==e.succeeded&&e.attempts<3}constructor(e,t,n){this.source=e,this.zcs=t,this.onUpdate=n,this.progressData={overall:{completed:0,total:0},bars:{}},this.dom=new DOMParser().parseFromString(e,"text/xml"),this.reset()}}class t5{async init(){if(this.initialised)return;this.storageAvailable="none"!==this.storageFlag&&void 0!==window&&void 0!==window.navigator&&void 0!==window.navigator.storage,this.persistAvailable=this.storageAvailable&&void 0!==window.navigator.storage.persist,this.mayPersist=this.storageAvailable&&void 0!==window.navigator.storage.persist&&await window.navigator.storage.persist(),this.retrieveAvailable=this.storageAvailable&&void 0!==window.navigator.storage.getDirectory,this.estimateAvailable=this.storageAvailable&&void 0!==window.navigator.storage.estimate;let e={"Workshop dir":this.workshopDir,"Storage Available":this.storageAvailable,"Persist Available":this.persistAvailable,"Retrieve available":this.retrieveAvailable,"Estimate available":this.estimateAvailable,"May Persist":this.mayPersist};if(this.estimateAvailable){let t=await navigator.storage.estimate();e.Quota=t.quota,e.Usage=t.usage}else e.Quota="N/K",e.Usage="N/K";console.table(e),this.initialised=!0}async getAsUrl(e,t){if(!this.initialised)throw"Not initialised";if(e.startsWith("blob:"))return console.debug("getAsUrl","blob: url requested - passing back the same url."),e;let n=await this.getAsEntry(e,t);try{return URL.createObjectURL(n.content)}catch(t){return console.warn("getAsUrl","Unable to create blob URL for: ".concat(e),t),n.sourceUrl}}async getAsEntry(e,t){if(!this.initialised)throw"Not initialised";if(e.startsWith("blob:")){let n=e.substring(5);return await this.getAsEntry(n,t)}let n=this.forceFetch?null:await this.getCacheData(e);if(this.forceFetch&&console.debug("getAsEntry","cache skip for: ".concat(e)),null!==n&&(void 0===n.content||0===n.content.size)&&(n=null),console.debug("getAsEntry","Cache ".concat(null===n?"miss for":"hit for",": ").concat(e)),null===n){try{n=await this.fetchContent({key:e},t)}catch(t){throw console.error("getAsEntry","Unable to fetch data for: ".concat(e),t),t}try{void 0!==n.content&&n.content.size>0?(console.debug("getAsEntry","Cacheing ".concat(n.content.size," bytes of data for: ").concat(e),n),await this.storeCacheData(n)):(void 0===n.content&&console.warn("getAsEntry","Content for ".concat(e," is undefined.")),void 0!==n.content&&0===n.content.size&&console.warn("getAsEntry","Content for ".concat(e," has 0 bytes.")))}catch(t){console.warn("getAsEntry","Unable to cache the data for: ".concat(e),t)}}return n}async storeCacheData(e){if(this.persistAvailable){var t;let n=e.key.split("/").slice(-1)[0],i=new Date;e.created=null!=(t=e.created)?t:i,e.updated=i;let r=await window.navigator.storage.getDirectory(),o=await r.getDirectoryHandle("workshops",{create:!0}),s=await o.getDirectoryHandle(this.workshopDir,{create:!0}),a=await s.getDirectoryHandle("content",{create:!0}),l=await a.getFileHandle(n,{create:!0}),c=await l.createWritable();try{await c.write(e.content)}catch(e){throw console.warn("storeCacheData","error writing to cache",e),e}finally{await c.close(),console.debug("storeCacheData","content stored",e.key)}}}async getCacheData(e){if(!this.retrieveAvailable)return null;try{let t=e.split("/").slice(-1)[0],n=await window.navigator.storage.getDirectory(),i=await n.getDirectoryHandle("workshops",{create:!0}),r=await i.getDirectoryHandle(this.workshopDir,{create:!0}),o=await r.getDirectoryHandle("content",{create:!0}),s=await o.getFileHandle(t),a=await s.getFile();return{key:e,content:a}}catch(e){return console.warn("getCacheData - error encountered, this is a cache miss",e),null}}async fetchContent(e,t){return(await this.fetchContents([e],t))[0]}async fetchContents(e,t){let n=await this.getAccessUrls(e.map(e=>this.fixKeyForS3(e.key))),i=e.map(e=>({key:e.key,url:n.objectKeysToAccessUrls[this.fixKeyForS3(e.key)]}));console.debug("fetchContents","Fetched keysToUrls",i);let r=i.map(e=>this.download(e,t));console.debug("fetchContents","Fetching ".concat(r.length," content items..."));let o=await Promise.all(r);return console.debug("fetchContents","fetch contents complete",o),o}async download(e,t){let n=0;do{try{var i;let n=await fetch(e.url);if(null===n.body)throw"No content found in response for: ".concat(e.key,", at: ").concat(e.url);let r=n.headers.get("Content-Length");if(null===r)throw"Content-Length not found in response for: ".concat(e.key,", at: ").concat(e.url);let o=null!=(i=n.headers.get("Content-Type"))?i:void 0;if(void 0===o)throw"Content-Type not found in response for: ".concat(e.key,", at: ").concat(e.url);console.debug("download","".concat(e.key," content-type: ").concat(o));let s=n.body.getReader(),a=Number.parseInt(r);void 0!==t&&t(e.key,0,a);let l=[],c=0;for(;;){let{done:n,value:i}=await s.read();if(n)break;l.push(i),c+=i.length,void 0!==t&&t(e.key,c,a)}let d=new Uint8Array(c),u=0;for(let e of l)d.set(e,u),u+=e.length;return{content:new Blob(l,{type:o}),sourceUrl:e.url,key:e.key}}catch(t){console.warn("download","Error fetching: ".concat(e.key,", attempt: ").concat(n),t),await new Promise(e=>setTimeout(e,1e3))}n++}while(n<3);throw"Failed to fetch: ".concat(e.key)}async getAccessUrls(e){let t={objectKeys:e.filter(e=>this.isKeyForS3(e))},n=e.filter(e=>!this.isKeyForS3(e));console.debug("getAccessUrls","requests to s3 for:",t);let i=await this.start(this.api.postWorkshopContentAccessRequest(this.session.id,this.sessionToken,t));if((0,u.s)(i))return n.forEach(e=>i.objectKeysToAccessUrls[e]=e),i;throw"No access urls response"}fixKeyForS3(e){if(this.isKeyForS3(e)){e=a().trim(e,"/");let t="workshops/".concat(this.workshopDir,"/");e.startsWith("workshops")||(e="".concat(t).concat(e))}return e}isKeyForS3(e){return!e.startsWith("https://")&&!e.startsWith("http://")}constructor(e,t,n,i,r,o,s){this.api=e,this.start=t,this.session=n,this.sessionToken=i;let a=r.split("/").slice(-2)[0];this.workshopDir=a,this.forceFetch=o,this.initialised=!1,this.storageAvailable=!1,this.persistAvailable=!1,this.mayPersist=!1,this.retrieveAvailable=!1,this.estimateAvailable=!1,this.storageFlag=s}}var t8=n(78211),t3=function(e){return e[e.Init=0]="Init",e[e.RetrievingRawXml=1]="RetrievingRawXml",e[e.RawSlidesError=2]="RawSlidesError",e[e.RetrievingMetadata=3]="RetrievingMetadata",e[e.MetadataError=4]="MetadataError",e[e.EnrichingSlides=5]="EnrichingSlides",e[e.EnrichmentError=6]="EnrichmentError",e[e.InflatingSlides=7]="InflatingSlides",e[e.InflationError=8]="InflationError",e[e.Ready=9]="Ready",e}(t3||{});let t4=[0,1],t7=[5,7,3],t9=[2,6,8,4],t6=(0,o.createContext)({});function ne(e){let{api:t,start:n}=(0,o.useContext)(e8.F$),{session:s}=(0,o.useContext)(e2.$),{storage:a}=(0,o.useContext)(t8.c),l=(0,o.useContext)(v.yk),[c,p]=(0,o.useState)(0),h=(0,o.useRef)(void 0),[g,m]=(0,o.useState)([]),[x,f]=(0,o.useState)(),[y,b]=(0,o.useState)([]),[w,j]=(0,o.useState)(void 0),[A,k]=(0,o.useState)(!0),[S,C]=(0,o.useState)(!1),[I,D]=(0,o.useState)(!1),E=(0,o.useCallback)(async i=>{var r;return null!=(r=await n(t.postDeliberationAnswer(e.sid,i,l.sessionToken)))?r:null},[t,e.sid,n,l.sessionToken]);return(0,o.useEffect)(()=>{let i=async()=>{let e=[];for(let i of s.sessionPresentationUris||[]){if(!i)throw"Presentation link empty in session data.";let r=new t5(t,n,s,l.sessionToken,i,!0,a);await r.init();let o=i.split("/").pop(),c=await r.getAsEntry(o,void 0),d=await c.content.text();if(!d)throw"No content found in presentation file.";e.push(d)}return e},o=e=>{X.A.emit({type:X.m.Content_Progress_Update,data:e})},x=async()=>{let i=[];for(let r=0;r<g.length;r++){let c=s.sessionPresentationUris[r],d=g[r];if(!c)throw"Presentation link empty in session data.";let u=new t5(t,n,s,l.sessionToken,c,e.refresh,a);await u.init();let p=new t2(d,u,o),h=p.findAllReplacements(void 0,[]);console.debug("".concat(h.length," unique resources to replace"),h);let m=await p.replaceAllReplacements(h),x=p.getAsSectionTags(m,r);if(!x)throw"No sections found in presentation.";i.push(x)}return i},v=async()=>{let i=[];for(let o=0;o<y.length;o++){let c=s.sessionPresentationUris[o],u=y[o];if(!c)throw"Presentation link empty in session data.";if(!u)throw"No content found in presentation xml.";let p=new t5(t,n,s,l.sessionToken,c,e.refresh,a);await p.init();let h={sessionId:s.id,deviceId:l.deviceId,role:l.role,remoteMedia:s.remoteConfiguration!==d.LQ.InPerson,remoteCall:s.remoteConfiguration===d.LQ.RemoteWithVideoCall,keyPrefix:"module-".concat(o),contentStore:p,onAnswer:E},g=(0,r.Ay)(u,tp(h)),m=(g instanceof Array?g:[g]).map((e,t)=>(0,tu.p1)(e,"module-".concat(o))).filter(e=>void 0!==e);i.push(...m)}return i},w=async e=>{let t={anonymisation:{extract:[],erase:[]},breakouts:{groups:[],breakouts:[]}};for(let n of e.map(e=>(e=>{let t=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("metadata").item(0);return{anonymisation:(e=>{if(!(0,u.s)(e))return{extract:[],erase:[]};let t={extract:[],erase:[]};for(let n=0;n<e.children.length;n++){let i=e.children.item(n);if((0,u.s)(i))if(i.textContent)switch(i.tagName){case"extract":t.extract.push(i.textContent);break;case"erase":t.erase.push(i.textContent||"")}else throw Error("<".concat(i.tagName,"> element without text content."))}return t})(null==t?void 0:t.getElementsByTagName("anonymisation").item(0)),breakouts:(e=>{if(!(0,u.s)(e))return{groups:[],breakouts:[]};let t=[],n=[];for(let i=0;i<e.children.length;i++){let r=e.children.item(i);if((0,u.s)(r))switch(r.tagName){case"group":let o=r.getAttribute("id");if(o)n.push(o);else throw Error("<group> element without text content.");break;case"breakout":let s=r.getAttribute("id"),a=r.getAttribute("name"),l=r.getAttribute("mins"),c=l?parseInt(l):void 0,d="false"!==r.getAttribute("skip");if(!s||!a)throw Error("<breakout> element missing required attributes.");let p=[],h=r.getElementsByTagName("presentation");for(let e=0;e<h.length;e++){let t=h.item(e);if((0,u.s)(t)){let e=t.getAttribute("uri");e&&p.push(e)}}t.push({id:s,name:a,mins:c,skip:d,presentationUris:p})}}return{groups:n,breakouts:t}})(null==t?void 0:t.getElementsByTagName("breakouts").item(0))}})(e)))t.anonymisation.extract.push(...n.anonymisation.extract),t.anonymisation.erase.push(...n.anonymisation.erase),t.breakouts.groups.push(...n.breakouts.groups),t.breakouts.breakouts.push(...n.breakouts.breakouts);return t};if(console.debug("Static content state",t3[c]),c!==h.current)switch(h.current=c,c){case 0:p(1);break;case 1:i().then(e=>{m(e),p(3)}).catch(e=>{console.error(e),p(2)});break;case 3:w(g).then(e=>{f(e),p(5)}).catch(e=>{console.error(e),p(4)});break;case 5:x().then(e=>{b(e),p(7)}).catch(e=>{console.error(e),p(6)});break;case 7:v().then(e=>{j(e),p(9)}).catch(e=>{console.error(e),p(8)})}k(void 0!==t4.find(e=>e===c)),C(void 0!==t7.find(e=>e===c)),D(void 0!==t9.find(e=>e===c))},[t,E,y,e.refresh,s,g,n,c,a,l.deviceId,l.role,l.sessionToken]),(0,i.jsxs)(i.Fragment,{children:[A&&e.init,S&&e.load,I&&e.err,9===c&&(0,u.s)(g)&&(0,u.s)(y)&&(0,u.s)(w)&&(0,u.s)(x)&&(0,i.jsx)(t6.Provider,{value:{sid:e.sid,sourceXml:g,presentationXml:y,slides:w,metadata:x},children:e.children})]})}},21644:(e,t,n)=>{n.d(t,{A:()=>c,z:()=>l});var i=n(95155),r=n(67909),o=n(12115),s=n(84073),a=n(19373);let l=(0,o.createContext)({});function c(e){let t=(0,o.useContext)(a._),[c,d]=(0,o.useState)(),{role:u}=(0,o.useContext)(s.yk);return(0,o.useEffect)(()=>{let o=(0,r.default)(()=>Promise.all([n.e(328),n.e(612),n.e(680)]).then(n.bind(n,1680)),{loadableGenerated:{webpack:()=>[1680]},ssr:!1}),s=(0,r.default)(()=>Promise.all([n.e(551),n.e(268),n.e(612),n.e(101),n.e(758)]).then(n.bind(n,85758)),{loadableGenerated:{webpack:()=>[85758]},ssr:!1});d({presentation:(0,i.jsx)(o,{sid:t.sid,role:u,slides:t.slides,sourcePresentationXml:t.sourceXml.join("\n"),embedded:!0,showBorder:!1,regenerateThumbnails:e.refresh}),previews:e.previews?(0,i.jsx)(s,{sid:t.sid,slides:t.slides,sourcePresentationXml:t.sourceXml.join("\n"),regenerateThumbnails:e.refresh}):void 0})},[]),(0,i.jsx)(i.Fragment,{children:c&&(0,i.jsx)(l.Provider,{value:c,children:e.children})})}},23387:(e,t,n)=>{n.d(t,{BX:()=>s,DY:()=>o,HN:()=>a,YC:()=>r,aW:()=>i,gZ:()=>l});let i=!0,r=!0,o=!0,s=!0,a=!0,l={audio:!0,video:!0,audioDevice:void 0,audioOutputDevice:null,videoDevice:void 0,voiceFocus:!0,backgroundBlur:!1,startMeeting:!0}},23971:(e,t,n)=>{function i(e){if(null!=e&&("string"!=typeof e||""!==e.trim()))return parseInt(e)}function r(e){if(null!=e&&("string"!=typeof e||""!==e.trim()))return o(e)}function o(e){return!0===e||!1===e?e:"number"==typeof e?e>0:("string"==typeof e&&(e=e.toLowerCase()),"true"===e||"false"===e)?"true"===e:"yes"===e||"no"===e?"yes"===e:"t"===e||"f"===e?"t"===e:("y"===e||"n"===e)&&"y"===e}n.d(t,{$_:()=>r,Cb:()=>function e(t){if(t instanceof Array)return t.map(function(t){return"object"==typeof t&&(t=e(t)),t});{let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=(i.charAt(0).toLowerCase()+i.slice(1)||i).toString(),o=t[i];(o instanceof Array||null!==o&&o.constructor===Object)&&(o=e(o)),n[r]=o}return n}},wF:()=>i,yG:()=>o})},25612:(e,t,n)=>{n.d(t,{A:()=>y,j:()=>x});var i=n(95155),r=n(12115),o=n(71450),s=n(2462),a=n(6027),l=n(23971),c=n(18932),d=n(69999),u=n(74821),p=n(54884),h=n(84073),g=n(77914);let m=new u.m,x=(0,r.createContext)({}),f=[c.jB.Online,c.jB.Connecting,c.jB.Connected,c.jB.Joining];function y(e){let t=(0,r.useContext)(h.yk),n=(0,r.useContext)(g.T),u=(0,r.useRef)(void 0),[y,b]=(0,r.useState)(c.jB.Init),v=(0,r.useRef)(void 0),[w,j]=(0,r.useState)(!1),[A,k]=(0,r.useState)(),[S,C]=(0,r.useState)();(0,r.useEffect)(()=>(d.A.on(d.m.WSS_Request_Reconnect,C),d.A.on(d.m.WSS_Request_Disconnect,C),()=>{d.A.off(d.m.WSS_Request_Reconnect,C),d.A.off(d.m.WSS_Request_Disconnect,C)}),[]),(0,r.useEffect)(()=>{if(void 0!==S)switch(S.type){case d.m.WSS_Request_Reconnect:b(c.jB.Connecting);break;case d.m.WSS_Request_Disconnect:b(c.jB.UserDisconnecting)}},[S]);let I=(0,r.useCallback)(e=>{try{return u.current.send(JSON.stringify(e)),!0}catch(e){return console.error("ZgResilientWssConnectionProvider",e),!1}},[u]),[D,E]=(0,r.useState)({state:y,joinedOnce:w,sendMessage:I});(0,r.useEffect)(()=>{let i;k((i=e.sid,{deviceId:t.deviceId,sessionId:i,sessionToken:t.sessionToken,role:t.role,deviceName:void 0,participantName:n.participantName}))},[e.sid,t,n]),(0,r.useEffect)(()=>{E({state:y,joinedOnce:w,sendMessage:I})},[u,y,w,I]),(0,r.useEffect)(()=>{let t=async e=>{if(null==e?void 0:e.data){let t=(0,l.Cb)(JSON.parse(e.data));if(!(0,p.s)(t))return void console.error("ZgResilientWssConnectionProvider: Could not deserialize message.");try{if(await m.acquire(),console.debug("WSS: message received: action = ".concat(t.action,", type = ").concat(t.type)),"send"===t.action)switch(t.type){case"remote-log":switch(t.content.severity){case"debug":console.debug("WSS: Remote debug log",t.content.message);break;case"info":console.info("WSS: Remote info log",t.content.message);break;case"warn":console.warn("WSS: Remote warn log",t.content.message);break;case"error":console.error("WSS: Remote error log",t.content.message);break;default:console.log("WSS: Remote log",t.content.message)}break;case"join-confirmation":console.info("WSS: Join confirmation"),b(c.jB.Joined);break;default:d.A.emit({type:d.m.WSS_Distribute_Message,data:t})}else"user-signals-distribution"===t.type?d.A.emit({type:d.m.User_Signals_Update,data:t.content}):d.A.emit({type:d.m.WSS_Distribute_Message,data:t})}finally{m.release()}}},n=(e,n)=>{try{(0,p.s)(u.current)&&u.current.close()}catch(e){console.warn("ZgResilientWssConnectionProvider",e)}finally{u.current=n?new o.H("wss://im82qhhf54.execute-api.eu-west-1.amazonaws.com/test").withBackoff(new s._(1e3,4)).withBuffer(new a.j).onOpen((e,t)=>{b(c.jB.Connected)}).onReconnect((e,t)=>{b(c.jB.Connected)}).onRetry((e,t)=>{}).onClose((e,t)=>{b(c.jB.Disconnected)}).onError((e,t)=>{b(c.jB.Error)}).onMessage((e,n)=>{t(n)}).build():void 0,b(e)}};if(v.current!==y)switch(console.debug("WSS: state change",c.jB[y]),d.A.emit({type:d.m.WSS_Update_ConnectionState,data:y}),v.current=y,y){case c.jB.Init:if(!(0,p.s)(window)||!(0,p.s)(window.navigator))throw console.error("ZgResilientWssConnectionProvider: Window or navigator is undefined."),"Window undefined.";window.addEventListener("online",()=>{b(c.jB.Online)}),window.addEventListener("offline",()=>{b(c.jB.Offline)}),console.debug("WSS: online = ".concat(window.navigator.onLine)),b(window.navigator.onLine?c.jB.Online:c.jB.Offline);break;case c.jB.Offline:n(c.jB.Offline,!1);break;case c.jB.Online:b(c.jB.Connecting);break;case c.jB.Connecting:n(c.jB.Connected,!0);break;case c.jB.Connected:b(c.jB.Joining);break;case c.jB.Joining:var i,r;console.info("ZgResilientWssConnectionProvider: Joining session...");let h={action:"join",deviceId:A.deviceId,sessionId:A.sessionId,sessionToken:A.sessionToken,deviceName:null!=(i=A.deviceName)?i:null,participantName:null!=(r=A.participantName)?r:null,role:A.role};u.current.send(JSON.stringify(h));break;case c.jB.Joined:j(!0),I({action:"user-signals",content:{signalAction:"snapshot"},sid:e.sid,type:"user-signals-request"});break;case c.jB.Error:setTimeout(()=>{console.debug("ZgResilientWssConnectionProvider: Recreating socket..."),b(c.jB.Connecting)},2e3);break;case c.jB.UserDisconnecting:n(c.jB.Disconnected,!1)}},[A,e.sid,I,y]);let T=y===c.jB.Error;return(0,i.jsxs)(i.Fragment,{children:[T&&!w&&(0,i.jsx)("p",{children:e.error}),!T&&!w&&f.includes(y)&&e.load,w&&(0,i.jsx)(x.Provider,{value:D,children:e.children})]})}},30349:(e,t,n)=>{n.d(t,{O:()=>o});var i=n(54884),r=n(80015);let o=async(e,t,n,o)=>{let s,a=await t(e.postSessionSnapshotRequest(n,o,r.WT.RequestsToMake)),l={};if((0,i.s)(a)&&a.data.length>0){let c=a.data.map(async s=>{let a=await t(e.postSessionSnapshotRequest(n,o,s.action,s.filter));if((0,i.s)(a))switch(s.action){case r.WT.SessionWithoutCollections:l.sessionWithoutCollections=a.data;break;case r.WT.ChimeMeetingData:l.chimeMeetingData=a.data;break;case r.WT.LiveExperienceState:l.liveExperienceState=a.data;break;case r.WT.ParticipantRecords:l.participantRecords=a.data;break;case r.WT.AnswersByQid:(0,i.s)(l.answers)||(l.answers=[]),l.answers.push(...a.data)}});return await Promise.all(c),s=l.sessionWithoutCollections,(0,i.s)(l.chimeMeetingData)&&(s.chimeMeetingData=l.chimeMeetingData),(0,i.s)(l.liveExperienceState)&&(s.liveExperienceState=l.liveExperienceState),(0,i.s)(l.participantRecords)&&(s.participantRecords=l.participantRecords),(0,i.s)(l.answers)&&(s.answers=l.answers),s}}},39268:(e,t,n)=>{n.d(t,{A:()=>h});var i=n(95155),r=n(29999),o=n(27747),s=n(2021),a=n(99496),l=n(80357),c=n(60193),d=n(80317),u=n(12115),p=n(31240);function h(e){var t,n,h;let g=()=>{if(!1!==e.dismissible){var t;e.setOpen(!1),null==(t=e.onClose)||t.call(e)}},m=(0,u.useId)();return(0,u.useEffect)(()=>{console.debug("dialog open",e.open)},[e.open]),(0,i.jsxs)(o.A,{fullWidth:null==(t=e.fullWidth)||t,maxWidth:null!=(n=e.maxWidth)?n:"sm",open:e.open,disableEscapeKeyDown:!e.dismissible,onClose:g,children:[e.title&&(0,i.jsx)(s.A,{align:"center",children:e.title}),(0,i.jsxs)(a.A,{children:[(null==(h=e.showCloseButton)||h)&&(0,i.jsx)(l.A,{style:{position:"absolute",top:0,right:0},children:(0,i.jsx)(c.A,{"aria-label":"close",onClick:g,children:(0,i.jsx)(r.A,{})})}),(0,i.jsxs)(l.A,{sx:{p:2,gap:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsxs)(l.A,{sx:{width:"100%",display:"flex",flexDirection:"start",alignItems:"start"},children:[e.promptGraphicUri&&(0,i.jsx)("img",{src:e.promptGraphicUri,alt:"Illustrative graphic",style:{width:"25%"}}),e.prompt&&(0,i.jsx)(d.A,{variant:"body1",sx:{width:"75%",mb:2,textAlign:"center",textWrap:"balance"},children:e.prompt})]}),e.content,e.options.map(t=>(0,i.jsx)(p.A,{btnKey:"dialog-".concat(m,"-option-").concat(t.key),sx:{width:"66%"},variant:t.filled?"contained":"outlined",color:"buttonStandard",onClick:()=>{var n,i,r;return n=t.key,void(e.setOpen(!1),null==(i=e.onClose)||i.call(e),null==(r=e.onSelect)||r.call(e,n))},btnText:t.text,busy:e.busy},"dialog-".concat(m,"-option-").concat(t.key)))]})]})]})}},39846:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(95155),r=n(49714),o=n(74577),s=n(12115);function a(e){var t;let[n,a]=(0,s.useState)(null!=(t=e.sliderDefault)?t:0),[l,c]=(0,s.useState)("solo"===e.sliderMode?1:.5),d=(0,s.useMemo)(()=>(0,r.Ay)(o.Ay)({color:"secondary",height:"".concat(.8*l,"em"),"& .MuiSlider-thumb":{height:"".concat(1.6*l,"em"),width:"".concat(1.6*l,"em"),backgroundColor:"secondary",boxShadow:"0px 4px 10px 0px rgba(0, 0, 0, 0.25) inset","&::before":{display:"none"}},"& .MuiSlider-rail":{borderRadius:"".concat(.4*l,"em"),boxShadow:"0px 4px 10px 0px rgba(0, 0, 0, 0.25) inset"},"& .MuiSlider-track":{borderRadius:"".concat(.4*l,"em"),boxShadow:"0px 4px 10px 0px rgba(0, 0, 0, 0.25) inset"},"& .MuiSlider-markLabel":{fontSize:"".concat(+l,"rem"),marginTop:"".concat(2.5*l,"em")}}),[l]);return(0,i.jsx)(d,{...e,value:n,onChange:(e,t)=>{a(t)},onChangeCommitted:(t,n)=>{let i=n;e.acceptableRange&&i>e.acceptableRange.max&&(i=e.acceptableRange.max),e.acceptableRange&&i<e.acceptableRange.min&&(i=e.acceptableRange.min),a(i),e.onCommit(i)}})}},45238:(e,t,n)=>{n.d(t,{A:()=>g,K:()=>h});var i=n(95155),r=n(4615),o=n(12115),s=n(98314),a=n(84073),l=n(18414),c=n(18932),d=n(2492),u=n(54884),p=function(e){return e[e.Init=0]="Init",e[e.NoMeeting=1]="NoMeeting",e[e.Joining=2]="Joining",e[e.JoiningError=3]="JoiningError",e[e.Ready=4]="Ready",e}(p||{});let h=(0,o.createContext)({});function g(e){var t,n;let[g,m]=(0,o.useState)(0),{session:x}=(0,o.useContext)(s.$),{api:f,start:y}=(0,o.useContext)(l.F$),{deviceId:b,sessionToken:v,user:w}=(0,o.useContext)(a.yk),{participantName:j}=(0,o.useContext)(d.O),[A,k]=(0,o.useState)();(0,o.useEffect)(()=>{0===g&&m(x.remoteConfiguration===c.LQ.RemoteWithVideoCall?2:1)},[g,x]),(0,o.useEffect)(()=>{2!==g||C.current||S()},[g]);let S=async()=>{try{let t=await I();(0,u.s)(t)?(k({zgJoinResponse:t,isPreview:e.isPreview}),m(4)):console.debug("postMeetingJoinRequest superseded")}catch(e){console.error(e),m(3)}};(0,o.useEffect)(()=>{if(!e.isPreview&&4===g){var t,n;(null==(t=x.chimeMeetingData)?void 0:t.chimeMeetingId)!==(null==A||null==(n=A.zgJoinResponse)?void 0:n.chimeMeetingId)&&m(2)}},[null==(t=x.chimeMeetingData)?void 0:t.chimeMeetingId,null==A||null==(n=A.zgJoinResponse)?void 0:n.chimeMeetingId,e.isPreview]),(0,o.useEffect)(()=>{2===g&&(0,u.s)(null==A?void 0:A.zgJoinResponse)&&m(4)},[A]);let C=(0,o.useRef)(!1),I=async()=>{if(!C.current){console.debug("posting meeting join request"),C.current=!0;try{return await y(f.postMeetingJoinRequest(x.id,v,b,e.isPreview,j,null==w?void 0:w.access_token))}catch(e){throw e}finally{C.current=!1}}};return(0,o.useEffect)(()=>{console.debug("MeetingDataProvider state: ".concat(p[g]),A)},[g,A]),(0,i.jsxs)(i.Fragment,{children:[0===g&&(0,i.jsx)(i.Fragment,{children:e.joinView}),2===g&&(0,i.jsx)(i.Fragment,{children:e.joinView}),1===g&&(0,i.jsx)(r.A,{severity:"error",children:"This is not a remote video call workshop."}),3===g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.A,{severity:"error",children:["There was an unexpected error setting up the video call",e.isPreview?" preview":"","."]}),(0,i.jsx)(r.A,{severity:"info",children:"Please reload the page."})]}),4===g&&(null==A?void 0:A.zgJoinResponse)&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(h.Provider,{value:A,children:e.children})})]})}},48484:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(95155),r=n(69999),o=n(80357),s=n(80317),a=n(89041),l=n(12115),c=n(66622);function d(e){let[t,n]=(0,l.useState)(),[d,u]=(0,l.useState)({overall:{completed:0,total:0},bars:{}});return(0,l.useEffect)(()=>(r.A.on(r.m.Content_Progress_Update,n),()=>{r.A.off(r.m.Content_Progress_Update,n)}),[]),(0,l.useEffect)(()=>{void 0!==t&&t.type===r.m.Content_Progress_Update&&u(t.data)},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c.A,{children:(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.preTitle&&(0,i.jsx)(s.A,{variant:"body1",color:"white",children:e.preTitle}),e.title&&(0,i.jsx)(s.A,{variant:"h2",color:"white",children:e.title}),(0,i.jsx)(a.A,{sx:{mt:4,backgroundColor:"#444444","& .MuiLinearProgress-bar":{backgroundColor:"white"}},value:d.overall.total>0?100*d.overall.completed/d.overall.total:void 0,variant:d.overall.total>0?"determinate":"indeterminate"}),e.bar&&(0,i.jsx)(s.A,{variant:"body2",color:"white",children:e.bar})]})})})}},55279:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(79200),r=n(12115);function o(e){let{allUserSignals:t}=(0,r.useContext)(i.F);return e?t.find(t=>t.senderDeviceId===e):void 0}},57300:(e,t,n)=>{n.d(t,{A:()=>m,f:()=>g});var i=n(95155),r=n(46671),o=n.n(r),s=n(12115),a=n(60071),l=n(69999),c=n(74821),d=n(54884),u=n(98314),p=n(84073);let h=new c.m,g=(0,s.createContext)({});function m(e){let t=(0,s.useContext)(p.yk),{session:n}=(0,s.useContext)(u.$),[r,c]=(0,s.useState)([]),[m,x]=(0,s.useState)(r.find(e=>e.deviceId===t.deviceId)),[f,y]=(0,s.useState)([]),[b,v]=(0,s.useState)();return(0,s.useEffect)(()=>(l.A.on(l.m.WSS_Distribute_Message,v),()=>{l.A.off(l.m.WSS_Distribute_Message,v)}),[]),(0,s.useEffect)(()=>{if((0,d.s)(b)&&b.type===l.m.WSS_Distribute_Message){var e=b.data;if("distribute"===e.action&&"ZgDiff"===e.type){let t=e.content;"subscriptions"===t.updateTarget&&(e=>{h.acquire();try{c(e)}finally{h.release()}})(e=>(e=>{let t=o().uniq(e.filter(t=>e.filter(e=>e.subscriptionId===t.subscriptionId).length>1).map(e=>e.subscriptionId)),n=o().uniq(e.filter(t=>e.filter(e=>e.deviceId===t.deviceId).length>1).map(e=>e.deviceId));return t.length>0&&console.warn("Obvious duplicate subscriptions: ".concat(t.join(", "))),n.length>0&&console.warn("Duplicate dids: ".concat(n.join(", "))),e.filter((t,i)=>!n.includes(t.deviceId)||i===e.findLastIndex(e=>e.deviceId===t.deviceId))})((0,a.$)(e,t)))}}},[b]),(0,s.useEffect)(()=>{let e=r.filter(e=>e.deviceId===t.deviceId);e.length>1&&console.warn("Multiple subscriptions found for deviceId: ".concat(t.deviceId)),x(e.at(-1))},[r,t]),(0,s.useEffect)(()=>{var e;y(null!=(e=n.deviceIdBanList)?e:[])},[n.deviceIdBanList]),(0,i.jsx)(g.Provider,{value:{subscriptions:r,thisUser:m,deviceIdBanList:f},children:e.children})}},60071:(e,t,n)=>{n.d(t,{$:()=>c});var i=n(73905),r=n(53682),o=n(13187),s=n(70361),a=n.n(s),l=n(54884);let c=(e,t)=>{let n=a()(e);for(let e of t.patches){let t=(0,o.E)({path:e.jsonPath,json:n,resultType:"pointer",flatten:!0}),s=[];for(let o of t){let t,a=[];for(let t of e.jsonPatch){let e=u(o,t.path),n=(0,l.B)()(t,"from")?u(o,t.from):void 0,i={...t,from:n,path:e};a.push(i)}let c=0,p=1+2*a.length;do{if(++c>p)throw Error("".concat(p," cycles.\n\n").concat(JSON.stringify(a,null,2)));let e=(0,r.tf)(a,n);if(t=!1,(0,l.s)(e))if("OPERATION_PATH_UNRESOLVABLE"===e.name&&"replace"===e.operation.op)a=a.map(t=>"replace"===t.op&&t.path===e.operation.path?{...e.operation,op:"add"}:t),t=!0;else if("OPERATION_PATH_UNRESOLVABLE"===e.name&&"remove"===e.operation.op)a=a.filter(t=>"remove"!==t.op||t.path!==e.operation.path),t=!0;else if("OPERATION_PATH_CANNOT_ADD"===e.name&&"add"===e.operation.op){let r=e.operation.path.split("/"),o=n;for(let e of r.slice(1,-1))Object.hasOwn(o,e)&&(0,i.O)(o[e])||(o[e]={}),o=o[e];t=!0}else throw Error("JSON patch invalid after pre-processing: ".concat(e.name,": ").concat(e.message," for op ").concat(JSON.stringify(e.operation)))}while(t);s=[...s,...a.filter(e=>d(e))];let h=a.filter(e=>!d(e));n=(0,r.X6)(n,h,!0,!1).newDocument}s.sort((e,t)=>{let n=parseInt(e.path.split("/").pop());return parseInt(t.path.split("/").pop())-n}),n=(0,r.X6)(n,s,!0,!1).newDocument}return n},d=e=>"remove"===e.op&&/^.*\/\d+$/.test(e.path),u=(e,t)=>(0,l.s)(t)&&0!==t.length?(e.endsWith("/")&&(e=e.slice(0,-1)),(null==t?void 0:t.startsWith("/"))&&(t=t.slice(1)),"".concat(e,"/").concat(t)):e},61451:(e,t,n)=>{n.d(t,{A:()=>g,L:()=>h});var i=n(95155),r=n(73017),o=n(91028),s=n(57915),a=n(90073),l=n(46671),c=n.n(l),d=n(12115),u=n(74434),p=n(86004);let h="_";function g(e){let{allAnswers:t}=(0,r.Ay)(),n=t[e.qIds.qid],l=[],g=[];if(n)for(let t of n){var m;let n=t.id,r=null==(m=t.jsonValue)?void 0:m.answers[0].stringValue,o="".concat(e.qIds.qid).concat(h).concat(n);n&&r&&t.participantId!==e.qIds.pid&&(l.push({qid:o,sid:e.qIds.sid,pid:e.qIds.pid}),g.push((0,i.jsx)(p.Ay,{qids:{qid:o,sid:e.qIds.sid,pid:e.qIds.pid},role:e.role,assertion:r,onAnswer:e.onAnswer})))}let x=()=>{for(let e of l)if(!(0,r.Qy)((0,r._i)(t[e.qid],e)))return l.indexOf(e)},[f,y]=(0,d.useState)(x());(0,d.useEffect)(()=>{let e=x();f!==e&&y(e)},[t]);let b=(0,s.A)(),v=[.2,.25],[w]=(0,o.Q)({duration:500});return n&&0!==l.length?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.A,{ref:w,className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",p:2,gap:2,boxSizing:"border-box"},children:[void 0!==f&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{content:e.question}),(0,i.jsx)(a.A,{sx:{flexGrow:1,boxSizing:"border-box",overflowY:"auto",overflowX:"hidden",display:"block"},children:g[f]},"input-sequence-element-".concat(l[f].qid))]}),void 0===f&&(0,i.jsx)(a.A,{sx:{flexGrow:1,display:"block"},children:e.completion}),void 0!==f&&e.showProgress&&(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:1},children:c().range(0,g.length).map((e,t)=>(0,i.jsx)(a.A,{sx:{background:e===f?b.palette.progressBlipSelected.main:b.palette.progressBlipUnselected.main,width:"".concat(v[+(e===f)],"em"),height:"".concat(v[+(e===f)],"em"),borderRadius:"".concat(v[+(e===f)]/2,"em")}},"sequence-blip-".concat(e,"-").concat(l[e].qid)))})]})}):null}},63608:(e,t,n)=>{n.d(t,{G:()=>I,A:()=>T});var i=n(95155),r=n(73017),o=n(18932),s=n(29999),a=n(33427),l=n(25789),c=n(80357),d=n(50355),u=n(41477),p=n(13664),h=n(27855),g=n(27747),m=n(99496),x=n(60193),f=n(80317),y=n(78095),b=n(12115),v=n(74434),w=n(68307),j=n(74084),A=n(70439),k=n(54884);let S=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,C=()=>(0,i.jsx)(A.A,{children:(0,i.jsx)("svg",{focusable:"false","aria-hidden":"true","data-testid":"CheckBoxBlankIcon",children:(0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5",fill:"white"})})});var I=function(e){return e[e.text=0]="text",e[e.email=1]="email",e}({});let D=(e,t)=>({...e,jsonValue:{answers:[{key:"text",stringValue:t.answer},...t.checks.map(e=>({key:e.key,stringValue:e.text,booleanValue:e.checked}))]}}),E=(e,t)=>{var n,i;return{answer:null==(i=e.jsonValue)||null==(n=i.answers.find(e=>"text"===e.key))?void 0:n.stringValue,checks:t.map(t=>{var n,i,r;return{key:t.key,text:t.text,initial:t.initial,checked:null!=(r=null==(i=e.jsonValue)||null==(n=i.answers.find(e=>e.key===t.key))?void 0:n.booleanValue)?r:t.initial,required:t.required}})}};function T(e){var t;let{answers:n}=(0,r.Ay)(e.qids.qid),[A,T]=(0,b.useState)((0,r.fV)(n,e.qids,e.question.pii)),[q,P]=(0,b.useState)({answer:void 0,checks:[]}),[R,F]=(0,b.useState)(!1),[_,W]=(0,b.useState)(!0),[B,N]=(0,b.useState)(e.role===o.sW.Client),[U,V]=(0,b.useState)(!1),[O,L]=(0,b.useState)(!1),[M,z]=(0,b.useState)([]),[K,H]=(0,b.useState)(),[G,J]=(0,b.useState)(!1),Z=()=>{J(!1)};(0,b.useEffect)(()=>{"virtualKeyboard"in navigator&&(navigator.virtualKeyboard.overlaysContent=!0)},[]),(0,b.useEffect)(()=>{P(E(A,e.checkboxes))},[A,e.checkboxes]);let $=()=>{var t,n;let i=[...((e,t)=>{if(console.debug("Validating checkboxes",e),void 0===e)return["Checkbox data undefined."];let n=e.filter(e=>e.checked).length,i=e.map((e,t)=>e.required&&!e.checked?"The ".concat((0,j.V)(t+1)," checkbox is required."):null).filter(e=>null!==e).map(e=>e),r=[];return n<t&&r.push("Please select at least ".concat(t," ").concat(1===t?"checkbox":"checkboxes",".")),[...i,...r]})(q.checks,e.minCheckboxes),...((e,t,n,i,r)=>{let o=[],s=null!=t?t:"";switch(e){case I.text:let a=n?s.length>0?null:"Please enter an answer.":null;null!==a&&o.push(a),(0,k.s)(i)&&!0!==new RegExp(i).test(s)&&o.push("".concat(null!=r?r:"Validation error","."));break;case I.email:let l=S.test(s.trim()),c=n?s.trim().length>0&&l?null:"Please enter a valid email address.":0===s.trim().length||l?null:"Please enter a valid email address.";null!==c&&o.push(c);break;default:throw"Unsupported TextInputType"}return o})(e.type,q.answer,e.textRequired,e.pattern,e.patternErrorMessage)],r=(null!=(n=null==(t=q.answer)?void 0:t.length)?n:0)>0;return W(!O||0===i.length&&(r||!e.textRequired)),z(i),0===i.length};(0,b.useEffect)(()=>{O&&$()},[q]);let Q=async()=>{if(e.role===o.sW.Client&&_){if(L(!0),$()){let t=D(A,q);console.debug("Submitting TextInput",t),F(!0),e.onAnswer(t).then(t=>{if(console.debug("Answer submitted ".concat(t?"ok":"error")),console.debug("Received answer response",t),null!==t)P(E(t,e.checkboxes));else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{F(!1)})}}else console.warn("Only participants can submit answers")},Y=async()=>{let t=D(A,{...q,answer:void 0,checks:[]});F(!0),e.onAnswer(t).then(t=>{if(console.debug("Answer submitted ".concat(t?"ok":"error")),console.debug("Received answer response",t),null!==t)P(E(t,e.checkboxes));else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{F(!1)})};(0,b.useEffect)(()=>{H(M.join(" ")),V(M.length>0)},[M]);let X={maxLength:e.maxLength,minLength:e.minLength,pattern:e.pattern};return(0,l.A)(),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(c.A,{className:"stretch",sx:{width:"100%",height:e.fullHeight?"100%":"initial",display:"flex",flexDirection:"column",justifyContent:"center"},children:[(e.question.explanation||e.question.instruction||e.question.question)&&(0,i.jsx)(c.A,{sx:{mb:4},children:(0,i.jsx)(v.A,{content:e.question})}),(0,i.jsx)(d.A,{label:e.label,variant:"outlined",defaultValue:q.answer,helperText:K,type:1===e.type?"email":"text",onChange:e=>{P({...q,answer:e.target.value})},error:U,color:"buttonStandard",autoComplete:"off",InputProps:{sx:{background:"white",fontSize:"2rem"}},InputLabelProps:{sx:{fontSize:"2rem","&.MuiOutlinedInput-notchedOutline":{fontSize:"2rem"}}},sx:{mb:2},minRows:e.minRows,multiline:e.multiline,slotProps:{htmlInput:X}}),q.checks.map((t,n)=>(0,i.jsx)(c.A,{display:"flex",flexDirection:"row",children:(0,i.jsx)(u.A,{control:(0,i.jsx)(p.A,{checked:t.checked,onChange:(e,n)=>{var i;let r;return i=t.key,void((r={...q,checks:[...q.checks]}).checks.find(e=>e.key===i).checked=n,P(r))},icon:e.forceCheckboxesWhite?(0,i.jsx)(C,{}):void 0}),label:t.text})},"checkbox-".concat(e.qids.qid,"-").concat(n,"-").concat(t.key))),e.information&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.A,{variant:"text",fullWidth:!1,color:"buttonStandard",sx:{textDecoration:"underline",alignSelf:"start",mt:2},startIcon:(0,i.jsx)(a.A,{}),onClick:()=>J(!0),children:e.information.heading}),(0,i.jsx)(g.A,{fullWidth:!0,maxWidth:"md",open:G,onClose:Z,children:(0,i.jsxs)(m.A,{children:[(0,i.jsx)(c.A,{style:{position:"absolute",top:0,right:0},children:(0,i.jsx)(x.A,{"aria-label":"close",onClick:Z,children:(0,i.jsx)(s.A,{})})}),(0,i.jsx)(c.A,{sx:{p:2},display:"flex",flexDirection:"column",children:e.information.body.map((t,n)=>(0,i.jsx)(f.A,{variant:"slideInfoText",align:"left",dangerouslySetInnerHTML:{__html:(0,y.A)(t)}},"".concat(e.qids.qid,"-info-body-").concat(n)))})]})})]}),e.maxLength&&e.maxLengthCounter&&(0,i.jsx)(f.A,{sx:{margin:"0 !important",textAlign:"left"},variant:"body1",children:"".concat((null==(t=q.answer)?void 0:t.length)||0," / ").concat(e.maxLength)}),(0,i.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",gap:1,justifyContent:"end",alignItems:"end"},children:[e.skipText&&(0,i.jsx)(w.A,{inline:!0,busy:R,onSubmit:Y,large:!0,variant:"outlined",text:e.skipText,enabled:!0}),(0,i.jsx)(w.A,{inline:!0,busy:R,onSubmit:Q,large:!0,text:e.submitText,enabled:!O||_})]})]})})}},66622:(e,t,n)=>{n.d(t,{A:()=>k});var i=n(95155),r=n(80357),o=n(12115),s=n(24274),a=n(3207),l=n(37440),c=n(27747),d=n(2021),u=n(99496),p=n(73224),h=n(66370),g=n(27855),m=n(72970),x=n(78211),f=n(62652),y=n(80317),b=n(39970),v=n(29518);let w={a:e=>(0,i.jsx)(l.A,{href:e.href,rel:"noopener",sx:{color:"#000"},target:"_blank",children:e.children}),h1:e=>(0,i.jsx)(y.A,{sx:{fontSize:"3rem",marginBottom:"1.25rem"},variant:"h1",children:e.children}),h2:e=>(0,i.jsx)(y.A,{sx:{fontSize:"1.875rem",marginBottom:"1.5rem",marginTop:"3.25rem","&:first-of-type":{marginTop:"2.25rem"}},variant:"h2",children:e.children}),li:e=>(0,i.jsx)(b.Ay,{sx:{display:"list-item",paddingBottom:"0",paddingTop:"0"},children:e.children}),ol:e=>(0,i.jsx)(v.A,{component:"ol",start:e.start,sx:{listStyleType:"lower-alpha",marginTop:"0",paddingBottom:"0",paddingInlineStart:"2rem",paddingTop:"0"},children:e.children}),p:e=>(0,i.jsx)(y.A,{sx:{marginBottom:"1.25rem"},variant:"body3",children:e.children}),ul:e=>(0,i.jsx)(v.A,{sx:{listStyleType:"disc",paddingBottom:"0",paddingInlineStart:"2rem",paddingTop:"0"},children:e.children})};function j(){let{t:e}=(0,s.Bd)(),{language:t}=(0,o.useContext)(x.c),[n,r]=(0,o.useState)(!1),[y,b]=(0,o.useState)(void 0),v=t||m.Rg||m.Nm;(0,o.useEffect)(()=>{fetch("/privacy-notice-".concat(v,".md")).then(e=>{if(!0===e.ok)return e.text();throw Error("Response not OK")}).then(e=>{b(e)}).catch(t=>{console.error("Error fetching privacy notice: ",t),b(e("onboarding.privacyNotice.errorLoading",{email:"collective.intelligence@nesta.org.uk"}))})},[]);let j=()=>{r(!1)};return void 0!==y?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{color:"#fff",href:"#privacy-notice",onClick:e=>{e.preventDefault(),r(!0)},variant:"body3",children:(0,i.jsx)(f.A,{i18nKey:"onboarding.privacyNotice.link"})}),(0,i.jsxs)(c.A,{"aria-labelledby":"privacy-notice-dialog-title",maxWidth:"md",onClose:j,open:n,scroll:"paper",children:[(0,i.jsx)(d.A,{id:"privacy-notice-dialog-title",children:(0,i.jsx)(f.A,{i18nKey:"onboarding.privacyNotice.heading"})}),(0,i.jsx)(u.A,{dividers:!0,sx:{padding:"0"},children:(0,i.jsx)(p.A,{color:"#000",component:"div",ref:e=>{null!==e&&e.focus()},sx:{padding:"2.5rem",":focus-visible":{outline:"none"}},tabIndex:0,variant:"body3",children:(0,i.jsx)(a.oz,{components:w,children:y})})}),(0,i.jsx)(h.A,{children:(0,i.jsx)(g.A,{color:"buttonStandard",onClick:j,sx:{fontSize:"1rem"},children:(0,i.jsx)(f.A,{i18nKey:"button.close"})})})]})]}):null}function A(e){let[t,n]=(0,o.useState)(!1),[s,m]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{fetch(e.workshopInformationUrl).then(e=>{if(!0===e.ok)return e.text();throw Error("Response not OK")}).then(e=>{m(e)}).catch(e=>console.error("Error fetching workshop information: ",e))},[e.workshopInformationUrl]);let x=()=>{n(!1)};return void 0!==s?(0,i.jsxs)(r.A,{sx:{borderLeft:"1px solid #ffffffaa",marginLeft:"1rem",paddingLeft:"1rem"},children:[(0,i.jsx)(l.A,{color:"#fff",href:"#workshop-information",onClick:e=>{e.preventDefault(),n(!0)},variant:"body3",children:(0,i.jsx)(f.A,{i18nKey:"onboarding.workshopInformationLink"})}),(0,i.jsxs)(c.A,{"aria-labelledby":"workshop-information-dialog-title",maxWidth:"md",onClose:x,open:t,scroll:"paper",children:[(0,i.jsx)(d.A,{id:"workshop-information-dialog-title",children:(0,i.jsx)(f.A,{i18nKey:"onboarding.workshopInformationLink"})}),(0,i.jsx)(u.A,{dividers:!0,sx:{padding:"0"},children:(0,i.jsx)(p.A,{color:"#000",component:"div",ref:e=>{null!==e&&e.focus()},sx:{padding:"2.5rem",":focus-visible":{outline:"none"}},tabIndex:0,variant:"body3",children:(0,i.jsx)(a.oz,{components:w,children:s})})}),(0,i.jsx)(h.A,{children:(0,i.jsx)(g.A,{color:"buttonStandard",onClick:x,sx:{fontSize:"1rem"},children:(0,i.jsx)(f.A,{i18nKey:"button.close"})})})]})]}):null}function k(e){var t;let n=null==(t=e.background)||t;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(r.A,{sx:{width:"100%",height:"100%",backgroundImage:n?"url(/images/zg-poster.png)":void 0,backgroundSize:"cover",backgroundPosition:"center",position:"relative",overflow:"hidden"},children:[(0,i.jsx)(r.A,{sx:{position:"absolute",left:0,top:0,width:"50%",bottom:0,backgroundColor:"#3E7075CC"}}),e.rightHalfBackground&&(0,i.jsx)(r.A,{sx:{position:"absolute",right:"0",top:0,width:"50%",bottom:0,backgroundColor:e.rightHalfBackground}}),(0,i.jsxs)(r.A,{sx:{position:"absolute",left:"5%",right:"5%",top:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",overflowY:"auto"},children:[(0,i.jsx)(r.A,{sx:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"row",alignItems:"start"},children:[(0,i.jsx)(r.A,{sx:{flexGrow:1,flexBasis:0,p:2,pr:"10%"},children:e.children}),(0,i.jsx)(r.A,{sx:{flexGrow:1,flexBasis:0,p:2},children:e.rightPanel})]})}),(0,i.jsxs)(r.A,{className:"onboarding-full-width-footer-container",sx:{display:"flex",flexDirection:"row",pl:2,pb:4},children:[e.privacyNotice&&(0,i.jsx)(j,{}),e.workshopInformationUrl&&(0,i.jsx)(A,{workshopInformationUrl:e.workshopInformationUrl})]})]})]})})}},67230:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(95155),r=n(74577),o=n(80317);let s=e=>{let t=e["data-index"],n=e.ownerState.marks[t],s=e.ownerState.marks.length,a={...e.style,width:"".concat(100/s,"%"),wordWrap:"normal",whiteSpace:"wrap"};return(0,i.jsx)(r.xO,{...e,style:a,children:(0,i.jsx)(o.A,{variant:"sliderMark",style:{display:"block",wordWrap:"normal",whiteSpace:"wrap"},children:n.label})})}},67370:(e,t,n)=>{n.d(t,{A:()=>v,x:()=>b});var i=n(95155),r=n(73017),o=n(54884),s=n(90775),a=n(16751),l=n(25789),c=n(90073),d=n(83958),u=n(97853),p=n(46671),h=n.n(p),g=n(12115),m=n(79952),x=n(31240),f=n(74434),y=n(76150),b=function(e){return e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical",e}({});function v(e){var t,n,b,v,w;let{answers:j}=(0,r.Ay)(e.qids.qid),[A,k]=(0,g.useState)(),S=h().max(null==A?void 0:A.map(e=>e.votes)),{ref:C,height:I}=(0,m.A)();(0,g.useEffect)(()=>{switch(e.inputType){case y.zv.keyed:k((0,y.fo)(j,e.options,e.sorting));break;case y.zv.categorical:k((0,y.hG)(j,e.categories,e.range,e.sorting));break;case y.zv.numerical:k((0,y.xT)((0,y.DU)(j,e.range,e.sorting)));break;default:throw"Unsupported GraphInputType"}},[j,e.categories,e.inputType,e.range]);let D={"& .MuiBarLabel-root":{fill:"white",fontWeight:"bolder"},["& .".concat(d.u.line)]:{strokeDasharray:"5 3",strokeWidth:1}},E={bar:{rx:4,ry:4}},[T,q]=(0,g.useState)(1===e.orientation),P=e=>{q("vertical"===e)},R={tickLabelStyle:{fontSize:null!=(n=e.categoriesLegendFontSize)?n:"1rem"}},F={tickInterval:h().range(0,1e3,1),tickLabelInterval:e=>(0,p.isInteger)(e),valueFormatter:e=>"".concat(e.toFixed(0)),tickLabelStyle:{fontSize:null!=(b=e.valuesLegendFontSize)?b:"1rem"}},_={disableLine:!0,disableTicks:!0,position:"none"},W=void 0,B=!(0,o.s)(S)||S<25,N=(0,l.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(c.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",gap:1},children:[e.question&&(0,i.jsx)(f.A,{content:e.question}),(0,i.jsx)(c.A,{ref:C,sx:{flexGrow:1,overflow:"hidden"},children:(0,i.jsxs)(c.A,{children:[(0,o.s)(A)&&T&&(0,i.jsx)(u.E,{layout:"vertical",height:I,xAxis:[{...R,dataKey:"category",height:null!=(v=e.xAxisHeight)?v:60}],yAxis:[{...F,..._}],dataset:A,series:[{dataKey:"votes",label:W,color:N.palette.secondary.main}],barLabel:"value",sx:{...D},slotProps:{...E},grid:{vertical:!1,horizontal:B}}),(0,o.s)(A)&&!T&&(0,i.jsx)(u.E,{layout:"horizontal",height:I,yAxis:[{...R,dataKey:"category",width:null!=(w=null==(t=e.margin)?void 0:t.left)?w:150}],xAxis:[{...F,..._}],dataset:A,series:[{dataKey:"votes",label:W,color:N.palette.secondary.main}],barLabel:"value",sx:{...D},slotProps:{...E},grid:{vertical:B,horizontal:!1}})]})}),e.showOrientationControls&&(0,i.jsxs)(c.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center"},children:[(0,i.jsx)(x.A,{btnKey:"vertical",onClick:P,content:(0,i.jsx)(a.A,{}),showText:!1,variant:T?"contained":"outlined",disabled:T,size:"small"}),(0,i.jsx)(x.A,{btnKey:"horizontal",onClick:P,content:(0,i.jsx)(s.A,{}),showText:!1,variant:T?"outlined":"contained",disabled:!T,size:"small"})]})]})})}},68307:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(95155),r=n(80357),o=n(31240);function s(e){let t=()=>{var t;return(0,i.jsx)(o.A,{btnKey:"submit",btnText:e.text,busy:e.busy,disabled:!e.enabled,variant:null!=(t=e.variant)?t:"contained",size:!0===e.large?"large":"medium",sx:e.sx,onClick:t=>e.onSubmit?e.onSubmit():null})},n="left"===e.alignment?"flex-start":"right"===e.alignment?"flex-end":"stretch";return(0,i.jsxs)(i.Fragment,{children:[e.inline&&(0,i.jsx)(t,{}),!e.inline&&(0,i.jsx)(r.A,{sx:e.sx,display:"flex",flexDirection:"row",justifyContent:n,children:(0,i.jsx)(t,{})})]})}},72970:(e,t,n)=>{n.d(t,{Nm:()=>a,Rg:()=>l,Ay:()=>c});var i=n(30338),r=n(24274);let o=JSON.parse('{"button":{"close":"Close","continue":"CONTINUE","getStarted":"GET STARTED","reconnect":"Reconnect","reload":"Reload page","submit":"Submit","goFullScreen":"Go full screen","exitFullScreen":"Exit full screen","retryUpload":"Retry upload","unsure":"Unsure","lowerAllHands":"Lower all hands","lowerHand":"Lower hand","lowerUserHand":"Lower {{name}}\'s hand","muteAll":"Mute all","raiseHand":"Raise hand"},"connectivityCheck":{"failure":{"heading":" Sorry, there\'s a problem","message":"There seems to be a problem with your connection to the workshop."},"fixGuidance":{"checkAgain":"To check again, just reload this page.","message":"To fix this, you could try:","mobileHotspot":"Tether to your phone\'s mobile hotspot.","wiFiNetwork":"A different network, e.g. guest Wi-Fi, or your home Wi-Fi."},"loading":"Checking your connection, please wait a moment.","success":"Your workshop connection is working well ","supportEmail":{"bodyPart1":"Hi Workshop Tech Team,%0D%0A%0D%0AI ran the workshop connectivity checker for an upcoming workshop that I\'m taking part in.%0D%0A%0D%0AThere seems to be a problem with:%0D%0A%0D%0A","bodyPart2":"%0D%0AMy workshop date is: [please enter your workshop date]%0D%0A%0D%0AMy workshop time is: [please enter your workshop time]%0D%0A%0D%0APlease get back to me ASAP via email or [please enter your phone number].%0D%0A%0D%0AMany thanks,%0D%0A%0D%0A[please enter your name]"},"techGuidance":{"contactUs":"If your workshop is starting soon, please email us and we will try to solve the issue quickly:","contactUsCopyEmail":"Copy email address","heading":"If you\'re still stuck","unblock":"Please ask your IT department to unblock the following:"},"title":"Workshop connectivity check","videoCallCheck":"Please also check your audio and camera settings:","videoCallCheckCta":"Check settings","videoCallCheckCtaTip":"(This will open the Amazon Chime Readiness Checker.)"},"label":{"date":"DATE","time":"TIME"},"field":{"yourName":"Your name"},"onboarding":{"warnings":{"*":{"description":" This could have been caused by a poor internet connection","advice":"Please check your wifi or mobile network signal strength and reload this page."},"ZgSessionUserProvider":{"description":" Authorisation did not succeed","advice":["If you are a facilitator, please log in with your facilitator account and try again.","If you are a participant, please contact support for assistance."]},"ZgStaticSessionDataProvider":{"description":" Unable to access information about this workshop session","advice":"Please confirm that you are using the correct url for your workshop."},"ZgServerTimeProvider":{"description":" Unable to synchronise clock with the server","advice":"This is required to play back videos and other media in sync with other participants."},"ZgStaticSessionContentProvider":{"description":" Unable to retrieve session content","advice":"Videos and other media are required to participate in the workshop. This can take a few minutes, and needs a good internet connection."},"ZgResilientWssConnectionProvider":{"description":" Unable to establish a live connection to the workshop","advice":"This is required to participate in the workshop."}},"welcomeTo":"WELCOME TO","loadingWorkshop":"Loading workshop information...","almostThere":"Almost there","pleaseEnterName":"Please enter your name","pleaseEnterNameExplanation":"This is so we know what to call you during the session, your name will not be saved or stored","thanks":"THANKS","youAreAboutToJoin":"YOU ARE ABOUT TO JOIN","thisWorkshopIsClosed":"This workshop is closed.","thisWorkshopIsOpen":"This workshop is open.","pressJoinToEnter":"Press JOIN WORKSHOP to enter.","youAreRemoved":"You have been removed from this workshop.","joinWorkshop":"JOIN WORKSHOP","leaveWorkshop":"LEAVE WORKSHOP","waitingForOpen":"Waiting for the host to begin the session. Please wait...","supportInfoHeading":"Support information","supportInfoText1":"If your workshop start time has passed and you are still waiting to enter the workshop, it\'s possible your device has become disconnected. Please check your internet connection, and use the reconnect button to try again.","supportInfoText2":"If you are still unable to enter the workshop, please check your invite for technical support contact information. We may ask you to reload the page.","privacyNotice":{"heading":"Zeitgeist Privacy Notice","link":"Privacy notice","errorLoading":"# Privacy notice unavailable\\n\\nWe\'re sorry, we should be able to show you a privacy notice here, but for some reason it\'s unavailable.\\n\\nPlease email [{{email}}](mailto:{{email}}) to let us know."},"workshopInformationLink":"Workshop information","sessionClosed":{"sessionIsClosed":"This workshop is now closed.","sessionIsClosedRegisterLinkAvailable":"This workshop is now closed, but please join us for a future session.","encouragement":"Use one of these methods to register, and please share with friends and family.","visitWebsite":"Visit the website","orScanQrCode":"Or scan the QR code","signUpText":"Sign up for more workshops","emailUs":"Email us at"},"preview":{"audio":{"prompt":"Your mic level"}}},"workshop":{"leaveConfirm":"Are you sure you want to leave the workshop?","leaveCta":"LEAVE THE WORKSHOP","participantLeftHeading":"Thank you for participating in this workshop!","participantLeftGuidance":"Feel free to close this tab. Or if you didn\'t mean to leave, click below to rejoin.","rejoinCta":"Rejoin workshop","returnCta":"RETURN TO THE WORKSHOP"},"videoCall":{"outcomeMessages":{"joining":"Joining the workshop video call...","interaction":{"title":"Are you there?","content":"Please click anywhere in this window to let us know you are ready to join the meeting."},"failed":"Failed to connect to the meeting. Please reload the page.","ended":"This meeting has ended.","joinedFromAnotherDevice":"You appear to have joined from another tab. Please close all other tabs and reload the page.","terminalFailure":"Unable to connect to the meeting. Please reload the page.","left":"You have left the meeting."}},"poll":{"pointsAllocation":{"remaining":"{{numberOfPoints}} points remaining"},"upDown":{"notSure":"Unsure"}},"demographic":{"multi-select":{"default-selection-item-prompt":"Please select an option","add-item":"Add","remove-item":"Remove"},"overview":{"submit":"Submit"},"input":{"submit":"Confirm","ratherNotSay":"I would rather not say"}},"audio":{"audioInputSelection":"Microphone","audioOutputSelection":"Speaker","enableMic":"Enable microphone","muteMic":"Mute microphone","reduceBackgroundNoise":"Reduce background noise","settingsMenu":"Audio settings","muted":"Muted"},"audioRecorder":{"checkMic":"Check microphone","preferredMicProblem":"Your browser seems to be using the wrong microphone. Please check your settings and select the Anker PowerConf device."},"transcribing":{"automaticTranscribing":"Automatic transcribing","downloadTranscription":"Download transcription","startTranscribing":"Start transcribing","stopTranscribing":"Stop transcribing","transcribing":"Transcribing","transcriptionId":"Transcription id","transcribingInformation":"Transcribing information","transcriptionCouldNotUpload":"The transcription could not be uploaded","transcriptionUploadFailed":"Transcription upload failed"},"techSupport":{"buttons":{"problemSolved":"Problem solved","stillNeedHelp":"I still need help","support":"Support"},"chooseProblem":"Choose from the list","email":"Email:","phone":"Phone:","pleaseCheck":"Please check the following:","problems":{"cannotHearOthers":{"description":"Audio: I can\'t hear other people","heading":"We\'re sorry that you can\'t hear other people","tip1Heading":"Check if your device\'s sound is switched on","tip1Body":"Look for a volume icon on your screen or keyboard.","tip2Heading":"Check your audio settings","tip2Body":"Click the arrow next to the microphone icon below, then select your preferred speaker from the list.","tip3Heading":"Check your tab isn\'t muted","tip3Body":"In your browser, right-click the tab and look for an \'Unmute site\' option."},"differentProblem":{"description":"A different problem"},"othersCannotHearMe":{"description":"Audio: other people can\'t hear me","heading":"We\'re sorry that other people can\'t hear you","tip1Heading":"Check your microphone isn\'t muted","tip1Body":"Look for the microphone button at the bottom of your screen. If it is red, others won\'t be able to hear you.","tip2Heading":"Check your microphone settings","tip2Body":"Click the arrow next to the microphone icon below, then select your preferred microphone from the list."}},"teamIsAvailable":"Our team is on hand and will get back to you as soon as possible."},"video":{"blurBackground":"Blur my background","disableCamera":"Disable camera","enableCamera":"Enable camera","settingsMenu":"Camera settings","videoInitFailed":"Video failed to initialise.","videoInputSelection":"Camera","videoManualControl":"Please use the video controls to start your video.","videoReadiness":"Your facilitator will start the video as soon as everybody is ready...","notAllReady":"Not all participants are ready to play video."},"upDownResult":{"divisiveDescription":"These statements split the room...","supportedDescription":"Most people agreed with...","opposedDescription":"Most people disagreed with...","unansweredDescription":"Most did not answer..."},"userNametags":{"banned":"banned","joining":"joining","me":"me"},"feedback":{"handLowered":"Your hand has been lowered"}}'),s=JSON.parse('{"button":{"continue":"DEVAM ET","getStarted":"Balayn","reconnect":"Tekrar balan","submit":"G\xf6nder","goFullScreen":"Tam ekran moduna ge\xe7","exitFullScreen":"Tam ekran kapat","unsure":"Fikrim yok"},"label":{"date":"Tarih","time":"Saat"},"field":{"yourName":"Adnz"},"onboarding":{"welcomeTo":"Ho Geldiniz","loadingWorkshop":"At\xf6lye bilgilerini y\xfckl\xfcyor...","almostThere":"Neredeyse bitti","pleaseEnterName":"L\xfctfen adnz girin","pleaseEnterNameExplanation":"Bu, seans srasnda size nasl hitap edeceimizi bilmek i\xe7indir, adnz kaydedilmeyecek veya saklanmayacaktr","thanks":"Teekk\xfcrler","youAreAboutToJoin":"Katlmak \xfczeresiniz","waitingForOpen":"Sunucuyu seans balatmay bekliyor. L\xfctfen bekleyin."},"poll":{"pointsAllocation":{"remaining":"{{numberOfPoints}} puan kald"},"upDown":{"notSure":"Fikrim yok"}},"video":{"videoInitFailed":"Video balatlamad","videoManualControl":"Videonuzu balatmak i\xe7in video kontrollerini kullann l\xfctfen","videoReadiness":"Kolaylatrcnz herkes hazr olduunda videoyu balatacak..."}}'),a="en",l="en";if(!l)throw"No language found in environment";let c=e=>(i.Ay.isInitialized||i.Ay.use(r.r9).init({resources:{en:{common:o},tr:{common:s}},lng:null!=e?e:l,fallbackLng:a,defaultNS:"common",returnObjects:!0}),i.Ay)},73017:(e,t,n)=>{n.d(t,{Ay:()=>c,Qy:()=>l,_i:()=>a,fV:()=>s});var i=n(12115),r=n(98314);let o=e=>{let t={};return e.forEach(e=>{var n;t[e.questionId]=[...null!=(n=t[e.questionId])?n:[],e]}),t},s=(e,t,n)=>{var i;return null!=(i=a(e,t))?i:((e,t)=>{let{sid:n,pid:i,qid:r}=e;return{id:void 0,created:void 0,deliberationSessionId:n,questionId:r,participantId:i,jsonValue:void 0,pII:t}})(t,null!=n&&n)},a=(e,t)=>null==e?void 0:e.find(e=>e.questionId===t.qid&&e.participantId===t.pid),l=e=>(null==e?void 0:e.jsonValue)!==void 0;function c(e){var t;let{session:n}=(0,i.useContext)(r.$),[s,a]=(0,i.useState)(null!=(t=n.answers)?t:[]),[l,c]=(0,i.useState)(o(n.answers));return(0,i.useEffect)(()=>{var t;a(void 0!==e?n.answers.filter(t=>t.questionId===e):[]),c(null!=(t=o(n.answers))?t:{})},[n.answers]),{answers:s,allAnswers:l}}},74084:(e,t,n)=>{n.d(t,{V:()=>i});let i=e=>{let t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}},74434:(e,t,n)=>{n.d(t,{A:()=>s});var i=n(95155),r=n(80357),o=n(80317);function s(e){var t,n,s,a,l,c;return(0,i.jsx)(i.Fragment,{children:((null==(t=e.content)?void 0:t.explanation)||(null==(n=e.content)?void 0:n.instruction)||(null==(s=e.content)?void 0:s.question))&&(0,i.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch"},children:[e.content.instruction&&(0,i.jsx)(o.A,{variant:"questionInstruction",align:null!=(a=e.forceAlign)?a:"center",component:"div",sx:{alignSelf:"stretch",textWrap:"balance",...e.sx},children:e.content.instruction}),e.content.question&&(0,i.jsx)(o.A,{variant:"questionPrompt",align:null!=(l=e.forceAlign)?l:"center",component:"div",sx:{alignSelf:"stretch",textWrap:"balance",...e.sx},children:e.content.question}),e.content.explanation&&(0,i.jsx)(o.A,{variant:"questionExplanation",align:null!=(c=e.forceAlign)?c:"center",component:"div",sx:{alignSelf:"stretch",textWrap:"balance",...e.sx},children:e.content.explanation})]})})}},74821:(e,t,n)=>{n.d(t,{m:()=>i});class i{constructor(){this.isLocked=!1,this.acquisitions=0,this.releases=0,this.queue=[],this.acquire=()=>new Promise(e=>{this.isLocked?this.queue.push(()=>{this.acquisitions++,e()}):(this.isLocked=!0,this.acquisitions++,e())}),this.release=()=>{this.releases++,this.queue.length>0?this.queue.shift()():this.isLocked=!1}}}},76150:(e,t,n)=>{n.d(t,{DU:()=>u,fo:()=>c,hG:()=>d,xT:()=>f,zv:()=>s});var i=n(54884),r=n(46671),o=n.n(r),s=function(e){return e[e.categorical=0]="categorical",e[e.numerical=1]="numerical",e[e.keyed=2]="keyed",e}({});let a=e=>{var t,n;return o().range(e.lo,e.hi+(null!=(t=e.step)?t:1),null!=(n=e.step)?n:1)},l=e=>e.replace(/\\n/g,"\n"),c=(e,t,n)=>p(t.map(t=>({category:l(t.title),votes:m(e,t.key)})),n),d=(e,t,n,i)=>p(h(t,n).map((t,n)=>({category:l(t),votes:g(e,n)})),i),u=(e,t,n)=>p(a(t).map(t=>({value:t,votes:x(e,t)})),n),p=(e,t)=>{if((0,i.s)(t.sortOn)){switch(t.sortOn){case"category":(e=>e.length>0&&"category"in e[0]&&"votes"in e[0])(e)&&e.sort((e,t)=>e.category<t.category?-1:1);break;case"value":(e=>e.length>0&&"value"in e[0]&&"votes"in e[0])(e)&&e.sort((e,t)=>e.value<t.value?-1:1);break;case"votes":e.sort((e,t)=>e.votes-t.votes);break;default:throw"Unsupported sortOn: ".concat(t.sortOn)}"desc"===t.sortOrder&&e.reverse()}return e},h=(e,t)=>{let n=void 0!==e?e:void 0!==t?a(t).map(e=>"".concat(e)):void 0;if(void 0===n)throw"Cannot determine categories";return n.filter(e=>void 0!==e).map(e=>e)},g=(e,t)=>o().sum(e.map(e=>{var n;return o().sum(null==(n=e.jsonValue)?void 0:n.answers.filter(e=>e.index===t).map(e=>{var t;return null!=(t=e.numericValue)?t:0}))})),m=(e,t)=>o().sum(e.map(e=>{var n;return o().sum(null==(n=e.jsonValue)?void 0:n.answers.filter(e=>e.key===t).map(e=>{var t;return null!=(t=e.numericValue)?t:0}))})),x=(e,t)=>g(e,t),f=e=>e.map(e=>({category:"".concat(e.value),votes:e.votes}))},76452:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(98314),r=n(25612),o=n(84073),s=n(18414),a=n(12115);function l(e){let{session:t}=(0,a.useContext)(i.$),{user:n,deviceId:l,sessionToken:c}=(0,a.useContext)(o.yk),{api:d,start:u}=(0,a.useContext)(s.F$),p=(0,a.useContext)(r.j);return{kickUser:async i=>{try{e(!0);let r={action:"kick",sessionId:t.id,ticks:Date.now(),originator:l,parameters:{pid:i.deviceId}};await u(d.postFacilitatorAction(n.access_token,c,r,!1))}catch(e){console.warn(e)}finally{e(!1)}},lowerHandsAll:(e,n)=>{try{if(!p.sendMessage({action:"user-signals",content:{signal:{kind:"raiseHand"},signalAction:"remove",targetDeviceIds:e.map(e=>e.deviceId).filter(e=>e!==(null==n?void 0:n.deviceId))},sid:t.id,type:"user-signals-request"}))throw"Couldn't lower everybody's hands"}catch(e){console.warn(e)}},lowerHandUser:e=>{try{if(!p.sendMessage({action:"user-signals",content:{signal:{kind:"raiseHand"},signalAction:"remove",targetDeviceIds:[e.deviceId]},sid:t.id,type:"user-signals-request"}))throw"Couldn't lower ".concat(e.participantName,"'s hand")}catch(e){console.warn(e)}},muteAll:async()=>{try{e(!0);let i={action:"mute",sessionId:t.id,ticks:Date.now(),originator:l,parameters:{pids:["*"]}};await u(d.postFacilitatorAction(n.access_token,c,i,!1))}finally{e(!1)}},muteUser:async i=>{try{e(!0);let r={action:"mute",sessionId:t.id,ticks:Date.now(),originator:l,parameters:{pids:[i.deviceId]}};await u(d.postFacilitatorAction(n.access_token,c,r,!1))}catch(e){console.warn(e)}finally{e(!1)}}}}},77914:(e,t,n)=>{n.d(t,{T:()=>i});let i=(0,n(12115).createContext)({})},78055:(e,t,n)=>{n.d(t,{M:()=>r,t:()=>i});var i=function(e){return e[e.default=0]="default",e[e.deliberation=1]="deliberation",e}({});let r={index:0,activity:0,recordingId:void 0,notes:"",qids:[],secs:void 0,transitionSound:!1}},78211:(e,t,n)=>{n.d(t,{A:()=>a,c:()=>s});var i=n(95155),r=n(12115),o=n(23971);let s=(0,r.createContext)(null);function a(e){var t;let[n,a]=(0,r.useState)({language:null!=(t=e.searchParams.get("lang"))?t:void 0,voiceFocus:(0,o.$_)(e.searchParams.get("vf")),backgroundBlur:(0,o.$_)(e.searchParams.get("bb")),storage:e.searchParams.get("storage"),meetingDebug:(0,o.$_)(e.searchParams.get("md")),largeVideoCalls:(0,o.$_)(e.searchParams.get("lvc"))});return(0,i.jsx)(s.Provider,{value:n,children:e.children})}},79005:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(95155),r=n(62652),o=n(80357),s=n(80317),a=n(27855);function l(e){let t=!0===e.white?"white":"black",n=!0===e.white?{filter:"invert(100%) sepia(3%) saturate(594%) hue-rotate(149deg) brightness(117%) contrast(100%)"}:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.A,{sx:{mb:2},children:[e.welcome&&(0,i.jsx)(s.A,{variant:"body1",color:t,children:(0,i.jsx)(r.A,{i18nKey:"onboarding.welcomeTo"})}),(0,i.jsx)(s.A,{variant:"h2",color:t,children:e.session.sessionName})]}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"===e.layout?"column":"row"},gap:2,children:[(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",alignItems:"column"===e.layout?"start":"center",gap:1},children:[(0,i.jsx)("img",{src:"/icons/session-date.svg",style:n}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"===e.layout?"column":"row",alignItems:"column"===e.layout?"flex-start":"center",gap:1},children:[(0,i.jsx)(s.A,{variant:"body2",color:t,children:(0,i.jsx)(r.A,{i18nKey:"label.date"})}),(0,i.jsx)(s.A,{variant:"body1",style:{fontWeight:"bold"},color:t,children:new Date(e.session.sessionStartTime).toDateString()})]})]}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row",alignItems:"column"===e.layout?"start":"center",gap:1},children:[(0,i.jsx)("img",{src:"/icons/session-time.svg",style:n}),(0,i.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column"===e.layout?"column":"row",alignItems:"column"===e.layout?"flex-start":"center",gap:1},children:[(0,i.jsx)(s.A,{variant:"body2",color:t,children:(0,i.jsx)(r.A,{i18nKey:"label.time"})}),(0,i.jsx)(s.A,{variant:"body1",style:{fontWeight:"bold"},color:t,children:new Date(e.session.sessionStartTime).toLocaleTimeString()})]})]})]}),void 0!==e.onAdvance&&(0,i.jsx)(a.A,{variant:"contained",color:"primary",onClick:e.onAdvance,sx:{alignSelf:"start"},children:"Next"})]})}},79178:(e,t,n)=>{n.d(t,{$1:()=>y,$u:()=>p,Ap:()=>b,F8:()=>h,Fq:()=>v,Qs:()=>x,SP:()=>m,UI:()=>g,p1:()=>d,tX:()=>f,zd:()=>u});var i=n(56599),r=n(74879),o=n(78055),s=n(91396),a=n(63608),l=n(67370),c=n(76150);let d=(e,t)=>{if(void 0!==e){let i=(0,r.A)();if(void 0!==e.key&&null!==e.key){var n;return{...e,key:"".concat(t,"-").concat(null!=(n=e.key)?n:"undefined","+").concat(i)}}}},u=e=>e?Object.fromEntries(e.split(";").map(e=>e.trim().split(":").map(e=>e.trim()))):{},p=e=>e?Object.fromEntries(e.split(";").map(e=>e.trim().split(":").map(e=>e.trim()))):{},h=e=>{if(null!=e&&0!==e.length)return(0,i.q)(e,{columns:!1,skip_empty_lines:!0,trim:!0})[0]},g=e=>null==e?void 0:e.map((e,t)=>""===e?" ".repeat(t):e),m=e=>{let t=parseFloat(null!=e?e:"");return isNaN(t)?void 0:t},x=e=>{let t=null==e?void 0:e.toLowerCase(),n=s.a[t];if(void 0===n)throw console.error("Unknown slider input type: ".concat(e)),"Unknown slider input type: ".concat(e);return n},f=e=>{let t=null==e?void 0:e.toLowerCase(),n=c.zv[t];if(void 0===n)throw console.error("Unknown graph input type: ".concat(e)),"Unknown graph input type: ".concat(e);return n},y=e=>{let t=null==e?void 0:e.toLowerCase(),n=l.x[t];if(void 0===n)throw console.error("Unknown graph orientation: ".concat(e)),"Unknown graph orientation: ".concat(e);return n},b=e=>{let t=null==e?void 0:e.toLowerCase(),n=a.G[t];if(void 0===n)throw console.error("Unknown text input type: ".concat(e)),"Unknown text input type: ".concat(e);return n},v=e=>{let t=null==e?void 0:e.toLowerCase(),n=o.t[t];if(void 0===n)throw console.error("Unknown slide activity: ".concat(e)),"Unknown slide activity: ".concat(e);return n}},79200:(e,t,n)=>{n.d(t,{A:()=>a,F:()=>s});var i=n(95155),r=n(12115),o=n(69999);let s=(0,r.createContext)({allUserSignals:[]});function a(e){let[t,n]=(0,r.useState)([]),[a,l]=(0,r.useState)();return(0,r.useEffect)(()=>(o.A.on(o.m.User_Signals_Update,l),()=>{o.A.off(o.m.User_Signals_Update,l)}),[]),(0,r.useEffect)(()=>{if(void 0!==a&&a.type===o.m.User_Signals_Update){var e;e=a.data,n(t=>[...t.filter(t=>!e.some(e=>e.userSignalsId===t.userSignalsId)),...e])}},[a]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.Provider,{value:{allUserSignals:t},children:e.children})})}},79384:(e,t,n)=>{n.d(t,{A:()=>b});var i=n(95155),r=n(54884),o=n(90073),s=n(12115),a=n(79952),l=n(17448),c=n(46671),d=n.n(c),u=function(e){return e.FloatMandatoryTiles="float-mandatory-tiles",e.NoMandatoryBehaviours="no-mandatory-behaviours",e.RepeatMandatoryTiles="repeat-mandatory-tiles",e}({});function p(e){let t=(function(e){let t=[],n=e.availableWidth_px-2*e.padding_px,i=e.availableHeight_px-2*e.padding_px,r=Math.min(25,e.totalVideoTiles),o=e.slideSpan.cols*e.slideSpan.rows;for(let l=r+o;l>=o;l--)for(let r=e.slideSpan.cols+l;r>=e.slideSpan.cols;r--){let c=Math.ceil(l/r);if(c<e.slideSpan.rows)continue;let{tile_width_px:d,tile_height_px:u}=function(e,t,n,i,r,o){var s;let a=(e-(n-1)*r)/n,l=a/o;if((s=i)*l+(s-1)*r<=t)return{tile_width_px:a,tile_height_px:l};{let e=(t-(i-1)*r)/i;return{tile_width_px:e*o,tile_height_px:e}}}(n,i,r,c,e.gap_px,e.aspectRatio);if(d>=e.minTileWidth_px){var s,a;let n=l-o,i=(s=n,a=e.mandatoryTiles,0===s?"float-mandatory-tiles":s<2*a?"no-mandatory-behaviours":"repeat-mandatory-tiles");t.push({tileWidth_px:d,tileHeight_px:u,cols:r,rows:c,gap_px:e.gap_px,padding_px:e.padding_px,slideSpan:e.slideSpan,videoTileSlotsPerPage:n,pagingStrategy:i})}}return t})(e).map(e=>{var t;return{...e,score:(t=e).videoTileSlotsPerPage*t.tileWidth_px}}),n=d().maxBy(t,e=>e.score);return n?{inputs:e,grid:n}:void 0}function h(e){let{inputs:t,calculation:n,pageIndex:r}=e;return(0,i.jsxs)(o.A,{sx:{maxWidth:"100%",maxHeight:"100%",overflow:"auto",padding:2},children:[(0,i.jsx)("b",{children:"Slide"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("b",{children:"Max video tiles per page:"})," ",25,(0,i.jsx)("br",{}),(0,i.jsx)("b",{children:"Min tile width:"})," ",t.minTileWidth_px," (",n.inputs.minTileWidth_px.toFixed(1),"px)",(0,i.jsx)("br",{}),n.inputs.totalVideoTiles<=n.grid.videoTileSlotsPerPage?(0,i.jsx)("span",{style:{color:"green",fontWeight:"bold"},children:"All tiles shown"}):(0,i.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"Cannot show all tiles"}),(0,i.jsx)("br",{}),"Grid: ",n.grid.cols," cols x ",n.grid.rows," rows",(0,i.jsx)("br",{}),"Available space: ","".concat(t.availableWidth_px," x ").concat(t.availableHeight_px),(0,i.jsx)("br",{}),"Tile dimensions:"," ","".concat(n.grid.tileWidth_px.toFixed(1)," x ").concat(n.grid.tileHeight_px.toFixed(1)),(0,i.jsx)("br",{}),"Tiles requested: ",n.inputs.totalVideoTiles,(0,i.jsx)("br",{}),"Spaces per page: ",n.grid.videoTileSlotsPerPage,(0,i.jsx)("br",{}),"Page: ",r]})]})}var g=n(18932);function m(e){let{tile:t,index:n}=e;return(0,i.jsxs)(o.A,{sx:{padding:2},children:[(0,i.jsx)("b",{children:t.name}),(0,i.jsx)("br",{}),"Tile: #",n+1,(0,i.jsx)("br",{}),"Role: ",g.sW[t.role],t.local&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),"Local video stream"]})]})}let x=e=>e.mandatory.length+e.queued.length+e.active.length+e.inactive.length;function f(e){let[t,n]=(0,s.useState)(p({availableWidth_px:e.availableWidth_px,availableHeight_px:e.availableHeight_px,aspectRatio:e.aspectRatio,minTileWidth_px:e.minTileWidth_px,gap_px:e.gap_px,padding_px:e.padding_px,slideSpan:e.slideSpan,totalVideoTiles:x(e.arrangement),mandatoryTiles:e.arrangement.mandatory.length})),[o,a]=(0,s.useState)([]);return(0,s.useEffect)(()=>{console.debug("ZG-1680: ZgLargeVideoCallGrid recalculating grid",e),n(p({availableWidth_px:e.availableWidth_px,availableHeight_px:e.availableHeight_px,aspectRatio:e.aspectRatio,minTileWidth_px:e.minTileWidth_px,gap_px:e.gap_px,padding_px:e.padding_px,slideSpan:e.slideSpan,totalVideoTiles:x(e.arrangement),mandatoryTiles:e.arrangement.mandatory.length}))},[e]),(0,s.useEffect)(()=>{(0,r.s)(t)&&(console.debug("ZG-1680: ZgLargeVideoCallGrid updating pages",t),a(((e,t)=>{switch(t.grid.pagingStrategy){case u.FloatMandatoryTiles:return console.warn("TODO: float mandatory tiles over slide and warn: not all tiles visible"),[];case u.NoMandatoryBehaviours:{console.debug("Paging with no mandatory tiles");let n=[...e.mandatory,...e.queued,...e.active,...e.inactive],i=t.grid.videoTileSlotsPerPage;return d().chunk(n,i).map(e=>({grid:t,videoTiles:e}))}case u.RepeatMandatoryTiles:{console.debug("Paging with repeated mandatory tiles");let n=[...e.queued,...e.active,...e.inactive],i=t.grid.videoTileSlotsPerPage-e.mandatory.length,r=d().chunk(n,i).map(n=>({grid:t,videoTiles:e.mandatory.concat(n)}));return console.info(r),r}}})(e.arrangement,t)))},[t]),(0,s.useEffect)(()=>{e.updateTotalPages(o.length)},[o]),(0,i.jsx)(i.Fragment,{children:(0,r.s)(t)&&(0,i.jsx)(y,{inputs:e,pages:o,calculation:t,pageIndex:e.pageIndex})})}function y(e){let{inputs:t,pages:n,calculation:s,pageIndex:a}=e,c={display:"grid",maxWidth:t.availableWidth_px,maxHeight:t.availableHeight_px,gridAutoFlow:"row",gridTemplateColumns:"repeat(".concat(s.grid.cols,", ").concat(s.grid.tileWidth_px,"px)"),gridTemplateRows:"repeat(".concat(s.grid.rows,", ").concat(s.grid.tileHeight_px,"px)"),gap:"".concat(t.gap_px,"px"),overflow:"hidden"},d={objectFit:"contain",width:"".concat(s.grid.tileWidth_px,"px"),height:"".concat(s.grid.tileHeight_px,"px"),boxSizing:"border-box",border:"solid 1px grey",positionVisibility:"no-overflow",borderRadius:"0.4rem",backgroundColor:"darkgrey",color:"white",overflow:"hidden"},u={objectFit:"contain",width:"".concat(s.grid.tileWidth_px,"px"),height:"".concat(s.grid.tileHeight_px,"px"),boxSizing:"border-box",border:"solid 1px grey",positionVisibility:"no-overflow",borderRadius:"0.4rem",backgroundColor:"darkgrey",color:"white",overflow:"hidden",opacity:.5},p={...d,width:"".concat(s.grid.tileWidth_px*t.slideSpan.cols+s.grid.gap_px*(t.slideSpan.cols-1),"px"),height:"".concat(s.grid.tileHeight_px*t.slideSpan.rows+s.grid.gap_px*(t.slideSpan.rows-1),"px"),gridRowEnd:"span ".concat(t.slideSpan.rows),gridColumnEnd:"span ".concat(t.slideSpan.cols),overflow:"hidden",borderRadius:"0.4rem",backgroundColor:"white",color:"black"},g=n[Math.max(0,Math.min(a,n.length-1))],x=n.length>0?g:{grid:s,videoTiles:[]};return console.debug("ZG-1680: ZgPagingVideoCallGrid rendering page",a,x),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.A,{sx:c,children:[(0,i.jsxs)(o.A,{sx:p,children:[(0,r.s)(t.presentation)&&(0,i.jsx)(i.Fragment,{children:t.presentation}),!(0,r.s)(t.presentation)&&(0,i.jsx)(h,{inputs:t,calculation:s,pageIndex:a})]}),(0,r.s)(x)&&x.videoTiles.map((e,n)=>(0,i.jsxs)(o.A,{sx:d,children:["test"===t.mode&&(0,i.jsx)(m,{tile:e,index:n}),"chime"===t.mode&&(0,i.jsx)(l.Ay,{subscription:e.subscription})]},"tile-did-".concat(e.did))),(0,r.s)(x)&&Array.from({length:x.grid.grid.videoTileSlotsPerPage-x.videoTiles.length},(e,t)=>t).map(e=>(0,i.jsx)(o.A,{sx:u},"empty-tile-".concat(e)))]})})}function b(e){let[t,n]=(0,s.useState)(),{ref:l,width:c,height:d}=(0,a.A)();(0,s.useEffect)(()=>{var t;(0,r.s)(null==(t=window)?void 0:t.document)&&(0,r.s)(c)&&(0,r.s)(d)&&n({arrangement:e.arrangement,aspectRatio:e.aspectRatio,minTileWidth_px:e.minCellWidth_px,controlBarHeight_px:e.controlBarHeight_px,padding_px:e.padding_px,gap_px:e.gap_px,availableWidth_px:c,availableHeight_px:d,slideSpan:e.slideSpan,updateTotalPages:e.setTotalPages,pageIndex:e.pageIndex,activity:e.activity,enableExpandButton:e.enableExpandButton,presentation:e.presentation,mode:e.mode})},[l,c,d,e.arrangement,e.aspectRatio,e.minCellWidth_px,e.controlBarHeight_px,e.padding_px,e.gap_px,e.slideSpan,e.pageIndex,e.setTotalPages,e.activity,e.enableExpandButton,e.presentation,e.mode]);let u={overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,margin:"".concat(e.padding_px,"px")};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.A,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch",overflow:"hidden"},children:[(0,i.jsx)(o.A,{style:u,ref:l,children:t&&(0,i.jsx)(f,{...t})}),(0,i.jsx)(o.A,{style:{backgroundColor:"lightgrey",boxSizing:"border-box"},children:e.footerContent})]})})}},80431:(e,t,n)=>{n.d(t,{Ay:()=>y,O6:()=>g,Of:()=>m,Zm:()=>h,cA:()=>u,nI:()=>p,zJ:()=>x});var i=n(95155),r=n(12115),o=n(18932),s=n(78055),a=n(54884),l=n(98314),c=n(84073),d=n(18414);let u=()=>{let{revealIndex:e,setRevealIndex:t,targetIndex:n,setTargetIndex:i}=(0,r.useContext)(f);if(!(0,a.s)(t))throw Error("useRevealState should be used within ZgSessionLiveSlideDataProvider");return{revealIndex:e,setRevealIndex:t,targetIndex:n,setTargetIndex:i}},p=()=>{let{revealIndex:e,setTargetIndex:t}=(0,r.useContext)(f);if(!(0,a.s)(t))throw Error("useRevealControls should be used within ZgSessionLiveSlideDataProvider");return{revealIndex:e,setTargetIndex:t}},h=()=>{let{slideData:e}=(0,r.useContext)(f);if(!(0,a.s)(e))throw Error("useSlideData should be used within ZgSessionLiveSlideDataProvider");return{slideData:e}},g=()=>{let{setSlideData:e}=(0,r.useContext)(f);if(!(0,a.s)(e))throw Error("useSlideData should be used within ZgSessionLiveSlideDataProvider");return{setSlideData:e}},m=()=>{let{allSlideAnswerRules:e}=(0,r.useContext)(f);if(!(0,a.s)(e))throw Error("useSlideAnswerRules should be used within ZgSessionLiveSlideDataProvider");return{allSlideAnswerRules:e}},x=()=>{let{setAllSlideAnswerRules:e}=(0,r.useContext)(f);if(!(0,a.s)(e))throw Error("useWriteSlideAnswerRules should be used within ZgSessionLiveSlideDataProvider");return{setAllSlideAnswerRules:e}},f=(0,r.createContext)({});function y(e){let{role:t}=(0,r.useContext)(c.yk),{session:n}=(0,r.useContext)(l.$),{user:u,sessionToken:p,deviceId:h}=(0,r.useContext)(c.yk),[g,m]=(0,r.useState)({}),[x,y]=(0,r.useState)(s.M),[b,v]=(0,r.useState)(),[w,j]=(0,r.useState)();(0,r.useRef)(0);let{start:A,api:k}=(0,r.useContext)(d.F$);(0,r.useEffect)(()=>{t===o.sW.Controller&&S()},[]),(0,r.useEffect)(()=>{(0,a.s)(b)&&t===o.sW.Controller&&(C(b),I(b))},[b]);let S=()=>{let e=window.localStorage.getItem("RevealState-".concat(n.id));e&&j(JSON.parse(e).index)},C=e=>{if(t===o.sW.Controller){let t=JSON.stringify({index:e});window.localStorage.setItem("RevealState-".concat(n.id),t)}},I=async e=>{if(!(0,a.s)(u)||t!==o.sW.Controller||!(0,a.s)(n.id)||!(0,a.s)(p))return;let i={action:"set-slide-position",sessionId:n.id,ticks:Date.now(),originator:h,parameters:{indexh:e}};await A(k.postFacilitatorAction(u.access_token,p,i))};return(0,i.jsx)(f.Provider,{value:{allSlideAnswerRules:g,setAllSlideAnswerRules:m,slideData:x,setSlideData:y,revealIndex:b,setRevealIndex:v,targetIndex:w,setTargetIndex:j},children:e.children})}},84073:(e,t,n)=>{n.d(t,{Ay:()=>p,yk:()=>u});var i=n(95155),r=n(12115),o=n(74840),s=n(74879),a=n(18932),l=n(54884),c=n(18414),d=function(e){return e[e.Init=0]="Init",e[e.Authenticating=1]="Authenticating",e[e.AuthError=2]="AuthError",e[e.AuthNotRequired=3]="AuthNotRequired",e[e.Authenticated=4]="Authenticated",e[e.ExchangingJoinCode=5]="ExchangingJoinCode",e[e.JoinCodeError=6]="JoinCodeError",e[e.JoinCodeAccepted=7]="JoinCodeAccepted",e[e.Ready=8]="Ready",e}({});let u=(0,r.createContext)({});function p(e){var t,n;let[p,h]=(0,r.useState)(null!=(n=null==(t=window)?void 0:t.localStorage.getItem("DeviceId"))?n:(0,s.A)());(0,r.useEffect)(()=>{window&&window.localStorage.setItem("DeviceId",p)},[p]);let[g,m]=(0,r.useState)(0),[x,f]=(0,r.useState)(void 0),[y,b]=(0,r.useState)(e.role),[v,w]=(0,r.useState)(),[j,A]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[C,I]=(0,r.useState)({deviceId:p,joinCode:e.joinCode,role:y,state:g,user:x,sessionToken:v,noUserWarning:k});(0,r.useEffect)(()=>{I({...C,state:g})},[g]),(0,r.useEffect)(()=>{I({...C,user:x})},[x]),(0,r.useEffect)(()=>{I({...C,role:y})},[y]),(0,r.useEffect)(()=>{I({...C,sessionToken:v})},[v]),(0,r.useEffect)(()=>{I({...C,noUserWarning:k})},[k]);let D=(0,o.As)(),{api:E,start:T}=(0,r.useContext)(c.F$);return(0,r.useEffect)(()=>D.events.addAccessTokenExpiring(async()=>{console.debug("Access token renewal with auth.signinSilent()...");let e=await D.signinSilent();console.debug("User renewal: ".concat(e?"found":"not found")),f(e)}),[D.events,D.signinSilent]),(0,r.useEffect)(()=>{switch(console.debug("User state",d[g]),g){case 0:switch(y){case a.sW.Controller:m(1);break;case a.sW.Client:m(3),f(null);break;default:throw"Unsupported role: ".concat(a.sW[y])}break;case 1:D.signinSilent().then(e=>{null!==e?(console.info("User found",e.profile.email),f(e),m(4)):(console.debug("Not authenticated"),f(void 0),m(2))}).catch(e=>{console.error(e),f(void 0),m(2)});break;case 2:case 6:break;case 4:case 3:m(5);break;case 5:let t={deviceId:p,role:y,joinCode:e.joinCode,sessionId:e.sid};T(E.exchangeJoinCodeForSessionToken(t,null==x?void 0:x.access_token)).then(e=>{(0,l.s)(e)?(w(e.sessionToken),m(7)):console.debug("Join code exchange superseded.")}).catch(e=>{console.error(e),m(6)});break;case 7:m(8)}A(!![2,6].find(e=>e===g))},[g]),(0,r.useEffect)(()=>{S(null===x),null===x&&8===g&&console.error("No user found through Auth. The facilitator will not be able to manage the session.")},[x]),(0,i.jsxs)(i.Fragment,{children:[j&&e.err,8!==g&&!j&&e.load,8===g&&!j&&(0,i.jsx)(u.Provider,{value:C,children:e.children})]})}},86004:(e,t,n)=>{n.d(t,{Ay:()=>x,M9:()=>m,UW:()=>g});var i=n(95155),r=n(73017),o=n(18932),s=n(62652),a=n(80357),l=n(75970),c=n(60193),d=n(80317),u=n(57915),p=n(12115),h=n(74434),g=function(e){return e[e.Yes=0]="Yes",e[e.No=1]="No",e[e.Unsure=2]="Unsure",e}({});let m=e=>1===e?0:-1===e?1:2;function x(e){var t;let{answers:n}=(0,r.Ay)(e.qids.qid),[m,x]=(0,p.useState)((0,r.fV)(n,e.qids,null==(t=e.question)?void 0:t.pii)),[f,y]=(0,p.useState)(m),[b,v]=(0,p.useState)(!1),w=e.role===o.sW.Client;(0,p.useEffect)(()=>{y({...m})},[m]);let j=async e=>{if(w&&!b){let t={...f,jsonValue:{answers:[{key:"vote",stringValue:g[e],numericValue:0===e?1:1===e?-1:0}]}};await A(t)}},A=async t=>{try{v(!0);let n=await e.onAnswer(t);if(null!==n)x(n);else throw"Failed to submit answer"}catch(e){console.error(e)}finally{v(!1)}},k=(0,u.A)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.A,{className:"stretch",sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsx)(h.A,{content:e.question}),(0,i.jsxs)(a.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,i.jsxs)(l.A,{elevation:0,sx:{p:4,mb:2,width:"60%",height:"70%",alignSelf:"center",minHeight:200,borderRadius:4,background:k.palette.promptPanelBackground.main,display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"stretch"},children:[(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,i.jsx)("div",{style:{position:"absolute",width:"15%",height:"20%",padding:0,margin:0},children:(0,i.jsx)(c.A,{sx:{position:"relative",left:"-100%",top:0,width:"100%",height:"100%",m:0,p:0},onClick:()=>j(1),disabled:!w||b,style:{opacity:w&&!b?1:.5},children:(0,i.jsx)("img",{src:"/icons/updown/cross.svg",alt:"False button icon"})})})}),(0,i.jsx)(a.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",p:2},children:(0,i.jsx)(d.A,{variant:"upDownQuestion",sx:{textAlign:"center",alignSelf:"center"},children:e.assertion})}),(0,i.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:(0,i.jsx)("div",{style:{position:"absolute",width:"15%",height:"20%",padding:0,margin:0},children:(0,i.jsx)(c.A,{sx:{position:"relative",right:0,top:0,width:"100%",height:"100%",m:0,p:0},style:{opacity:w&&!b?1:.5},onClick:()=>j(0),disabled:!w||b,children:(0,i.jsx)("img",{src:"/icons/updown/check.svg",alt:"True button icon"})})})})]}),(0,i.jsx)(a.A,{sx:{p:2,borderRadius:4,cursor:"pointer",opacity:w&&!b?1:.5,alignSelf:"center"},onClick:()=>j(2),display:"flex",flexDirection:"column",justifyContent:"center",children:(0,i.jsx)(d.A,{variant:"submitButton",style:{borderBottom:"solid 1px black"},children:(0,i.jsx)(s.A,{i18nKey:"poll.upDown.notSure"})})})]})]})})}},88694:(e,t,n)=>{n.d(t,{G:()=>i});let i=(0,n(12115).createContext)(void 0)},91396:(e,t,n)=>{n.d(t,{A:()=>b,a:()=>f});var i=n(95155),r=n(73017),o=n(18932),s=n(80357),a=n(41477),l=n(13664),c=n(46671),d=n.n(c),u=n(12115),p=n(62652),h=n(74434),g=n(68307),m=n(39846),x=n(67230),f=function(e){return e[e.continuous=0]="continuous",e[e.discrete=1]="discrete",e[e.categorical=2]="categorical",e}({});let y=(e,t)=>{var n;return{answers:[{key:"".concat(e),index:e,description:null!=(n=null==t?void 0:t[e])?n:"".concat(e),numericValue:1}]}};function b(e){var t;let{answers:n}=(0,r.Ay)(e.qids.qid),c=()=>{var t;return(0,r.fV)(n,e.qids,null==(t=e.question)?void 0:t.pii)},[b,v]=(0,u.useState)(c()),[w,j]=(0,u.useState)(c()),[A,k]=(0,u.useState)(!1),[S,C]=(0,u.useState)(e.role===o.sW.Client),[I,D]=(0,u.useState)(!1);(0,u.useEffect)(()=>{var t;j({...b,jsonValue:null!=(t=b.jsonValue)?t:y(Math.floor((q()+P())/2),e.marks)})},[b]);let E=async()=>{if(e.role!==o.sW.Client)return void console.warn("Only participants can submit answers");k(!0),e.onAnswer(w).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),e)v(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{k(!1)})},T=async()=>{if(e.role!==o.sW.Client)return void console.warn("Only participants can submit answers");k(!0);let t={...w,jsonValue:{answers:[{key:"unsure",description:"unsure",numericValue:1}]}};e.onAnswer(t).then(e=>{if(console.debug("Answer submitted ".concat(e?"ok":"error")),console.debug("Received answer response",e),e)v(e);else throw"No response received"}).catch(e=>{console.error(e)}).finally(()=>{k(!1)})},q=()=>{switch(e.type){case 2:return 0;case 0:case 1:return e.numericRange?e.numericRange[0]:0;default:throw"Unsupported SliderInputType ".concat(f[e.type])}},P=()=>{switch(e.type){case 2:return e.marks.length-1;case 0:case 1:return e.numericRange?e.numericRange[1]:10;default:throw"Unsupported SliderInputType ".concat(f[e.type])}},R=()=>{var t,n;switch(e.type){case 2:return 1;case 0:return null!=(t=e.numericStep)?t:.01;case 1:return null!=(n=e.numericStep)?n:1;default:throw"Unsupported SliderInputType ".concat(f[e.type])}},F=e.marks?100-100/e.marks.length:void 0,_=F?"".concat(F,"%"):void 0;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.A,{className:e.fullHeight?"stretch":"",sx:{width:"100%",height:e.fullHeight?"100%":"initial",display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1,alignItems:"center",justifyContent:"center",px:4,gap:8},children:[(0,i.jsx)(s.A,{children:e.question&&(0,i.jsx)(h.A,{content:e.question})}),(0,i.jsx)(s.A,{sx:{width:null!=_?_:"95%"},children:(0,i.jsx)(m.A,{onCommit:t=>{j({...w,jsonValue:y(t,e.marks)})},color:"secondary",disabled:I,sliderDefault:w.jsonValue?d().toNumber(w.jsonValue.answers[0].index):Math.floor((q()+P())/2),marks:null!=(t=(()=>{switch(e.type){case 2:return e.marks.map((e,t)=>({value:t,label:e}));case 0:return;case 1:return d().range(e.numericRange[0],e.numericRange[1]+1,R()).map((e,t)=>({value:e,label:"".concat(e)}))}})())&&t,slots:{markLabel:x.A},min:q(),max:P(),step:R(),sliderMode:"solo"})}),e.showUnsure&&(0,i.jsx)(s.A,{children:(0,i.jsx)(a.A,{control:(0,i.jsx)(l.A,{checked:I,onChange:(e,t)=>D(t)}),label:(0,i.jsx)("span",{style:{fontWeight:"bold",fontSize:"1.25rem"},children:(0,i.jsx)(p.A,{i18nKey:"button.unsure"})})})})]}),e.role===o.sW.Client&&(0,i.jsx)(s.A,{children:(0,i.jsx)(g.A,{onSubmit:()=>{I?T():E()},text:(0,i.jsx)(p.A,{i18nKey:"button.submit"}),busy:A,enabled:S,inline:!1,alignment:"right"})})]})})}},95507:(e,t,n)=>{n.d(t,{t:()=>r,M:()=>i});let i={aspectRatio:960/700,minTileWidth_px:151.1812928268256,controlBarHeight_px:75.5906464134128,padding_px:5,gap_px:5,slideSpan:{cols:2,rows:2}},r={mandatory:[],queued:[],active:[],inactive:[]}},98314:(e,t,n)=>{n.d(t,{$:()=>g,A:()=>m});var i=n(95155),r=n(12115),o=n(80015),s=n(30349),a=n(60071),l=n(18932),c=n(69999),d=n(54884),u=n(84073),p=n(10310),h=n(18414);let g=(0,r.createContext)({});function m(e){let{sid:t,publicContent:n,session:m}=(0,r.useContext)(p.L),{sessionToken:x}=(0,r.useContext)(u.yk),[f,y]=(0,r.useState)(m),{api:b,start:v}=(0,r.useContext)(h.F$),w=(0,r.useContext)(u.yk),[j,A]=(0,r.useState)([]),k=e=>{A(t=>[...t,e])},S=e=>{A(t=>t.filter(t=>t.id!==e.id))};(0,r.useEffect)(()=>(c.A.on(c.m.WSS_Distribute_Message,k),c.A.on(c.m.WSS_Update_ConnectionState,k),c.A.on(c.m.WSS_Refresh_Session,k),()=>{c.A.off(c.m.WSS_Distribute_Message,k),c.A.off(c.m.WSS_Update_ConnectionState,k),c.A.off(c.m.WSS_Refresh_Session,k)}),[]);let C=(0,r.useRef)(!1);(0,r.useEffect)(()=>{let e=async()=>{console.debug("Refresh session...");try{if(w.role===l.sW.Controller){var e;if((null==(e=w.user)?void 0:e.access_token)===void 0)throw"User or access token is undefined";let n=await v(b.getDeliberationSessionAdmin(t,x,w.user.access_token,"live-session-refresh"));(0,d.s)(n)?y(n):console.warn("Received undefined session on refresh.")}else{let e=await (0,s.O)(b,v,t,x);(0,d.s)(e)&&y(e)}}catch(e){console.error("Error fetching session data.",e)}},n=t=>{console.debug("Connection state changed: ".concat(l.jB[t])),t===l.jB.Joined&&(e(),C.current=!0)};for(let t of j)try{switch(t.type){case c.m.WSS_Update_ConnectionState:n(t.data);break;case c.m.WSS_Distribute_Message:I(t.data);break;case c.m.WSS_Refresh_Session:e()}}finally{S(t)}},[b,j,x,t,v,w.role,w.user]);let I=e=>{if("distribute"===e.action)if("ZgDiff"!==e.type)return void console.warn("Unhandled distribution message type: ".concat(e.type));else{let t=e.content;"session"===t.updateTarget&&y(e=>(0,a.$)(e,t))}if("send"===e.action)switch(e.type){case"full-session-update":let t=e.content.session;y(e=>{var n;return{...t,joinCode:null!=(n=t.joinCode)?n:e.joinCode}});break;case"simple-session-update":console.warn("Ignoring deprecated simple-session-update message");break;case"live-state-update":console.warn("Ignoring deprecated live-state-update message");break;case"participant-record-distribution":let n=e.content.record;y(e=>({...e,participantRecords:[...e.participantRecords.filter(e=>!(0,o.eC)(e,n)),n]}));break;case"meeting-update":console.warn("Ignoring deprecated meeting-update message");break;case"answer-summary-update":console.warn("Ignoring deprecated answer-summary-update message")}};return(0,i.jsx)(g.Provider,{value:{session:f,publicContent:n},children:e.children})}}}]);