"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{60658:function(e,t,i){i.d(t,{L:function(){return s},P:function(){return o}});var n=i(2057);let s=e=>{let t=async()=>{var t;let i={method:e.method,headers:{"Content-Type":null!==(t=e.contentType)&&void 0!==t?t:"application/json"}};void 0!==e.body&&(i.body=JSON.stringify(e.body)),void 0!==e.accessToken&&(i.headers.Authorization="Bearer ".concat(e.accessToken)),void 0!==e.sessionToken&&(i.headers["X-Deliberation-Session-Token"]=e.sessionToken);let n=await fetch("".concat(e.baseUri).concat(e.path),i);if(n.ok)return JSON.parse(await n.text());throw n.statusText};return new n.Z({title:e.title,description:e.description,action:t,retries:e.indefinite?"indefinite":3,delay_ms:2e3,max_delay_ms:6e3,group:e.group,indicator:e.indicator})},o=(e,t,i,s,o)=>{if(0===e.size)throw"Blob is empty";let a=async()=>{console.debug("Ready to upload ".concat(e.size," bytes..."));let n=await fetch(i,{method:"PUT",headers:{"Content-Type":t},body:e});if(!n.ok)throw n.statusText;return console.debug("Upload complete."),{size:e.size,target:i,method:"PUT",response:n}};return new n.Z({title:"Put: ".concat(i),description:"".concat(e.size," bytes"),action:a,retries:s?"indefinite":3,delay_ms:2e3,indicator:o})}},2057:function(e,t,i){i.d(t,{Z:function(){return a},l:function(){return s}});var n,s,o=i(20920);(n=s||(s={}))[n.Ready=0]="Ready",n[n.Running=1]="Running",n[n.Success=2]="Success",n[n.Waiting=3]="Waiting",n[n.Failed=4]="Failed",n[n.Cancelled=5]="Cancelled";class a{isFinished(){return 2===this.state||4===this.state||5===this.state}getNextDelay(){var e,t,i;return Math.min((null!==(e=this.initProps.delay_ms)&&void 0!==e?e:0)*this.attempts,null!==(i=null!==(t=this.initProps.max_delay_ms)&&void 0!==t?t:this.initProps.delay_ms)&&void 0!==i?i:0)}constructor(e){this.attempts=0,this.state=0,this.id=(0,o.Z)(),this.initProps=e,this.group=e.group}}},23447:function(e,t,i){i.d(t,{E:function(){return d},Z:function(){return u}});var n=i(57437),s=i(2265),o=i(2057);let a=e=>{switch(e.action){case"close":return"closing workshop";case"fullscreen":return"adjusting workshop settings";case"init-meeting":return"renewing video call";case"open":return"opening workshop";case"refresh-all":return"refreshing";case"reset":return"opening waiting room";case"set-slide-position":return"updating position";case"set-video-sync":return"synchronising video";case"start-transcription":return"starting transcription";case"stop-transcription":return"stopping transcription";case"refresh":return"refreshing state";case"video-readiness-update":return"updating video readiness";case"mute":return"muting participant";case"kick":return"removing participant";default:return"submitting data"}};var r=i(94547),c=i(60658);class l{getServerTime(){return(0,c.L)({baseUri:this.baseUri,title:"getServerTime",method:"GET",path:"/utils/servertime",indefinite:!1,indicator:"checking server time"})}postDeliberationSessionAdmin(e,t){return(0,c.L)({baseUri:this.baseUri,title:"postDeliberationSessionAdmin",method:"POST",path:"/sessions/admin",body:t,accessToken:e,indefinite:!0,indicator:"creating session"})}putDeliberationSessionAdmin(e,t){return(0,c.L)({baseUri:this.baseUri,title:"putDeliberationSessionAdmin",method:"PUT",path:"/sessions/admin/".concat(t.id),body:t,accessToken:e,indefinite:!0,indicator:"updating session"})}postParticipantAction(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(0,c.L)({baseUri:this.baseUri,title:"postParticipantAction",description:t.action,method:"POST",path:"/sessions/".concat(t.sessionId,"/actions"),body:t,group:"postParticipantAction.".concat(t.action),sessionToken:e,indefinite:i,indicator:a(t)})}postFacilitatorAction(e,t,i){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,c.L)({baseUri:this.baseUri,title:"postFacilitatorAction",description:i.action,method:"POST",path:"/sessions/admin/actions/".concat(i.sessionId),body:i,group:"postFacilitatorAction.".concat(i.action),accessToken:e,sessionToken:t,indefinite:n,indicator:a(i)})}getDeliberationSessionAdmin(e,t,i,n){return(0,c.L)({baseUri:this.baseUri,title:"getDeliberationSessionAdmin",description:"with access token",method:"GET",path:"/sessions/admin/".concat(e),sessionToken:t,accessToken:i,group:n,indefinite:!1,indicator:"checking workshop state"})}listDeliberationSessions(e,t,i){return(0,c.L)({baseUri:this.baseUri,title:"listDeliberationSessions",description:r.yI[t],method:"GET",path:"/sessions/list/".concat(r.yI[t]),accessToken:e,group:i,indefinite:!1,indicator:"listing sessions"})}getDeliberationSession(e,t,i){return(0,c.L)({baseUri:this.baseUri,title:"getDeliberationSession",method:"GET",path:"/sessions/".concat(e),sessionToken:t,group:i,indefinite:!1,indicator:"checking workshop state"})}postMeetingJoinRequest(e,t,i,n,s,o){return(0,c.L)({baseUri:this.baseUri,title:"postMeetingJoinRequest",method:"POST",path:void 0!==o?"/sessions/admin/".concat(e,"/attendee"):"/sessions/".concat(e,"/attendee"),body:{name:s,participantId:i,preview:n},sessionToken:t,accessToken:o,indefinite:!1,indicator:n?"preparing preview":"joining video call"})}exchangeJoinCodeForSessionToken(e,t){var i=void 0!==t?"/sessions/admin/".concat(e.sessionId,"/token"):"/sessions/".concat(e.sessionId,"/token");return(0,c.L)({baseUri:this.baseUri,title:"exchangeJoinCodeForSessionToken",method:"POST",path:i,body:e,indefinite:!1,indicator:"checking join code",accessToken:t})}postDeliberationAnswer(e,t,i){let n=t.questionId;return(0,c.L)({baseUri:this.baseUri,title:"postDeliberationAnswer",method:"POST",path:"/sessions/".concat(e,"/questions/").concat(n,"/answers"),body:t,sessionToken:i,indefinite:!0,indicator:"sending answer"})}getDeliberationAnswer(e,t,i,n,s){return(0,c.L)({baseUri:this.baseUri,title:"getDeliberationAnswer",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers?pid=").concat(i),sessionToken:n,group:s,indefinite:!0,indicator:void 0})}getDeliberationAnswersForQuestion(e,t,i,n){return(0,c.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForQuestion",method:"GET",path:"/sessions/".concat(e,"/questions/").concat(t,"/answers"),sessionToken:i,group:n,indefinite:!0,indicator:void 0})}getDeliberationAnswersForParticipant(e,t,i,n){return(0,c.L)({baseUri:this.baseUri,title:"getDeliberationAnswersForParticipant",method:"GET",path:"/sessions/".concat(e,"/participants/").concat(t,"/answers"),sessionToken:i,group:n,indefinite:!0,indicator:void 0})}postWorkshopContentAccessRequest(e,t,i){return(0,c.L)({baseUri:this.baseUri,title:"postWorkshopContentAccessRequest",description:"".concat(i.objectKeys.length," items"),method:"POST",path:"/sessions/".concat(e,"/content"),body:i,sessionToken:t,indefinite:!0,indicator:void 0})}postPublicContentAccessRequest(e,t){return(0,c.L)({baseUri:this.baseUri,title:"postPublicContentAccessRequest",description:"".concat(t.workshopDirectory),method:"POST",path:"/sessions/".concat(e,"/content/public"),body:t,indefinite:!0,indicator:void 0})}getReport(e,t,i){return(0,c.L)({baseUri:this.baseUri,title:"getReport",description:r.gY[i],method:"GET",path:"/sessions/admin/".concat(e,"/report/").concat(r.gY[i]),accessToken:t,indefinite:!1,indicator:"retrieving report"})}getMediaUploadUrl(e,t,i,n,s,o){return(0,c.L)({baseUri:this.baseUri,title:"getMediaUploadUrl",method:"POST",path:"/sessions/admin/".concat(e,"/upload"),body:{sessionId:e,section:n,filenamePart:s,filenameSuffix:o},accessToken:i,sessionToken:t,indefinite:!0,indicator:"preparing to upload"})}postAnalystAction(e,t){return(0,c.L)({baseUri:this.baseUri,title:"postAnalystActionRequest",method:"POST",path:"/sessions/analysis",body:e,accessToken:t,indefinite:!1,indicator:"action: "+e.action})}constructor(e){this.baseUri=e}}let d=(0,s.createContext)({});function u(e){let[t,i]=(0,s.useState)(new l("https://xjlnrggeb0.execute-api.eu-west-2.amazonaws.com/test")),[a,r]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[m,f]=(0,s.useState)([]),[y,S]=(0,s.useState)([]),[v,k]=(0,s.useState)([]),[w,T]=(0,s.useState)(0),U=(0,s.useCallback)(async e=>(console.debug("Adding task: ".concat(e.initProps.title)),r(t=>[...t,e]),T(new Date().getTime()),x(e)),[a,r,w,T]);(0,s.useEffect)(()=>{a&&new Set(a.map(e=>e.group).filter(e=>a.filter(t=>t.group===e&&!t.isFinished()).length>1)).forEach(e=>{let t=[...a.filter(t=>t.group===e&&!t.isFinished()&&void 0!==t.started)].sort((e,t)=>t.started.getTime()-e.started.getTime())[0],i=a.filter(i=>i.group===e&&i.id!==t.id);i.length>0&&(console.debug("".concat(i.length," tasks with group '").concat(e,"' for cancellation.")),i.forEach(e=>e.state=o.l.Cancelled),T(new Date().getTime()))})},[a]),(0,s.useEffect)(()=>{u([...a.filter(e=>e.state===o.l.Ready)]),h([...a.filter(e=>e.state===o.l.Running)]),b([...a.filter(e=>e.state===o.l.Waiting)]),f([...a.filter(e=>e.state===o.l.Success)]),S([...a.filter(e=>e.state===o.l.Failed)]),k([...a.filter(e=>e.state===o.l.Cancelled)])},[a,w]);let x=(0,s.useCallback)(async e=>{do try{console.debug("Starting task: ".concat(e.initProps.title)),e.state=o.l.Running,e.started=new Date,T(new Date().getTime()),e.attempts++,e.promise=e.initProps.action(),e.result=await e.promise,console.debug("Completed task: ".concat(e.initProps.title)),e.state=o.l.Success,T(new Date().getTime())}catch(t){e.error=t,e.attempts<=("indefinite"===e.initProps.retries?50:e.initProps.retries)?(e.state=o.l.Waiting,T(new Date().getTime()),console.warn("Task ".concat(e.initProps.title," will retry in ").concat(e.getNextDelay(),"ms"),t),await new Promise(t=>setTimeout(t,e.getNextDelay()))):(e.state=o.l.Failed,console.error("Task ".concat(e.initProps.title," failed"),t),T(new Date().getTime()))}while(e.state===o.l.Waiting);switch(e.state){case o.l.Success:return e.result;case o.l.Failed:throw e.error;default:throw"Task state: ".concat(o.l[e.state])}},[a,r,w,T]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.Provider,{value:{api:t,start:U,tasks:a,readyTasks:c,runningTasks:p,waitingTasks:g,succeededTasks:m,failedTasks:y,cancelledTasks:v},children:e.children})})}},94547:function(e,t,i){var n,s,o,a,r,c,l,d,u,p,h,g,b,m,f,y,S,v;i.d(t,{EQ:function(){return s},SC:function(){return d},VS:function(){return a},_b:function(){return n},_y:function(){return o},gY:function(){return c},tB:function(){return u},um:function(){return r},yI:function(){return l}}),(p=n||(n={}))[p.Controller=0]="Controller",p[p.Client=1]="Client",(h=s||(s={}))[h.LiveWorkshop=0]="LiveWorkshop",h[h.AutomatedTests=1]="AutomatedTests",h[h.TestingWorkshop=2]="TestingWorkshop",h[h.DemoWorkshop=3]="DemoWorkshop",(g=o||(o={}))[g.Absent=0]="Absent",g[g.Ready=1]="Ready",g[g.Open=2]="Open",g[g.Closed=3]="Closed",(b=a||(a={}))[b.InPerson=0]="InPerson",b[b.Remote=1]="Remote",b[b.RemoteWithVideoCall=2]="RemoteWithVideoCall",(m=r||(r={}))[m.Offline=0]="Offline",m[m.Online=1]="Online",m[m.Connecting=2]="Connecting",m[m.Connected=3]="Connected",m[m.Joining=4]="Joining",m[m.Joined=5]="Joined",m[m.Disconnecting=6]="Disconnecting",m[m.Disconnected=7]="Disconnected",m[m.Error=8]="Error",(f=c||(c={}))[f.ContactAndConsent=0]="ContactAndConsent",f[f.EnjoymentAndSatisfaction=1]="EnjoymentAndSatisfaction",f[f.FullReport_v1=2]="FullReport_v1",f[f.FullReport_v2=3]="FullReport_v2",f[f.FullReport_v3=4]="FullReport_v3",(y=l||(l={}))[y.All=0]="All",y[y.Upcoming=1]="Upcoming",y[y.Past=2]="Past",y[y.Answered=3]="Answered",(S=d||(d={})).facilitators="facilitators",S.analysts="analysts",S.administrators="administrators",(v=u||(u={}))[v.NotStarted=0]="NotStarted",v[v.Playing=1]="Playing",v[v.Paused=2]="Paused",v[v.Ended=3]="Ended"},83593:function(e,t,i){i.d(t,{M:function(){return s}});var n,s,o=i(37836),a=i.n(o);(n=s||(s={})).Request_SlideRefresh="REQUEST_SLIDE_REFRESH",n.WSS_Update_ConnectionState="WSS_UPDATE_CONNECTION_STATE",n.WSS_Distribute_Message="WSS_DISTRIBUTE_MESSAGE",n.Content_Progress_Update="CONTENT_PROGRESS_UPDATE",n.Media_Playback_Update="MEDIA_PLAYBACK_UPDATE",n.WSS_Refresh_Session="WSS_REFRESH_SESSION",n.WSS_Request_Reconnect="WSS_REQUEST_RECONNECT";let r=new(a()),c={on:(e,t)=>r.on(e,t),once:(e,t)=>r.once(e,t),off:(e,t)=>r.off(e,t),emit:e=>r.emit(e.type,e)};Object.freeze(c),t.Z=c},4087:function(e,t,i){i.d(t,{Z:function(){return c}});var n=i(57437),s=i(2265),o=i(90089),a=i(20920);let r=()=>"t-".concat((0,a.Z)());function c(e){var t,i,a;let{i18nKey:c,options:l}=e,{t:d}=(0,o.$G)();return(0,n.jsx)(n.Fragment,{children:(i=null!==(t=e.wrapper)&&void 0!==t?t:(0,n.jsx)(n.Fragment,{}),Array.isArray(a=d(c,l))?a.map(e=>s.cloneElement(i,{key:r()},e)):"string"==typeof a?s.cloneElement(i,{key:r()},a):s.cloneElement(i,{key:r()},a.toString()))})}},53771:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(57437),s=i(22960),o=i(31193),a=i(40468),r=i(2265),c=i(2057),l=i(23447);function d(e){let{runningTasks:t,waitingTasks:i,failedTasks:d}=(0,r.useContext)(l.E),u=(0,s.Z)(),p={[c.l.Waiting]:u.palette.taskWaiting.main,[c.l.Ready]:u.palette.taskReady.main,[c.l.Running]:u.palette.taskRunning.main,[c.l.Success]:u.palette.taskSuccess.main,[c.l.Failed]:u.palette.taskFailed.main,[c.l.Cancelled]:u.palette.taskCancelled.main},h=e=>{let{task:t}=e,i=t.initProps.indicator,s=!1;switch(t.state){case c.l.Waiting:i+=" (retry)",s=!0;break;case c.l.Ready:case c.l.Running:i+="...",s=!0}return(0,n.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",borderRadius:1,backgroundColor:"white",border:1,borderColor:p[t.state],borderBottom:4,borderBottomColor:p[t.state],opacity:.75,py:1,px:2},children:[s&&(0,n.jsx)(a.Z,{size:"1rem"}),i]})};return(0,r.useEffect)(()=>{console.debug("Running tasks: ".concat(t.length),t.map(e=>e.initProps.title),t)},[t]),(0,n.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.showRunning&&t.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,n.jsx)(h,{task:e},"task-vis-".concat(e.id,"-").concat(c.l[e.state]))),i.filter(e=>void 0!==e.initProps.indicator).map(e=>(0,n.jsx)(h,{task:e},"task-vis-".concat(e.id,"-").concat(c.l[e.state])))]})}},40395:function(e,t,i){i.d(t,{Z:function(){return h}});var n=i(57437),s=i(7630),o=i(69065),a=i(80824),r=i(66124),c=i(31193),l=i(60335),d=i(80511),u=i(2265),p=i(9646);function h(e){var t,i,h;let g=()=>{if(!1!==e.dismissible){var t;e.setOpen(!1),null===(t=e.onClose)||void 0===t||t.call(e)}},b=t=>{var i,n;e.setOpen(!1),null===(i=e.onClose)||void 0===i||i.call(e),null===(n=e.onSelect)||void 0===n||n.call(e,t)},m=(0,u.useId)();return(0,u.useEffect)(()=>{console.debug("dialog open",e.open)},[e.open]),(0,n.jsxs)(o.Z,{fullWidth:null===(t=e.fullWidth)||void 0===t||t,maxWidth:null!==(i=e.maxWidth)&&void 0!==i?i:"sm",open:e.open,disableEscapeKeyDown:!e.dismissible,onClose:g,children:[e.title&&(0,n.jsx)(a.Z,{align:"center",children:e.title}),(0,n.jsxs)(r.Z,{children:[(null===(h=e.showCloseButton)||void 0===h||h)&&(0,n.jsx)(c.Z,{style:{position:"absolute",top:0,right:0},children:(0,n.jsx)(l.Z,{"aria-label":"close",onClick:g,children:(0,n.jsx)(s.Z,{})})}),(0,n.jsxs)(c.Z,{sx:{p:2,gap:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(d.Z,{variant:"body1",sx:{width:"75%",mb:2,textAlign:"center",textWrap:"balance"},children:e.prompt}),e.options.map(t=>(0,n.jsx)(p.Z,{btnKey:"dialog-".concat(m,"-option-").concat(t.key),sx:{width:"66%"},variant:t.filled?"contained":"outlined",color:"buttonStandard",onClick:()=>b(t.key),btnText:t.text,busy:e.busy},"dialog-".concat(m,"-option-").concat(t.key)))]})]})]})}},9646:function(e,t,i){i.d(t,{Z:function(){return r}});var n=i(57437),s=i(42555),o=i(80511),a=i(4087);function r(e){var t,i,r;return(0,n.jsxs)(s.Z,{disableFocusRipple:e.disableFocusRipple,type:"submit",variant:null!==(t=e.variant)&&void 0!==t?t:"contained",size:e.size,color:null!==(i=e.color)&&void 0!==i?i:"buttonStandard",onClick:()=>{e.onClick(e.btnKey)},loading:e.busy,disabled:e.disabled||e.busy,startIcon:e.startIcon,endIcon:e.endIcon,sx:e.sx,children:[e.content,(0,n.jsx)(o.Z,{variant:"submitButton",sx:{textWrap:"balance"},children:null!==(r=e.btnText)&&void 0!==r?r:(0,n.jsx)(a.Z,{i18nKey:"button.submit"})})]})}},20909:function(e,t,i){i.d(t,{X:function(){return n}});let n=e=>e.split("/").at(-2)}}]);