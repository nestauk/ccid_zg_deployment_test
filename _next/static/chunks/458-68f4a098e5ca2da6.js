"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{11265:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(95155),r=o(80317),i=o(90073);function s(){return(0,n.jsxs)(i.A,{component:"main",sx:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem"},children:[(0,n.jsx)(r.A,{variant:"h1",sx:{fontSize:"2.25rem"},children:"The Situation Room"}),(0,n.jsxs)(r.A,{variant:"body1",children:["Thanks for trying to join ",(0,n.jsx)("b",{children:"The Situation Room"}),"."]}),(0,n.jsxs)(r.A,{variant:"body1",children:["Unfortunately, ",(0,n.jsx)("b",{children:"you can't use a phone"})," (or other device with a small screen) to take part in the session."]}),(0,n.jsxs)(r.A,{variant:"body1",children:[(0,n.jsx)("b",{children:"Please use a laptop, tablet"})," or other similar device to join."]})]})}},13202:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(95155),r=o(80357),i=o(12115),s=o(77757);let l={0:{columns:1,rows:1},1:{columns:1,rows:1},2:{columns:1,rows:2},3:{columns:1,rows:3},4:{columns:2,rows:2},5:{columns:2,rows:3},6:{columns:2,rows:3},7:{columns:2,rows:4},8:{columns:2,rows:4},9:{columns:3,rows:3},10:{columns:3,rows:4},11:{columns:3,rows:4},12:{columns:3,rows:4},13:{columns:4,rows:4},14:{columns:4,rows:4},15:{columns:4,rows:4},16:{columns:4,rows:4}};function a(e){let{tiles:t}=(0,i.useContext)(s.qW),[o,a]=(0,i.useState)({rows:1,columns:1});return(0,i.useEffect)(()=>{let e=t.length;if(e<=16)a({rows:l[e].rows,columns:l[e].columns});else{let t=Math.ceil(Math.sqrt(e));a({rows:t,columns:Math.ceil(e/t)})}},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.A,{sx:{...e.sx,width:"100%",height:"100%",display:"grid",gap:1,gridTemplateRows:"repeat(".concat(o.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(o.columns,", 1fr)")},children:t})})}},19672:(e,t,o)=>{o.d(t,{A:()=>f,N:()=>p});var n=o(95155),r=o(25789),i=o(60193),s=o(39142),l=o(18098),a=o(60890),c=o(34678),d=o(24274),u=o(57476);let p=32;function f(e){let{t}=(0,d.Bd)(),o=(0,r.A)().palette.callControlButtonIcon.main,f="",x="";return"audio"===e.control?(f=t("audio.enableMic"),x=t("audio.muteMic")):"camera"===e.control&&(f=t("video.enableCamera"),x=t("video.disableCamera")),(0,n.jsxs)(i.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":e.enabled?x:f,onClick:e.toggleFn,sx:t=>({backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.main",height:u.LL,position:e.showMenu?"absolute":"initial",right:e.showMenu?"0":"initial",width:u.LL,"&:hover":{backgroundColor:e.enabled?"callControlButton.dark":"callControlButtonOff.main"},"&:focus-visible":{...t.customStyles.focusRingReverse}}),children:["audio"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(s.A,{color:o,size:p}):(0,n.jsx)(l.A,{color:o,size:p})}),"camera"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(a.A,{color:o,size:p}):(0,n.jsx)(c.A,{color:o,size:p})})]})}},25091:(e,t,o)=>{o.d(t,{A:()=>x,E:()=>f});var n=o(95155),r=o(32276),i=o(12115),s=o(78211),l=o(54884);let a=["Microsoft Teams Audio","ZoomAudioDevice"];var c=o(23387),d=o(88694),u=o(80890),p=o(59850);function f(){let e=(0,i.useContext)(d.G);if(void 0===e)throw"Error: this component must be used within a <ZgMeetingConfigProvider>";return e}function x(e){var t,o;let{meetingStatus:f,isStarted:x}=(0,i.useContext)(p.s),h=(0,i.useContext)(s.c),g=(0,r.GYC)(),{isVideoEnabled:v,toggleVideo:m}=(0,r.oCg)(),{muted:b,toggleMute:w}=(0,r.abu)(),[j,A]=(0,i.useState)(),[C,y]=(0,i.useState)(),[S,k]=(0,i.useState)(),{selectedDevice:I,devices:D}=(0,r.xtX)(),{selectedDevice:E,devices:R}=(0,r.gDU)(),{selectedDevice:B,devices:F}=(0,r.O54)(),{isVoiceFocusSupported:M,addVoiceFocus:T}=(0,r.IMw)(),{isBackgroundBlurSupported:L,createBackgroundBlurDevice:O}=(0,r.F6c)(),K={settings:{offerVoiceFocus:null!=(t=h.voiceFocus)?t:c.DY,offerBackgroundBlur:null!=(o=h.backgroundBlur)?o:c.YC},preference:(0,l.s)(e.initialPrefs)?{...e.initialPrefs,startMeeting:!0}:c.gZ,current:{isInitialised:!1,isMeetingStarted:x,isAudioEnabled:!b,isVideoEnabled:v,isVoiceFocusEnabled:!1,isVoiceFocusSupported:M,isBackgroundBlurEnabled:!1,isBackgroundBlurSupported:L,audioInputDevice:I,audioOutputDevice:E,videoInputDevice:B,availableAudioInputDevices:j,availableAudioOutputDevices:C,availableVideoInputDevices:S}},[P,W]=(0,i.useState)(K);return(0,i.useEffect)(()=>{P.current.isInitialised||(P.current.isMeetingStarted&&(0,l.s)(P.current.videoInputDevice)&&(0,l.s)(P.current.audioInputDevice)?(console.debug("ZgMeetingConfigProvider: Video call initialised"),W(t=>({...t,preference:{...t.preference,...e.initialPrefs},current:{...t.current,isInitialised:!0}}))):console.warn("ZgMeetingConfigProvider: Video call not initialised",{isMeetingStarted:P.current.isMeetingStarted,videoInputDevice:P.current.videoInputDevice,audioInputDevice:P.current.audioInputDevice}))},[e.initialPrefs,P.current.isInitialised,P.current.isMeetingStarted,P.current.videoInputDevice,P.current.audioInputDevice]),(0,i.useEffect)(()=>{A(D.map(e=>e).filter(e=>!a.some(t=>e.label.toLowerCase().includes(t.toLowerCase())))),y(R.map(e=>e).filter(e=>!a.some(t=>e.label.toLowerCase().includes(t.toLowerCase())))),k(F.map(e=>e).filter(e=>!0))},[D,R,F]),(0,i.useEffect)(()=>{var t;null==(t=e.onUpdatePrefs)||t.call(e,P.preference)},[P.preference,e]),(0,i.useEffect)(()=>{W(e=>({...e,current:{...e.current,availableAudioInputDevices:j,availableAudioOutputDevices:C,availableVideoInputDevices:S}}))},[j,C,S]),(0,i.useEffect)(()=>{console.debug("Audio enabled: ".concat(!b)),W(e=>({...e,current:{...e.current,isAudioEnabled:!b}}))},[b]),(0,i.useEffect)(()=>{console.debug("Video enabled: ".concat(v)),W(e=>({...e,current:{...e.current,isVideoEnabled:v}}))},[v]),(0,i.useEffect)(()=>{P.current.isInitialised&&(0,l.s)(I)&&P.preference.audio===b&&(console.debug("toggling audio to ".concat(P.preference.audio?"on":"off")),w())},[P.current.isInitialised,P.preference.audio,b,I]),(0,i.useEffect)(()=>{(async()=>{P.current.isInitialised&&(0,l.s)(B)&&P.preference.video!==v&&(console.debug("toggling video to ".concat(P.preference.video?"on":"off")),await m())})()},[P.current.isInitialised,P.preference.video,v,B]),(0,i.useEffect)(()=>{(0,l.s)(I)&&(console.debug("Audio input device started",I),W(e=>({...e,current:{...e.current,audioInputDevice:I,isVoiceFocusEnabled:(0,u.Xb)(I)}})))},[I]),(0,i.useEffect)(()=>{(0,l.s)(E)&&(console.debug("Audio output device started",E),W(e=>({...e,current:{...e.current,audioOutputDevice:E}})))},[E]),(0,i.useEffect)(()=>{(0,l.s)(B)&&(console.debug("Video input device started",B),W(e=>({...e,current:{...e.current,videoInputDevice:B,isBackgroundBlurEnabled:(0,u.wS)(B)}})))},[B]),(0,i.useEffect)(()=>{let e=async()=>{let e=await (0,u.l1)(I);if(!(0,l.s)(P.preference.audioDevice))return void W(t=>({...t,preference:{...t.preference,audioDevice:e}}));if(e!==P.preference.audioDevice&&(0,l.s)(P.preference.audioDevice))if((0,u.Xb)(I)&&(0,l.s)(P.preference.audioDevice)&&P.preference.voiceFocus){let e=await I.chooseNewInnerDevice(P.preference.audioDevice);await g.startAudioInputDevice(e)}else await g.startAudioInputDevice(P.preference.audioDevice)};P.current.isInitialised&&e()},[P.current.isInitialised,P.preference.audioDevice,I]),(0,i.useEffect)(()=>{let e=async()=>{if(!(0,l.s)(P.preference.audioOutputDevice))return void W(e=>({...e,preference:{...e.preference,audioOutputDevice:E}}));E!==P.preference.audioOutputDevice&&(0,l.s)(P.preference.audioOutputDevice)&&await g.startAudioOutputDevice(P.preference.audioOutputDevice)};P.current.isInitialised&&e()},[P.current.isInitialised,P.preference.audioOutputDevice,E]),(0,i.useEffect)(()=>{let e=async()=>{let e=await (0,u.oq)(B);if(!(0,l.s)(P.preference.videoDevice))return void W(t=>({...t,preference:{...t.preference,videoDevice:e}}));(0,l.s)(P.current.audioInputDevice)&&e!==P.preference.videoDevice&&(0,l.s)(P.preference.videoDevice)&&await g.startVideoInputDevice(P.preference.videoDevice)};P.current.isInitialised&&P.current.isVideoEnabled&&e()},[P.current.isInitialised,P.preference.videoDevice,B,P.current.audioInputDevice,P.current.isVideoEnabled]),(0,i.useEffect)(()=>{let e=async()=>{let e=await (0,u.Fp)(P.current.isVoiceFocusSupported,P.preference.voiceFocus,I,T);(0,l.s)(e)&&e!==I&&await g.startAudioInputDevice(e)};P.settings.offerVoiceFocus&&P.current.isInitialised&&e()},[P.current.isInitialised,P.settings.offerVoiceFocus,P.current.isVoiceFocusSupported,P.preference.voiceFocus,I]),(0,i.useEffect)(()=>{let e=async()=>{let e=await (0,u.eb)(P.current.isBackgroundBlurSupported,P.preference.backgroundBlur,B,O);(0,l.s)(e)&&B!==e&&(console.debug("Switching video device (BB)",B,e),await g.startVideoInputDevice(e))};P.settings.offerBackgroundBlur&&P.current.isInitialised&&P.current.isVideoEnabled&&e()},[P.current.isInitialised,P.current.isVideoEnabled,P.settings.offerBackgroundBlur,P.current.isBackgroundBlurSupported,P.preference.backgroundBlur,B]),(0,i.useEffect)(()=>{W(e=>({...e,current:{...e.current,isVoiceFocusSupported:M}}))},[M]),(0,i.useEffect)(()=>{W(e=>({...e,current:{...e.current,isBackgroundBlurSupported:L}}))},[L]),(0,i.useEffect)(()=>{W(e=>({...e,current:{...e.current,isMeetingStarted:x}}))},[x]),(0,i.useEffect)(()=>{W(e=>({...e,current:{...e.current,isMeetingStarted:f===r.e0s.Succeeded}}))},[f]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.G.Provider,{value:{state:P,controls:{selectAudioEnabled:e=>{W(t=>({...t,preference:{...t.preference,audio:e}}))},selectVideoEnabled:e=>W(t=>({...t,preference:{...t.preference,video:e}})),selectAudioDevice:e=>W(t=>({...t,preference:{...t.preference,audioDevice:e}})),selectAudioOutputDevice:e=>W(t=>({...t,preference:{...t.preference,audioOutputDevice:e}})),selectVideoDevice:e=>W(t=>({...t,preference:{...t.preference,videoDevice:e}})),selectVoiceFocus:e=>W(t=>({...t,preference:{...t.preference,voiceFocus:e}})),selectBackgroundBlur:e=>W(t=>({...t,preference:{...t.preference,backgroundBlur:e}})),selectStartMeeting:e=>W(t=>({...t,preference:{...t.preference,startMeeting:e}}))}},children:e.children})})}},25790:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(95155),r=o(12115),i=o(98314),s=o(80431),l=o(84073),a=o(18932),c=o(88694),d=o(54884);function u(){let{role:e}=(0,r.useContext)(l.yk),{session:t}=(0,r.useContext)(i.$),{slideData:o}=(0,s.Zm)(),u=(0,r.useRef)(void 0),p=(0,r.useContext)(c.G),f=(0,r.useCallback)(async()=>{let e=new Audio("/sounds/00-ding.mp3");if(e.volume=.5,(0,d.s)(null==p?void 0:p.state.current.audioOutputDevice))if((0,d.s)(e.setSinkId))try{await e.setSinkId(p.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for SlideTransitionSound",e)}else console.debug("Audio.setSinkId not defined");return e},[p]),x=(0,r.useCallback)(async()=>{(await f()).play()},[f]);return(0,r.useEffect)(()=>{(e===a.sW.Controller||t.remoteConfiguration!==a.LQ.InPerson)&&o.index!==u.current&&o.transitionSound&&(u.current=o.index,x())},[e,t.remoteConfiguration,o.index,o.transitionSound,x]),(0,n.jsx)(n.Fragment,{})}},29733:(e,t,o)=>{o.d(t,{A:()=>eh});var n=o(95155),r=o(12115),i=o(57300),s=o(84073),l=o(25612),a=o(69999),c=o(88694),d=o(54884),u=o(18932);let p=u.sW.Client,f={skipOnboarding:!0,skipVideoPreview:!0,returnAs:u.sW.Client},x={skipOnboarding:!1,skipVideoPreview:!1,returnAs:u.sW.Client};function h(e){let{setRedirection:t}=e,{message:o}=function(e){let{sendMessage:t,state:o}=(0,r.useContext)(l.j),[n,i]=(0,r.useState)(void 0),[s,c]=(0,r.useState)();return(0,r.useEffect)(()=>(a.A.on(a.m.WSS_Distribute_Message,c),()=>{a.A.off(a.m.WSS_Distribute_Message,c)}),[]),(0,r.useEffect)(()=>{let t=null==s?void 0:s.data;(null==t?void 0:t.action)==="distribute"&&(void 0===e||e.includes(t.type))&&i(t)},[s,e]),{message:n,connectionState:o,sendMessage:t}}(["UserRedirect"]),{thisUser:h}=(0,r.useContext)(i.f),{state:g}=(0,r.useContext)(c.G),{joinCode:v}=(0,r.useContext)(s.yk),[m,b]=(0,r.useState)({}),[w,j]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{(0,d.s)(o)&&(console.info("UserRedirect message received"),console.debug(o),b(e=>{var t;return{...e,targetSid:o.content.targetSid,targetRole:null!=(t=o.content.role)?t:p}}))},[o]),(0,r.useEffect)(()=>{b(e=>({...e,params:{...e.params,returnAs:null==h?void 0:h.role,name:null==h?void 0:h.participantName}}))},[h]),(0,r.useEffect)(()=>{b(e=>({...e,params:{...e.params,camOn:null==g?void 0:g.preference.video,micOn:null==g?void 0:g.preference.audio,camDid:null==g?void 0:g.preference.videoDevice,micDid:null==g?void 0:g.preference.audioDevice,outDid:null==g?void 0:g.preference.audioOutputDevice,bb:null==g?void 0:g.preference.backgroundBlur,vf:null==g?void 0:g.preference.voiceFocus}}))},[g]),(0,r.useEffect)(()=>{console.debug(m),(0,d.s)(m.targetSid)&&(0,d.s)(m.targetRole)&&(0,d.s)(m.params)&&j(((e,t,o,n)=>{let r=Object.entries(o).map(e=>{let[t,o]=e;return void 0===o&&(0,d.s)(f[t])?[t,f[t]]:[t,o]}).filter(e=>{let[t,o]=e;return o!==x[t]}).filter(e=>{let[t,o]=e;return(0,d.s)(o)&&""!==o}).map(e=>{let[t,o]=e;return"&".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(o)))}).join(""),i=t===u.sW.Controller?"facilitator":"participant";return"/".concat(i,"/session/?sid=").concat(e,"&code=").concat(n)+(r?"".concat(r):"")})(m.targetSid,m.targetRole,m.params,v))},[v,m]),(0,r.useEffect)(()=>{if((0,d.s)(w)){var e,o;(console.info("Redirecting to new session: ".concat(w)),null==t||t(w),!(0,d.s)(navigator)||!(0,d.s)(null==(o=window)||null==(e=o.location)?void 0:e.assign)||!(0,d.s)(navigator)||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?console.debug("redirect invoked outside of browser context"):window.location.assign(w)}},[w,t]),(0,n.jsx)(n.Fragment,{})}var g=o(98314),v=o(23387),m=o(80357),b=o(89041),w=o(4615),j=o(32276),A=o(34824),C=o(30218);class y{debug(e){this.logger.debug(e)}info(e){this.logger.info(e)}warn(e){this.logger.warn(e),this.observers.forEach(t=>t(A.LogLevel.WARN,e))}error(e){this.logger.error(e),this.observers.forEach(t=>t(A.LogLevel.ERROR,e))}setLogLevel(e){this.logger.setLogLevel(e)}getLogLevel(){return this.logger.getLogLevel()}addObserver(e){this.observers.push(e)}clearObservers(){this.observers=[]}constructor(e){this.logger=new A.ConsoleLogger("ZgObservableLogger",e),this.observers=[]}}let S=(0,r.createContext)({}),k=(0,r.memo)(function(e){let[t]=(0,r.useState)(new y(e.level)),[o,i]=(0,r.useState)({logger:t}),s=(0,r.useRef)(void 0),l=(0,r.useRef)(void 0);(0,r.useEffect)(()=>((0,d.s)(window)&&(s.current=window.onerror,window.onerror=a,console.debug("Captured window.onerror"),l.current=console.error,console.error=c,console.debug("Captured console.error")),t.addObserver((e,t)=>{i({...o,lastLog:{level:e,msg:t}})}),()=>{t.clearObservers(),(0,d.s)(window)&&(0,d.s)(s.current)&&(window.onerror=s.current),(0,d.s)(l.current)&&(console.error=l.current)}),[]);let a=(0,r.useCallback)((e,t,n,r,l)=>{if((0,d.s)(e)){var a;null==(a=s.current)||a.call(s,e,t,n,r,l),i({...o,lastLog:{level:0,msg:"[WINDOW] ".concat(null==l?void 0:l.message)}})}},[s,i]),c=(0,r.useCallback)(function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(0,d.s)(n)&&(null==(e=l.current)||e.call(l,...n),i({...o,lastLog:{level:1,msg:JSON.stringify([...n])}}))},[l,i]);return(0,n.jsx)(S.Provider,{value:o,children:(0,n.jsx)(j.IBQ,{logger:t,children:e.children})})},()=>!0);function I(e){let{logger:t}=(0,r.useContext)(S);return(0,n.jsx)(j.DNH,{options:{logger:t},children:e.children})}var D=o(25091),E=o(80890),R=o(59850);function B(e){let{state:t}=(0,r.useContext)(l.j),{state:o}=(0,D.E)(),{meetingStatus:i}=(0,r.useContext)(R.s),{lastLog:s}=(0,r.useContext)(S),a=(0,j.GYC)(),{selectedDevice:c}=(0,j.xtX)(),u=(0,j.j6L)(),[p,f]=(0,r.useState)(),[x]=(0,r.useState)({voiceFocusFellBackToInnerStream:(e,t)=>{console.warn("VoiceFocus fell back to inner stream",e,t)},voiceFocusInsufficientResources:()=>{console.warn("VoiceFocus insufficient resources")}});(0,r.useEffect)(()=>{c!==p&&(0,E.Xb)(p)&&p.removeObserver(x),f(c),(0,E.Xb)(c)&&c.addObserver(x)},[c]);let h=(0,r.useRef)(!1),g=async e=>{if(i!==j.e0s.Succeeded)return void console.debug("ZgChimeMonitor: Meeting not in Succeeded state, not restarting audio input.");if(h.current)return void console.debug("ZgChimeMonitor: Already restarting audio input.");h.current=!0,console.debug("ZgChimeMonitor: Restarting audio input shortly..."),await new Promise(t=>setTimeout(t,e)),console.debug("ZgChimeMonitor: Restarting audio input now."),h.current=!0;try{var t,n;let e=(0,E.Xb)(p)?p.getInnerDevice():(0,d.s)(p)?p:null!=(n=o.preference.audioDevice)?n:null==(t=a.audioInputDevices)?void 0:t[0];if(console.info("ZgChimeMonitor: Restarting audio input device",e),(0,d.s)(e)){if((0,E.Xb)(p))try{await p.stop()}catch(e){console.warn("Error encountered stopping audio transform device.",e)}await a.startAudioInputDevice(e)}else throw"No device preferences found."}catch(e){console.error("ZgChimeMonitor: Failed to restart audio input device",e)}finally{h.current=!1}};(0,r.useEffect)(()=>{void 0!==s&&(s.msg.includes("SendingAudioFailure health policy maximum warnings breached.")&&(console.warn("ZgChimeMonitor: Detected audio failure log."),g(0)),s.msg.includes("Cannot read properties of undefined (reading 'destroy_audio_buffer')")&&(console.warn("ZgChimeMonitor: Detected uncaught transform error log."),g(0)))},[s]);let v=["signalingDropped","sendingAudioFailed","meetingReconnected"];(0,r.useEffect)(()=>{void 0!==u&&(console.debug("ZgChimeMonitor: Meeting event",u.name),v.some(e=>e===u.name)&&!h.current&&g(2e3))},[u]);let m=(0,r.useRef)(!1);(0,r.useEffect)(()=>{console.debug("ZgChimeMonitor: Meeting status: ".concat(j.e0s[i])),i===j.e0s.Succeeded&&m.current&&g(0),m.current=!0},[i]),(0,r.useEffect)(()=>{i===j.e0s.Succeeded?A.DefaultDeviceController.getAudioContext().addEventListener("statechange",b):A.DefaultDeviceController.getAudioContext().removeEventListener("statechange",b)},[]);let b=(0,r.useCallback)(async e=>{let t=A.DefaultDeviceController.getAudioContext();if("suspended"===t.state)for(console.warn("ZgChimeMonitor: Audio context state: ".concat(t.state));"suspended"===t.state;)await t.resume(),await new Promise(e=>setTimeout(e,100)),"suspended"===t.state&&console.warn("ZgChimeMonitor: Failed to resume audio context - attempt ".concat(1," of 10."))},[]),w=(0,r.useRef)(void 0),[C,y]=(0,r.useState)(),[k,I]=(0,r.useState)();return(0,r.useEffect)(()=>{var e;y(null==(e=o.current.availableAudioInputDevices)?void 0:e.find(e=>"default"===e.deviceId))},[o.current.availableAudioInputDevices]),(0,r.useEffect)(()=>{(async e=>{I(await (0,j.IPJ)(e))})(o.current.audioInputDevice)},[o.current.audioInputDevice]),(0,r.useEffect)(()=>{"default"===k&&(0,d.s)(C)&&(0,d.s)(w.current)&&C.label!==w.current.label&&g(0),w.current=C},[C]),(0,n.jsx)(n.Fragment,{children:e.children})}var F=o(45238);function M(e){let[t,o]=(0,r.useState)({}),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(),{deviceId:p,role:f}=(0,r.useContext)(s.yk),x=(0,D.E)(),[h,g]=(0,r.useState)();(0,r.useEffect)(()=>(a.A.on(a.m.WSS_Distribute_Message,g),a.A.on(a.m.Media_Playback_Update,g),()=>{a.A.off(a.m.WSS_Distribute_Message,g),a.A.off(a.m.Media_Playback_Update,g)}),[]),(0,r.useEffect)(()=>{if(void 0!==h)switch(h.type){case a.m.WSS_Distribute_Message:m(h.data);break;case a.m.Media_Playback_Update:v(h.data)}},[h]);let v=e=>{o({...t,[e.videoId]:{update:e}})};(0,r.useEffect)(()=>{l(Object.entries(t).some(e=>e[1].update.isPlaying))},[t]),(0,r.useEffect)(()=>{i&&(d(x.state.current.isAudioEnabled),x.state.current.isAudioEnabled&&(f===u.sW.Controller&&Object.entries(t).some(e=>{let[t,o]=e;return!0===o.update.isPlaying&&!1===o.update.muteFacilitator})||x.controls.selectAudioEnabled(!1))),i||void 0===c||x.state.current.isAudioEnabled===c||x.controls.selectAudioEnabled(c)},[i]);let m=e=>{"mute-update"===e.type&&b(e.content.pids)},b=e=>{x.state.current.isAudioEnabled&&(e.some(e=>e===p)||e.some(e=>"*"===e))&&x.controls.selectAudioEnabled(!1)};return(0,n.jsx)(n.Fragment,{children:e.children})}var T=o(62652),L=o(48484);function O(e){let[t,o]=(0,r.useState)(),{zgJoinResponse:i}=(0,r.useContext)(F.K);return(0,r.useEffect)(()=>{console.debug("ZgVoiceFocus notes a change in joinResponse",i),(0,d.s)(null==i?void 0:i.createMeetingResponseJson)&&o(JSON.parse(i.createMeetingResponseJson))},[i]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(j.GZo,{options:{preload:!0},createMeetingResponse:t,children:e.children})})}let K=(0,r.memo)(function(e){return(0,r.useEffect)(()=>{console.debug("Meeting preferences updated:",e.preferences)},[e.preferences]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(k,{level:A.LogLevel.WARN,children:(0,n.jsx)(j.Fjh,{children:(0,n.jsx)(F.A,{joinView:(0,n.jsx)(()=>(0,n.jsxs)(n.Fragment,{children:[e.isPreview&&(0,n.jsxs)(m.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(b.A,{}),(0,n.jsx)(w.A,{severity:"info",children:"Setting up video call preview..."})]}),!e.isPreview&&(0,n.jsx)(L.A,{preTitle:(0,n.jsx)(T.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(T.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."})]}),{}),isPreview:e.isPreview,children:(0,n.jsx)(I,{children:(0,n.jsx)(R.A,{children:(0,n.jsx)(O,{children:(0,n.jsx)(D.A,{initialPrefs:e.preferences,onUpdatePrefs:e.onUpdatePrefs,children:(0,n.jsx)(M,{children:(0,n.jsx)(B,{children:(0,n.jsx)(C.NP,{theme:j._kl,children:e.children})})})})})})})})})})})});var P=o(31240),W=o(57476),N=o(77757),V=o(13202);let H=(0,r.memo)(function(e){let{onSubmitPreferences:t}=e,[o,i]=(0,r.useState)(!1),{role:l}=(0,r.useContext)(s.yk),a=(0,r.useRef)(void 0);return(0,r.useEffect)(()=>{t(o,a.current)},[t,o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.A,{className:"preview-call-and-alert-container",sx:{display:"flex",flexDirection:"column",gap:1,height:"45vh",width:"100%"},children:(0,n.jsx)(K,{isPreview:!0,preferences:void 0,onUpdatePrefs:e=>{a.current=e},children:(0,n.jsx)(N.Ay,{role:l,children:(0,n.jsxs)(m.A,{className:"preview-call-container",sx:{backgroundColor:"callControlPanelBackground.main",borderRadius:"10px",display:"flex",flexDirection:"column",height:"100%"},children:[(0,n.jsx)(V.A,{isPreview:!0}),(0,n.jsxs)(m.A,{className:"preview-call-controls-container",sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pl:2},children:[(0,n.jsx)(W.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!0}),(0,n.jsx)(m.A,{className:"join-button-container",sx:{alignContent:"center"},children:(0,n.jsx)(e=>{let{intent:t}=e;return console.debug("Button with intent to join:",t),(0,n.jsx)(P.A,{btnKey:"join",disableFocusRipple:!0,sx:e=>({backgroundColor:"callControlButton.main",color:"buttonStandard.main",mr:2,my:1,"&:hover":{backgroundColor:"callControlButton.light"},"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"}}),variant:t?"outlined":"contained",onClick:e=>i(!t),btnText:t?(0,n.jsx)(T.A,{i18nKey:"onboarding.leaveWorkshop"}):(0,n.jsx)(T.A,{i18nKey:"onboarding.joinWorkshop"})})},{intent:o})})]})]})})})})})},(e,t)=>!0);var U=o(91998),_=o(10310),Z=o(66622),z=o(18414);function J(e){let{sid:t,period_ms:o=3e4,enabled:n=!0,duration_ms:i=6e5}=e,s=(0,r.useRef)(null),l=(0,r.useRef)(Date.now()),[a,c]=(0,r.useState)(),{api:u,start:p}=(0,r.useContext)(z.F$);return(0,r.useEffect)(()=>(l.current=Date.now(),s.current=setInterval(async()=>{let e=Date.now()-l.current;if(n&&("indefinite"===i||e<=i)){let e=await p(u.getBasicDeliberationSession(t,"session-state-poll"));(0,d.s)(e)&&c(e)}},o),()=>{(0,d.s)(s.current)&&clearInterval(s.current)}),[t,o,i,n]),{session:a}}var G=o(80317),X=o(24274);function q(){let{setParticipantSessionFlags:e}=(0,r.useContext)(U.C),{sid:t}=(0,r.useContext)(_.L),{t:o}=(0,X.Bd)(),{session:i}=J({sid:t});(0,r.useEffect)(()=>{a.A.emit({type:a.m.WSS_Request_Disconnect})},[]),(0,r.useEffect)(()=>{(0,d.s)(i)&&i.facilitationState===u.ve.Closed&&s()},[i]);let s=()=>{e({leftTheWorkshop:!1}),a.A.emit({type:a.m.WSS_Request_Reconnect})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{color:"white",sx:{mb:4},variant:"h1",children:(0,n.jsx)(T.A,{i18nKey:"workshop.participantLeftHeading"})}),(0,n.jsx)(G.A,{color:"white",sx:{mb:6},variant:"h2",children:(0,n.jsx)(T.A,{i18nKey:"workshop.participantLeftGuidance"})}),(0,n.jsx)(P.A,{color:"buttonReverse",btnText:o("workshop.rejoinCta"),btnKey:"start",onClick:s})]})}var Q=o(37440),Y=o(52769);function $(e){let t="collective.intelligence@nesta.org.uk",o=e.showHeading,i=e.showSignupMethods&&!0,[s,l]=(0,r.useState)(),{sid:c}=(0,r.useContext)(_.L),{session:p}=J({sid:c});(0,r.useEffect)(()=>{a.A.emit({type:a.m.WSS_Request_Disconnect})},[]),(0,r.useEffect)(()=>{(0,d.s)(p)&&p.facilitationState!==u.ve.Closed&&f()},[p]);let f=()=>{a.A.emit({type:a.m.WSS_Request_Reconnect})};return(0,r.useEffect)(()=>{{let e="".concat(window.location.host,"/signup");Y.toDataURL(e).then(e=>{l(e)}).catch(e=>{l(void 0),console.error(e)})}},[!0]),(0,n.jsxs)(m.A,{color:"#fff",sx:{display:"flex",flexDirection:"column",gap:"1.5vh"},children:[o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{variant:"h2",sx:{fontWeight:"bold"},children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.sessionIsClosedRegisterLinkAvailable"})}),(0,n.jsx)(G.A,{color:"white",component:"h2",variant:"h5",sx:{mt:1},children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.encouragement"})})]}),i&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(m.A,{children:[(0,n.jsx)(G.A,{sx:{borderTop:o?"1px solid #fff;":"none",mt:2*!!o,pt:3*!!o},children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.visitWebsite"})}),(0,n.jsx)(Q.A,{href:"/signup",target:"_blank",variant:"h3",color:"#fff",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.signUpText"})}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{sx:{pt:2},children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.orScanQrCode"})}),(0,n.jsx)("img",{alt:"QR code for signup link: ".concat(window.location.host,"/signup}"),src:s,style:{borderRadius:"5px",marginTop:"0.5rem",height:"175px",width:"175px"}})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{sx:{borderTop:"1px solid #ffffffff;",mt:3,pt:3},children:(0,n.jsx)(T.A,{i18nKey:"onboarding.sessionClosed.emailUs"})}),(0,n.jsx)(Q.A,{href:"mailto:".concat(t),target:"_blank",variant:"h5",color:"#fff",children:t})]})]})})]})}var ee=o(79005),et=o(90073);function eo(e){return(0,n.jsxs)(et.A,{sx:{display:"flex",flexDirection:"column",gap:1,pt:4},children:[e.session.facilitationState>=u.ve.Closed&&(0,n.jsx)(w.A,{severity:"warning",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.thisWorkshopIsClosed"})}),e.session.facilitationState===u.ve.Open&&!e.banned&&(0,n.jsxs)(w.A,{severity:"success",children:[(0,n.jsx)(T.A,{i18nKey:"onboarding.thisWorkshopIsOpen"}),(0,n.jsx)("br",{}),(0,n.jsx)(T.A,{i18nKey:"onboarding.pressJoinToEnter"})]}),e.banned&&(0,n.jsx)(w.A,{severity:"error",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.youAreRemoved"})})]})}function en(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{variant:"body1",color:"white",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(ee.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(m.A,{sx:{display:"flex",flexDirection:"column",gap:1,mt:4},children:(0,n.jsx)(eo,{session:e.session,banned:!0})})]})}var er=o(91028),ei=o(39620),es=o(25148),el=o(2218),ea=o(14962),ec=o(77524),ed=o(24251);function eu(){let[e,t]=(0,r.useState)(!1),[o,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&setTimeout(()=>{l(!0)},3e3)},[e]);let[c]=(0,er.Q)();return(0,n.jsxs)(ea.A,{children:[(0,n.jsx)(ec.A,{expandIcon:(0,n.jsx)(ei.A,{}),"aria-controls":"support-panel-content",id:"support-panel",children:(0,n.jsx)(G.A,{variant:"body1",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.supportInfoHeading"})})}),(0,n.jsx)(ed.A,{children:(0,n.jsxs)(m.A,{sx:{display:"flex",flexDirection:"column",gap:1},ref:c,children:[(0,n.jsx)(G.A,{variant:"body2",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.supportInfoText1"})}),(0,n.jsx)(P.A,{variant:"outlined",btnKey:"reconnect",size:"small",busy:o,startIcon:(0,n.jsx)(es.A,{}),onClick:()=>{a.A.emit({type:a.m.WSS_Refresh_Session}),i(!0),setTimeout(()=>{i(!1),t(!0)},2e3)},btnText:(0,n.jsx)(T.A,{i18nKey:"button.reconnect"})}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{variant:"body2",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.supportInfoText2"})}),(0,n.jsx)(P.A,{variant:"outlined",btnKey:"reconnect",size:"small",startIcon:(0,n.jsx)(el.A,{}),onClick:()=>window.location.reload(),btnText:(0,n.jsx)(T.A,{i18nKey:"button.reload"})})]})]})})]})}function ep(e){let t=e=>e.facilitationState===u.ve.Ready;return console.debug("session join info: start intention = ",e.startIntention),console.debug("session join info: isWaiting = ",t(e.session)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{variant:"body1",color:"white",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(ee.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(eo,{session:e.session,banned:e.banned}),e.startIntention&&t(e.session)&&(0,n.jsxs)(et.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(w.A,{severity:"info",children:(0,n.jsx)(T.A,{i18nKey:"onboarding.waitingForOpen"})}),(0,n.jsx)(eu,{})]})]})}let ef=e=>e.remoteConfiguration===u.LQ.RemoteWithVideoCall;function ex(e){let{session:t}=(0,r.useContext)(g.$),{publicContent:o}=(0,r.useContext)(_.L),{deviceId:i}=(0,r.useContext)(s.yk),[l,a]=(0,r.useState)(!1);console.debug("ZgOnboardingMeetingSetup render"),(0,r.useEffect)(()=>{(0,d.s)(t.deviceIdBanList)&&a(t.deviceIdBanList.includes(i))},[t,i]);let c=t.facilitationState===u.ve.Closed&&e.role===u.sW.Client;return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)(Z.A,{background:!0,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(en,{session:t})}),c&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z.A,{background:!0,rightHalfBackground:"#3E7075CC",rightPanel:(0,n.jsx)($,{showHeading:!1,showSignupMethods:!0}),privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)($,{showHeading:!0,showSignupMethods:!1})})}),!c&&e.participantLeft&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z.A,{background:!0,rightHalfBackground:"#3E7075CC",privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(q,{})})}),!l&&!c&&!e.participantLeft&&(0,n.jsxs)(n.Fragment,{children:[ef(t)&&(0,n.jsx)(Z.A,{background:!1,rightPanel:e.videoCallPreview,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(ep,{session:t,banned:l,role:e.role,startIntention:e.startIntention})}),!ef(t)&&(0,n.jsx)(Z.A,{background:!1,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(ep,{session:t,banned:l,role:e.role,startIntention:e.startIntention})})]})]})}function eh(e){var t;let{session:o}=(0,r.useContext)(g.$),{deviceId:i}=(0,r.useContext)(s.yk),{participantSessionFlags:l}=(0,r.useContext)(U.C),a=o.remoteConfiguration===u.LQ.RemoteWithVideoCall,c=(0,r.useRef)(void 0),[d,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),[m,b]=(0,r.useState)(!a),[w,j]=(0,r.useState)(!1),A=(0,r.useCallback)((e,t)=>{console.debug("onStartIntention",e,t),c.current=t,b(e)},[]);return(0,r.useEffect)(()=>{console.debug("deviceId changed",i)},[i]),(0,r.useEffect)(()=>{var e,t;p(o.facilitationState===u.ve.Open),x(null!=(t=null==(e=o.deviceIdBanList)?void 0:e.includes(i))&&t)},[i,o]),(0,r.useEffect)(()=>{let t,o;j((t=e.role,o=null==l?void 0:l.leftTheWorkshop,m&&(d||t===u.sW.Controller)&&(!f||t===u.sW.Controller)&&(!o||t===u.sW.Controller)))},[d,m,f,e.role,null==l?void 0:l.leftTheWorkshop]),(0,n.jsxs)(n.Fragment,{children:[!w&&(0,n.jsx)(ex,{participantLeft:null==l?void 0:l.leftTheWorkshop,role:e.role,startIntention:m,videoCallPreview:a?(0,n.jsx)(H,{onSubmitPreferences:A}):void 0}),w&&a&&(0,n.jsxs)(K,{isPreview:!1,preferences:null!=(t=c.current)?t:v.gZ,children:[(0,n.jsx)(h,{}),e.children]}),w&&!a&&(0,n.jsx)(n.Fragment,{children:e.children})]})}},57476:(e,t,o)=>{o.d(t,{LL:()=>Z,jg:()=>z,xP:()=>J,Ui:()=>G,CX:()=>X,Ay:()=>q,E0:()=>_});var n=o(95155),r=o(78211),i=o(84073),s=o(10310),l=o(18414),a=o(18932),c=o(62652),d=o(31240),u=o(54884),p=o(25789),f=o(80357),x=o(80317),h=o(32276),g=o(39142),v=o(71385),m=o(12115),b=o(23387),w=o(25091),j=o(80890),A=o(84389),C=o(34804),y=o(19131),S=o(23405),k=o(45279),I=o(48464),D=o(39970),E=o(5917),R=o(35130),B=o(88379),F=o(90073);function M(e){let t=(0,h.YGn)(),[o,r]=(0,m.useState)(0),{muted:i}=(0,h.abu)(),s=(0,m.useCallback)(e=>{i?r(0):r(parseFloat(e.toFixed(2)))},[r,i]);(0,h.q8N)(s);let l=e=>(0,n.jsx)(F.A,{sx:{borderWidth:1,flexGrow:1,height:"".concat(.25,"rem"),borderTopLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderBottomLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderTopRightRadius:e.isEnd?"".concat(.125,"rem"):0,borderBottomRightRadius:e.isEnd?"".concat(.125,"rem"):0,backgroundColor:o>=e.min?e.indicatorColor:"transparent",...e.sx}});return(0,n.jsxs)(F.A,{sx:{display:"flex",flexDirection:"row",gap:0,...e.sx},children:[!i&&Array(20).fill(void 0).map((e,t)=>.05*t).map((e,r)=>(0,n.jsx)(l,{min:e,value:o,indicatorColor:"callControlMenuItem.main",isStart:0===r,isEnd:e<=o&&o<e+.05},"meter-".concat(t,"-cell-").concat(r))),i&&(0,n.jsx)(c.A,{i18nKey:"audio.muted"})]})}function T(e){let t=(0,p.A)(),o=(0,m.useCallback)(async()=>{let t=new Audio("/sounds/00-ding.mp3");if(t.volume=.5,(0,u.s)(e.config.state.current.audioOutputDevice))if((0,u.s)(t.setSinkId))try{await t.setSinkId(e.config.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for AudioMenu (test speaker)",e)}else console.debug("Audio.setSinkId not defined");return t},[e.config.state]),r=(0,m.useCallback)(async()=>{(await o()).play()},[o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:G},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"audio.audioOutputSelection"})})})}),e.audioOutputDeviceList.map(t=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var o;return o=t.deviceType.deviceId,void e.config.controls.selectAudioOutputDevice(o)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[t.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!t.selected,sx:{color:t.selected?"callControlButton.main":"callControlMenuItem.main"},children:_(t.deviceType)})]},"menu-item-select-".concat(t.deviceType.label))),(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsxs)(S.A,{disableRipple:!1,sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),onClick:()=>{r()},children:[(0,n.jsx)(k.A,{children:(0,n.jsx)(R.A,{color:t.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main"},children:"Test speaker"})]},"menu-item-output-audio-test")]})}function L(e){var t,o;let r=(0,p.A)(),i=async t=>{e.config.controls.selectVoiceFocus(t)},s=e.config.state.settings.offerVoiceFocus&&!0===e.config.state.current.isVoiceFocusSupported;return(0,n.jsxs)(I.A,{...(0,B.NA)(e.popupState),anchorPosition:{left:null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().left,top:(null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().top)-z},anchorReference:"anchorPosition",sx:X,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:G},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"audio.audioInputSelection"})})})}),e.audioInputDeviceList&&e.audioInputDeviceList.map(t=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var o;return o=t.deviceType.deviceId,void e.config.controls.selectAudioDevice(o)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[t.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!t.selected,sx:{color:t.selected?"callControlButton.main":"callControlMenuItem.main"},children:_(t.deviceType)})]},"menu-item-select-".concat(t.deviceType.label))),s&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),s&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>i(!e.config.state.current.isVoiceFocusEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isVoiceFocusEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isVoiceFocusEnabled,sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(c.A,{i18nKey:"audio.reduceBackgroundNoise"})})]},"menu-item-select-voice-focus"),e.showAudioInputVisualisation&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),e.showAudioInputVisualisation&&(0,n.jsxs)(D.Ay,{sx:{mb:1},children:[(0,n.jsx)(k.A,{sx:{minWidth:"36px"},children:(0,n.jsx)(g.A,{color:r.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{pl:0},children:(0,n.jsx)(M,{sx:{width:"100%",minWidth:"100px",userSelect:"none",color:"callControlMenuItem.main"}})})]},"menu-item-input-audio-visualisation"),e.audioOutputDeviceList&&0!==e.audioOutputDeviceList.length&&(0,n.jsx)(T,{config:e.config,audioOutputDeviceList:e.audioOutputDeviceList})]})}var O=o(19672),K=o(50533),P=o(53e3),W=o(60193),N=o(24274);function V(e){let{t}=(0,N.Bd)(),o="";return"audio"===e.control?o=t("audio.settingsMenu"):"camera"===e.control&&(o=t("video.settingsMenu")),(0,n.jsx)(W.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":o,...(0,B.cO)(e.popupState),sx:t=>({backgroundColor:e.enabled?"callControlMenuButton.main":"callControlButtonOff.dark",borderRadius:"30px",height:"100%",pl:"10px",pr:"calc(".concat(Z," + 6px)"),"&:hover":{backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.dark"},"&:focus-visible":{...t.customStyles.focusRingReverse}}),children:e.popupState.isOpen?(0,n.jsx)(K.A,{sx:{color:"callControlButtonIcon.main"}}):(0,n.jsx)(P.A,{sx:{color:"callControlButtonIcon.main"}})})}var H=o(26667);function U(e){var t,o;let r=async t=>{e.config.controls.selectBackgroundBlur(t)},i=e.config.state.settings.offerBackgroundBlur&&!0===e.config.state.current.isBackgroundBlurSupported;return(0,n.jsxs)(I.A,{...(0,B.NA)(e.popupState),anchorPosition:{left:null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().left,top:(null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().top)-z},anchorReference:"anchorPosition",sx:X,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:G},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"video.videoInputSelection"})})})}),e.videoDeviceList&&e.videoDeviceList.map(t=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var o;return o=t.deviceType.deviceId,void e.config.controls.selectVideoDevice(o)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[t.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!t.selected,sx:{color:t.selected?"callControlButton.main":"callControlMenuItem.main"},children:_(t.deviceType)})]},"menu-item-select-".concat(t.deviceType.label))),i&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),i&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>r(!e.config.state.current.isBackgroundBlurEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isBackgroundBlurEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(H.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isBackgroundBlurEnabled,sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(c.A,{i18nKey:"video.blurBackground"})})]},"menu-item-select-background-blur")]})}let _=e=>e.label,Z="52px",z=8,J="36px",G="6px",X={"& .MuiPaper-root":{backgroundColor:"callControlMenuBackground.main",border:"2px solid",borderColor:"callControlButton.main",borderRadius:"10px"}};function q(e){let{meetingDebug:t}=(0,m.useContext)(r.c),[o,A]=(0,m.useState)(),[C,y]=(0,m.useState)(),[S,k]=(0,m.useState)(),{start:I,api:D}=(0,m.useContext)(l.F$),{sid:E}=(0,m.useContext)(s.L),{role:R,user:B,sessionToken:F,deviceId:T}=(0,m.useContext)(i.yk),K=(0,w.E)(),P=(0,p.A)(),W=async()=>{K.controls.selectVideoEnabled(!K.state.current.isVideoEnabled)},N=async()=>{K.controls.selectAudioEnabled(!K.state.current.isAudioEnabled)};(0,m.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableAudioInputDevices)){let e=(0,u.s)(K.state.current.audioInputDevice)?await (0,h.IPJ)(await (0,j.l1)(K.state.current.audioInputDevice)):void 0;A(K.state.current.availableAudioInputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state.current.availableAudioInputDevices,K.state.current.audioInputDevice]),(0,m.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableAudioOutputDevices)){let e=(0,u.s)(K.state.current.audioOutputDevice)?await (0,h.IPJ)(K.state.current.audioOutputDevice):void 0;y(K.state.current.availableAudioOutputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state.current.availableAudioOutputDevices,K.state.current.audioOutputDevice]),(0,m.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableVideoInputDevices)){let e=(0,u.s)(K.state.current.videoInputDevice)?await (0,j.oq)(K.state.current.videoInputDevice):void 0;k(K.state.current.availableVideoInputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state.current.availableVideoInputDevices,K.state.current.videoInputDevice]);let H=e=>(0,n.jsx)(f.A,{className:e.className,sx:{height:Z,mx:"auto",position:"relative",width:"fit-content"},children:e.children});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.A,{className:e.className,sx:{display:"flex",flexDirection:e.direction,gap:2,justifyContent:"center",my:2,...e.sx},children:[(0,n.jsxs)(f.A,{className:"outer-container",children:[(0,n.jsxs)(H,{className:"camera-controls-container",children:[e.showCameraConfigMenu&&(0,n.jsx)(v.Ay,{variant:"popover",popupId:"camera-menu-popup",children:t=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{busy:e.busy,control:"camera",enabled:K.state.current.isVideoEnabled,popupState:t}),(0,n.jsx)(U,{config:K,popupState:t,videoDeviceList:S})]})}),(0,n.jsx)(O.A,{busy:e.busy,control:"camera",enabled:K.state.current.isVideoEnabled,showMenu:e.showCameraConfigMenu,toggleFn:W})]}),b.BX&&(0,n.jsx)(x.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"video.videoInputSelection"})})]}),(0,n.jsxs)(f.A,{className:"outer-container",children:[(0,n.jsxs)(H,{className:"audio-controls-container",children:[e.showAudioConfigMenu&&(0,n.jsx)(v.Ay,{variant:"popover",popupId:"audio-menu-popup",children:t=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{busy:e.busy,control:"audio",enabled:K.state.current.isAudioEnabled,popupState:t}),(0,n.jsx)(L,{audioInputDeviceList:o,audioOutputDeviceList:C,config:K,showAudioInputVisualisation:!0,popupState:t})]})}),(0,n.jsx)(O.A,{busy:e.busy,control:"audio",enabled:K.state.current.isAudioEnabled,showMenu:e.showAudioConfigMenu,toggleFn:N})]}),b.BX&&(0,n.jsx)(x.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"audio.audioInputSelection"})})]}),e.isPreview&&(0,n.jsxs)(f.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,n.jsx)(f.A,{sx:{color:"callControlMenuItem.main",fontSize:"0.75rem",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"onboarding.preview.audio.prompt"})}),(0,n.jsxs)(f.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",gap:.5,height:"1.5rem"},children:[(0,n.jsx)(g.A,{color:P.palette.callControlButtonIcon.main,size:"1.25rem"}),(0,n.jsx)(M,{sx:{color:"callControlMenuItem.main",width:"100px"}})]})]}),!e.isPreview&&t&&R===a.sW.Controller&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.A,{btnKey:"init-meeting",variant:"outlined",color:"buttonReverse",onClick:()=>{I(D.postFacilitatorAction(B.access_token,F,{action:"init-meeting",sessionId:E,ticks:new Date().getTime(),originator:T,parameters:{force:!0}}))},btnText:"RE-INIT"})})]})})}},59850:(e,t,o)=>{o.d(t,{A:()=>g,s:()=>h});var n=o(95155),r=o(32276),i=o(34824),s=o(12115),l=o(98314),a=o(78211),c=o(57300),d=o(84073),u=o(18932),p=o(54884),f=o(23387),x=o(45238);let h=(0,s.createContext)({});function g(e){let t=(0,r.GYC)(),o=(0,r.VjK)(),g=(0,s.useContext)(a.c),[v,m]=(0,s.useState)({meetingStatus:o,isStarted:!1}),{session:b}=(0,s.useContext)(l.$),{subscriptions:w}=(0,s.useContext)(c.f),{role:j,deviceId:A}=(0,s.useContext)(d.yk),{zgJoinResponse:C,isPreview:y}=(0,s.useContext)(x.K),[S,k]=(0,s.useState)(),[I,D]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(0,p.s)(b.deviceIdBanList)&&D(b.deviceIdBanList.includes(A))},[b,A]),(0,s.useEffect)(()=>()=>{t.getAttendee=void 0,t.leave()},[t]),(0,s.useEffect)(()=>{m(e=>({...e,meetingStatus:o}))},[o]),(0,s.useEffect)(()=>{o===r.e0s.Succeeded&&I&&t.leave()},[o,I,t]),(0,s.useEffect)(()=>{let e;if(e=b.facilitationState,!I&&void 0!==C&&(j===u.sW.Controller||e===u.ve.Open||y)){if(C.chimeMeetingId!==(null==S?void 0:S.meetingId)){let e=new i.MeetingSessionConfiguration({MeetingId:C.chimeMeetingId,MediaPlacement:{AudioHostUrl:C.audioHostUrl,SignalingUrl:C.signalingUrl,TurnControlUrl:C.turnControlUrl,AudioFallbackUrl:C.audioFallbackUrl,EventIngestionUrl:C.eventIngestionUrl,ScreenDataUrl:C.screenDataUrl,ScreenViewingUrl:C.screenViewingUrl}},{ExternalUserId:C.chimeAttendeeExternalId,AttendeeId:C.chimeAttendeeId,JoinToken:C.chimeJoinToken});console.debug("ZgMeetingConnectionProvider: updating meeting config",C,e),k(e)}}else k(void 0)},[j,b.facilitationState,C,y,S,I]),(0,s.useEffect)(()=>{(async()=>{if(t.meetingId!==(null==S?void 0:S.meetingId)&&(console.debug("ZgMeetingConnectionProvider: Current meeting id has changed...",null==S?void 0:S.meetingId),o===r.e0s.Succeeded&&(console.debug("ZgMeetingConnectionProvider: Disconnecting from previous meeting..."),await t.leave()),(0,p.s)(null==S?void 0:S.meetingId)&&o!==r.e0s.Succeeded&&o!==r.e0s.Reconnecting))try{let e;console.debug("ZgMeetingConnectionProvider: Joining meeting...",S);await t.join(S,(null!=g.voiceFocus||f.aW,{deviceLabels:r.iin.AudioAndVideo,enableWebAudio:!0,eventController:(e=S,new i.DefaultEventController(e,new i.ConsoleLogger("SDK",i.LogLevel.INFO),new i.NoOpEventReporter))})),console.debug("ZgMeetingConnectionProvider: Successfully joined meeting."),console.debug("ZgMeetingConnectionProvider: Starting meeting..."),await t.start(),console.debug("ZgMeetingConnectionProvider: Meeting start succeeded.")}catch(e){console.error("ZgMeetingConnectionProvider: Error joining meeting",e)}})()},[S,g.voiceFocus,t,o]),(0,s.useEffect)(()=>{t.getAttendee=async(e,t)=>{void 0===t&&console.warn("Undefined pid passed from chime.");var o,n=w.find(e=>e.deviceId===t);return void 0===n&&console.warn("No subscription found for pid: ".concat(t),w),{name:null!=(o=null==n?void 0:n.participantName)?o:"Unknown"}}},[t,w]),(0,s.useEffect)(()=>{console.debug("ZgMeetingConnectionProvider: meeting status: ".concat(r.e0s[o])),m(e=>({...e,isStarted:o===r.e0s.Succeeded}))},[o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.Provider,{value:v,children:e.children})})}},77757:(e,t,o)=>{o.d(t,{Ay:()=>u,nh:()=>d,qW:()=>c});var n=o(95155),r=o(18932),i=o(12115),s=o(57300),l=o(45238),a=o(17448);let c=(0,i.createContext)({}),d=(e,t)=>{if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o].subscriptionId!=e[o].subscriptionId)return!1;return!0};function u(e){let{subscriptions:t,deviceIdBanList:o,thisUser:u}=(0,i.useContext)(s.f),{isPreview:p}=(0,i.useContext)(l.K),[f,x]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[v,m]=(0,i.useState)({tiles:[]});(0,i.useEffect)(()=>{let n=t.filter(e=>void 0===o.find(t=>e.deviceId===t)),i=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===r.sW.Controller)].sort((e,t)=>e.deviceId.localeCompare(t.deviceId)),s=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===r.sW.Client)].sort((e,t)=>e.deviceId.localeCompare(t.deviceId)),l=p?u?[u]:[]:e.role===r.sW.Client?[...i,...u?[u]:[],...s]:[...u?[u]:[],...i,...s];d(l,f)||x(l)},[t,o]);let b=e=>"video-tile-".concat(e.subscriptionId);return(0,i.useEffect)(()=>{let e=[];f.forEach((t,o)=>{let r=h.find(e=>e.key===b(t));r?e.push(r):e.push((0,n.jsx)(a.Ay,{subscription:t,test:!1},b(t)))}),((e,t)=>{if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o].key!==t[o].key)return!1;return!0})(e,h)||g(e)},[f]),(0,i.useEffect)(()=>{m({tiles:h})},[h]),(0,n.jsx)(c.Provider,{value:v,children:e.children})}},80890:(e,t,o)=>{o.d(t,{Fp:()=>c,Xb:()=>i,eb:()=>d,l1:()=>l,oq:()=>a,wS:()=>s});var n=o(34824),r=o(54884);function i(e){return(0,r.s)(e)&&e instanceof n.VoiceFocusTransformDevice}function s(e){return(0,r.s)(e)&&e instanceof n.DefaultVideoTransformDevice}let l=async e=>(0,r.s)(e)?i(e)?await e.getInnerDevice():e:void 0,a=async e=>(0,r.s)(e)?s(e)?await e.getInnerDevice():e:void 0,c=async(e,t,o,n)=>{if(t&&!i(o)&&void 0===e)return console.debug("Unable to apply Voice Focus: not ready yet"),o;if(t&&!i(o)&&!1===e)return console.warn("Unable to apply Voice Focus: not supported"),o;let s=!0===e&&!0===t&&(0,r.s)(o)&&!i(o),l=!1===t&&(0,r.s)(o)&&i(o);return s?await n(o):l?(o.stop(),o.getInnerDevice()):void 0},d=async(e,t,o,n)=>{if(t&&!s(o)&&void 0===e)return console.debug("Unable to apply Background Blur: not ready yet"),o;if(t&&!s(o)&&!1===e)return console.warn("Unable to apply Background Blur: not supported"),o;let i=!0===e&&!0===t&&(0,r.s)(o)&&!s(o),l=!1===t&&(0,r.s)(o)&&s(o);return i?(console.debug("Applying background blur to video device",o),await n(o)):l?o.getInnerDevice():void 0}},89207:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(95155),r=o(80357),i=o(4615),s=o(32276),l=o(12115),a=o(24274),c=o(62652),d=o(39268),u=o(59850);let p=[s.e0s.Failed,s.e0s.Ended,s.e0s.JoinedFromAnotherDevice,s.e0s.TerminalFailure,s.e0s.Left];function f(e){let{meetingStatus:t}=(0,l.useContext)(u.s),[o,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t===s.e0s.Succeeded&&f(!0)},[t]);let[x,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{h(t===s.e0s.Succeeded||o&&!p.some(e=>e===t))},[t,o]);let g=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(t===s.e0s.Loading){var e;g.current=null!=(e=g.current)?e:setTimeout(()=>{v()},5e3)}return()=>{g.current&&(clearTimeout(g.current),g.current=null)}},[t]);let v=()=>{g.current&&(clearTimeout(g.current),g.current=null),x||b(!0)};(0,l.useEffect)(()=>{x&&(b(!1),g.current&&(clearTimeout(g.current),g.current=null))},[x]);let[m,b]=(0,l.useState)(!1),{t:w}=(0,a.Bd)();return(0,n.jsxs)(n.Fragment,{children:[x&&e.children,!x&&(0,n.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",...e.sx},children:[(t===s.e0s.Loading||t===s.e0s.Reconnecting)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{severity:"info",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.joining"})}),(0,n.jsx)(d.A,{options:[{key:"ready",text:"Ready",filled:!1}],open:m,setOpen:b,title:w("videoCall.outcomeMessages.interaction.title"),content:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.interaction.content"})})]}),t===s.e0s.Failed&&(0,n.jsx)(i.A,{severity:"error",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.failed"})}),t===s.e0s.Ended&&(0,n.jsx)(i.A,{severity:"warning",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.ended"})}),t===s.e0s.JoinedFromAnotherDevice&&(0,n.jsx)(i.A,{severity:"warning",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.joinedFromAnotherDevice"})}),t===s.e0s.TerminalFailure&&(0,n.jsx)(i.A,{severity:"error",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.terminalFailure"})}),t===s.e0s.Left&&(0,n.jsx)(i.A,{severity:"info",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.left"})})]})]})}},91998:(e,t,o)=>{o.d(t,{C:()=>ev,A:()=>em});var n=o(95155),r=o(12115),i=o(92253),s=o(18932),l=o(29733),a=o(25790),c=o(54884),d=o(11265),u=o(78211),p=o(80431),f=o(21644),x=o(10310),h=o(62652),g=o(57476),v=o(24274),m=o(60193),b=o(80317),w=o(91911),j=o(57915),A=o(90073),C=o(25612),y=o(57300),S=o(5611),k=o(55279),I=o(23387),D=o(19672);function E(e){let{thisUser:t}=(0,r.useContext)(y.f),o=(0,r.useContext)(C.j),[i,s]=(0,r.useState)(!1),l=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)(void 0),u=(0,j.A)(),{t:p}=(0,v.Bd)(),f=(0,k.A)(null==t?void 0:t.deviceId);return(0,r.useEffect)(()=>{(0,c.s)(null==f?void 0:f.raiseHand)||!0!==a.current?(0,c.s)(null==f?void 0:f.raiseHand)&&!0!==a.current&&(a.current=!0):(s(!0),a.current=!1,d.current=setTimeout(()=>{s(!1)},5e3))},[f]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.A,{className:"raise-hand-container",sx:{display:"flex",flexDirection:"column",mb:2,ml:0,mt:2},children:[(0,n.jsx)(A.A,{className:"raise-hand-button-container",sx:{display:"flex",flexDirection:"row",height:g.LL,justifyContent:"center"},children:(0,n.jsx)(m.A,{"aria-label":p((0,c.s)(null==f?void 0:f.raiseHand)?"button.lowerHand":"button.raiseHand"),disableRipple:!0,disableFocusRipple:!0,onClick:()=>{o.sendMessage({action:"user-signals",content:{signal:{kind:"raiseHand"},signalAction:(0,c.s)(null==f?void 0:f.raiseHand)?"remove":"add"},sid:e.session.id,type:"user-signals-request"})},ref:l,sx:e=>({backgroundColor:(0,c.s)(null==f?void 0:f.raiseHand)?"#ffffffff":"callControlButton.main",flexShrink:0,height:g.LL,mx:"auto",width:g.LL,"&:focus-visible":{backgroundColor:"callControlButton.dark",...e.customStyles.focusRingReverse},"&:hover":{backgroundColor:"callControlButton.dark"}}),children:(0,n.jsx)(S.A,{fill:(0,c.s)(null==f?void 0:f.raiseHand)?void 0:"transparent",height:D.N,stroke:(0,c.s)(null==f?void 0:f.raiseHand)?void 0:u.palette.callControlButtonIcon.main,width:D.N})})}),I.BX&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.A,{"aria-hidden":"true",sx:{height:0,textWrap:"nowrap",visibility:"hidden"},children:(0,n.jsx)(h.A,{i18nKey:"button.lowerHand"})}),(0,n.jsx)(b.A,{color:"white",sx:{textWrap:"nowrap",userSelect:"none"},children:(0,c.s)(null==f?void 0:f.raiseHand)?(0,n.jsx)(h.A,{i18nKey:"button.lowerHand"}):(0,n.jsx)(h.A,{i18nKey:"button.raiseHand"})})]})]}),(0,n.jsx)(w.Ay,{anchorEl:l.current,anchorOrigin:{horizontal:"center",vertical:-10},onClose:()=>{s(!1),clearTimeout(d.current)},open:i,slotProps:{paper:{sx:{backgroundColor:"transparent",boxShadow:"none"}}},transformOrigin:{horizontal:"center",vertical:"bottom"},children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{sx:{backgroundColor:"#ffffffff",borderRadius:"15px",boxShadow:"2px 4px 3px 0px #00000040",margin:"10px 10px 0 10px",padding:1.5},children:(0,n.jsx)(b.A,{sx:{userSelect:"none"},children:(0,n.jsx)(h.A,{i18nKey:"feedback.handLowered"})})}),(0,n.jsx)(A.A,{sx:{borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"12px solid #ffffffff",height:0,margin:"0 auto",width:0}})]})})]})}var R=o(77757),B=o(333),F=o(95507),M=o(27855),T=o(39268);function L(){let[e,t]=(0,r.useState)(!1),{setParticipantSessionFlags:o}=(0,r.useContext)(ev),{t:i}=(0,v.Bd)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{disableFocusRipple:!0,sx:e=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",height:"fit-content",px:3,py:1,width:"max-content","&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...e.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>t(!0),children:(0,n.jsx)(h.A,{i18nKey:"onboarding.leaveWorkshop"})}),(0,n.jsx)(T.A,{open:e,setOpen:t,onSelect:e=>{"leave"===e&&o({leftTheWorkshop:!0})},prompt:i("workshop.leaveConfirm"),options:[{key:"leave",text:i("workshop.leaveCta"),filled:!0},{key:"return",text:i("workshop.returnCta"),filled:!1}]})]})}var O=o(70835),K=o(15036),P=o(49502);function W(e){let{pageIndex:t,setPageIndex:o,totalPages:r,handleToggleTechSupport:i,session:s}=e,{t:l}=(0,v.Bd)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container",sx:{alignSelf:"center"},children:(0,n.jsxs)(A.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,n.jsx)(m.A,{disableFocusRipple:!0,disabled:t<1,onClick:()=>{t>0&&o(e=>e-1)},children:(0,n.jsx)(O.A,{color:"#f5f5f5",size:"32px"})}),(0,n.jsxs)(A.A,{sx:{color:"white"},children:["page ",t+1,"\xa0of\xa0",r]}),(0,n.jsx)(m.A,{disableFocusRipple:!0,disabled:t+1>=r,onClick:()=>{r>t+1&&o(e=>e+1)},children:(0,n.jsx)(K.A,{color:"#f5f5f5",size:"32px"})})]})}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(g.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:s})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifySelf:"end",pr:1},children:[(0,n.jsx)(L,{}),(0,n.jsxs)(m.A,{"aria-label":l("techSupport.buttons.support"),disableFocusRipple:!0,onClick:i,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(P.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(b.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.support"})})]})]})]})})}var N=o(79384),V=o(78055),H=o(91028),U=o(8085),_=o(95831),Z=o(25789),z=o(80357),J=o(17448);let G={w:960,h:700},X="".concat(G.w," / ").concat(G.h),q={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},Q={0:{[V.t.default]:{cols:1,rows:1},[V.t.deliberation]:{cols:1,rows:1}},1:{[V.t.default]:{cols:3,rows:2},[V.t.deliberation]:{cols:3,rows:2}},2:{[V.t.default]:{cols:3,rows:2},[V.t.deliberation]:{cols:3,rows:2}},3:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:3,rows:3}},4:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:3,rows:3}},5:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:3,rows:3}},6:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:3}},7:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:3}},8:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:3}},9:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:4}},10:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:4}},11:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:4}},12:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:4,rows:4}},13:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:5,rows:4}},14:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:5,rows:4}},15:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:5,rows:4}},16:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:5,rows:4}},17:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:4}},18:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:4}},19:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:4}},20:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:4}},21:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}},22:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}},23:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}},24:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}},25:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}},26:{[V.t.default]:{cols:6,rows:5},[V.t.deliberation]:{cols:6,rows:5}}},Y={0:{[V.t.default]:{col:1,row:1,span:{cols:1,rows:1}},[V.t.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[V.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[V.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[V.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[V.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},$=(0,r.memo)(function(e){var t,o,s,l,a,c,d,u;let{tiles:p}=(0,r.useContext)(R.qW),[f,x]=(0,r.useState)(!1),[h,g]=(0,r.useState)(),v=void 0!==e.testSubscriptions;(0,r.useEffect)(()=>{var t,o;let r=Math.min(null!=(o=null==p?void 0:p.length)?o:null==(t=e.testSubscriptions)?void 0:t.length,26),i=e.activity,s=Q[r][i],l={w:s.cols*G.w,h:s.rows*G.h},a="repeat(".concat(s.cols,", 1fr)"),c="repeat(".concat(s.rows,", 1fr)"),d=e.enableExpandButton&&r>0&&e.activity===V.t.deliberation;g({colsTemplate:a,rowsTemplate:c,cells:s,gridAspect:l,litter:r,activity:i,showExpandButton:d,tiles:e.testSubscriptions?e.testSubscriptions.map((e,t)=>(0,n.jsx)(J.Ay,{test:!0,subscription:e},"test-tile-".concat(t,"-").concat(e.subscriptionId))):p})},[v,p,e.testSubscriptions,e.activity,e.enableExpandButton]),(0,r.useEffect)(()=>{h&&h.activity!==V.t.deliberation&&x(!1)},[h]);let[b]=(0,H.Q)({duration:200}),w="0.5rem",j=(0,Z.A)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(z.A,{className:"tiles-inner-container",sx:{width:null!=(d=null==(t=e.availableSpace)?void 0:t.w)?d:"100%",height:null!=(u=null==(o=e.availableSpace)?void 0:o.h)?u:"100%",position:"relative"},children:h&&(0,n.jsx)(z.A,{className:"tiles-container",sx:{aspectRatio:"".concat(h.gridAspect.w,"/").concat(h.gridAspect.h),objectFit:"contain",height:i.nr?null==(s=e.availableSpace)?void 0:s.h:void 0,width:i.nr?null==(l=e.availableSpace)?void 0:l.w:void 0,maxHeight:null==(a=e.availableSpace)?void 0:a.h,maxWidth:null==(c=e.availableSpace)?void 0:c.w,mx:"auto",my:"auto",p:1},children:(0,n.jsxs)(z.A,{className:"tiles-grid",ref:b,sx:{width:"100%",height:"100%",display:"grid",gap:w,gridTemplateColumns:h.colsTemplate,gridTemplateRows:h.rowsTemplate},children:[(0,n.jsxs)(z.A,{sx:{position:f?"absolute":"relative",gridColumnStart:f?void 0:Y[h.litter][h.activity].col,gridColumnEnd:f?void 0:Y[h.litter][h.activity].col+Y[h.litter][h.activity].span.cols,gridRowStart:f?void 0:Y[h.litter][h.activity].row,gridRowEnd:f?void 0:Y[h.litter][h.activity].row+Y[h.litter][h.activity].span.rows,width:f?void 0:"100%",height:f?void 0:"100%",left:f?"2.5vh":void 0,top:f?"2.5vh":void 0,bottom:f?"2.5vh":void 0,right:f?"2.5vh":void 0,zIndex:f?10:void 0},children:[h.showExpandButton&&(0,n.jsx)(z.A,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,n.jsx)(m.A,{"aria-label":"expand presentation button",onClick:()=>x(!f),sx:{border:"2px solid",borderColor:j.palette.promptPanelBackground.main,background:j.palette.slideSectionBackground.main},children:f?(0,n.jsx)(U.A,{}):(0,n.jsx)(_.A,{})})}),(0,n.jsx)(z.A,{sx:{width:"100%",height:"100%",borderRadius:2,border:f?"solid 2px white":void 0},className:"shadow",children:e.presentation})]},"presentation-cell"),h.activity===V.t.deliberation&&(0,n.jsx)(n.Fragment,{children:h.tiles.map((e,t)=>{let o=q[t+1];return void 0!==o?(0,n.jsx)(z.A,{sx:{gridColumnStart:o.col,gridColumnEnd:o.col+o.span.cols,gridRowStart:o.row,gridRowEnd:o.row+o.span.rows},children:e},"video-cell-at-".concat(t)):(console.warn("Tile with index ".concat(t," not rendered - no position data available")),(0,n.jsx)(n.Fragment,{}))})}),h.activity!=V.t.deliberation&&(0,n.jsxs)(n.Fragment,{children:[h.tiles.slice(0,Math.min(2,h.litter)).map((e,t)=>(0,n.jsx)(z.A,{sx:{gridColumn:Q[h.litter][h.activity].cols,gridRow:t+1},children:e},"video-cell-at-".concat(t))),h.litter>2&&(0,n.jsx)(z.A,{sx:{gridColumn:h.cells.cols,gridRowStart:3,gridRowEnd:h.cells.rows+1,overflowY:"auto"},children:h.tiles.slice(2).map((e,t)=>(0,n.jsx)(z.A,{sx:{width:"100%",aspectRatio:X,mb:w},children:e},"video-cell-at-".concat(t)))})]})]})})})})},(e,t)=>{var o,n;let r=e.activity===t.activity,i=e.availableSpace===t.availableSpace,s=e.enableExpandButton===t.enableExpandButton,l=e.presentation===t.presentation,a=(0,R.nh)(null!=(o=e.testSubscriptions)?o:[],null!=(n=t.testSubscriptions)?n:[]);return r&&i&&s&&l&&a});var ee=o(89207),et=o(48484),eo=o(8553),en=o(35626),er=o(65229),ei=o(27747),es=o(2021),el=o(99496),ea=o(37440),ec=o(62995),ed=o(68060),eu=o(51404),ep=o(23405),ef=function(e){return e.None="",e.CannotHearOthers="cannot-hear-others",e.OthersCannotHearMe="others-cannot-hear-me",e.StillNeedHelp="still-need-help",e}(ef||{});function ex(e){let[t,o]=(0,r.useState)(""),{t:i}=(0,v.Bd)(),s=()=>{e.setShowTechSupport(!1),o("")},l=()=>{s()};return(0,n.jsxs)(ei.A,{className:"tech-support-dialog",fullWidth:!0,maxWidth:"sm",onClose:()=>{s()},open:e.showTechSupport,PaperProps:{sx:{border:"3px solid #A5A5FF",borderRadius:"10px",pointerEvents:"auto"}},scroll:"paper",sx:{pointerEvents:"none","& .MuiDialog-container":{height:e.backdropHeight||"100%"}},slots:{backdrop:()=>(0,n.jsx)(z.A,{onClick:l,sx:{backgroundColor:"rgba(0,0,0,0.7)",height:e.backdropHeight||"100%",pointerEvents:"auto",position:"fixed",width:"100%"}})},transitionDuration:0,children:[(0,n.jsxs)(z.A,{className:"tech-support-dialog-controls",sx:{display:"flex",flexDirection:"row",justifyContent:""===t?"end":"space-between"},children:[""!==t&&(0,n.jsx)(m.A,{"aria-label":"back",onClick:()=>{o("")},sx:{width:"fit-content"},children:(0,n.jsx)(en.A,{size:"24px"})}),(0,n.jsx)(m.A,{"aria-label":"close",onClick:s,sx:{width:"fit-content"},children:(0,n.jsx)(er.A,{size:"24px"})})]}),(0,n.jsxs)(es.A,{align:"center",color:"#292D32",sx:{mx:1,userSelect:"none"},variant:"h3",children:[""===t&&"What problem are you experiencing?","cannot-hear-others"===t&&(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.heading"}),"others-cannot-hear-me"===t&&(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.heading"}),"still-need-help"===t&&"Please tell us about the problem you're experiencing"]}),"cannot-hear-others"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(el.A,{sx:{mx:1,my:2,pb:0},children:(0,n.jsxs)("ol",{style:{margin:"0"},children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Body"})]}),(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Body"})]})]})})]}),"others-cannot-hear-me"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(el.A,{children:(0,n.jsxs)("ol",{children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Body"})]})]})})]}),""!==t&&"still-need-help"!==t&&(0,n.jsxs)(el.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"center",mb:1,p:2},children:[(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{s()},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"outlined",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.problemSolved"})}),(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{o("still-need-help")},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"contained",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.stillNeedHelp"})})]}),"still-need-help"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(es.A,{align:"center",color:"#292D32",component:"h3",sx:{mx:1},variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.teamIsAvailable"})}),(0,n.jsx)(el.A,{children:(0,n.jsxs)(z.A,{sx:{display:"grid",gap:1,gridTemplateColumns:"auto 1fr",mx:"auto",my:2,width:"fit-content"},children:[(0,n.jsx)(b.A,{sx:{mr:1},variant:"body1",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.phone"})}),(0,n.jsx)(ea.A,{href:"tel:020 7031 7209",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"020 7031 7209"}),(0,n.jsx)(b.A,{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.email"})}),(0,n.jsx)(ea.A,{href:"mailto:workshop-support@nesta.org.uk?subject=Workshop tech support",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"workshop-support@nesta.org.uk"})]})})]}),""===t&&(0,n.jsx)(el.A,{sx:{textAlign:"center"},children:(0,n.jsxs)(ec.A,{sx:{my:3,minWidth:"24rem",userSelect:"none"},children:[(0,n.jsx)(ed.A,{id:"select-problem",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.chooseProblem"})}),(0,n.jsxs)(eu.A,{label:i("techSupport.chooseProblem"),labelId:"select-problem",onChange:e=>{o(e.target.value)},value:t,children:[(0,n.jsx)(ep.A,{value:"cannot-hear-others",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.description"})}),(0,n.jsx)(ep.A,{value:"others-cannot-hear-me",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.description"})}),(0,n.jsx)(ep.A,{value:"still-need-help",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.differentProblem.description"})})]})]})})]})}function eh(){let{largeVideoCalls:e}=(0,r.useContext)(u.c),{session:t}=(0,r.useContext)(x.L),{slideData:o}=(0,p.Zm)(),i=(0,r.useContext)(f.z),[l,a]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),[w,j]=(0,r.useState)(!1),[C,y]=(0,r.useState)(!1),{t:S}=(0,v.Bd)(),[k,I]=(0,r.useState)({activity:o.activity,enableExpandButton:!0,presentation:i.presentation,availableSpace:void 0});(0,r.useEffect)(()=>{j(t.remoteConfiguration===s.LQ.RemoteWithVideoCall)},[t]),(0,r.useEffect)(()=>{I({...k,activity:o.activity,enableExpandButton:!0,presentation:i.presentation})},[o.activity]);let[D,M]=(0,eo.W_)();(0,r.useEffect)(()=>{M&&M.width&&M.height&&(I({...k,availableSpace:{w:M.width,h:M.height}}),console.debug("available space: ".concat(M.width," x ").concat(M.height)))},[M]),(0,r.useEffect)(()=>{l>=c&&a(c>0?c-1:0)},[l,c]);let T=()=>(0,n.jsx)(et.A,{preTitle:(0,n.jsx)(h.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(h.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),O=()=>{y(e=>!e)},K={width:"100vw",height:"100vh",background:"linear-gradient(to bottom, #FF0080, #FF8C00, #40E0D0)"};return(0,n.jsxs)(n.Fragment,{children:[w&&e&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(T,{}),children:(0,n.jsx)(B.Ay,{role:s.sW.Client,children:(0,n.jsx)(B.n8.Consumer,{children:e=>{let{arrangement:o}=e;return(0,n.jsx)(A.A,{sx:K,children:(0,n.jsx)(N.A,{aspectRatio:F.M.aspectRatio,minCellWidth_px:F.M.minTileWidth_px,controlBarHeight_px:F.M.controlBarHeight_px,padding_px:F.M.padding_px,gap_px:F.M.gap_px,slideSpan:F.M.slideSpan,arrangement:o,pageIndex:l,setTotalPages:d,activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,mode:B.LY.Chime,footerContent:(0,n.jsx)(W,{handleToggleTechSupport:O,pageIndex:l,setPageIndex:a,totalPages:c,session:t})})})}})})})}),w&&!e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ee.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(T,{}),children:[(0,n.jsxs)(A.A,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,n.jsx)(A.A,{className:"available-space-ref",ref:D,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container"}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(g.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:t})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifySelf:"end",pr:1},children:[(0,n.jsx)(L,{}),(0,n.jsxs)(m.A,{"aria-label":S("techSupport.buttons.support"),disableFocusRipple:!0,onClick:O,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(P.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(b.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.support"})})]})]})]})]}),(0,n.jsx)(A.A,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,n.jsx)(R.Ay,{role:s.sW.Client,children:(0,n.jsx)($,{activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,availableSpace:k.availableSpace})})})]}),(0,n.jsx)(ex,{backdropHeight:M.height,showTechSupport:C,setShowTechSupport:y})]}),!w&&(0,n.jsx)(A.A,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:i.presentation})]})}var eg=o(96827);let ev=(0,r.createContext)({});function em(e){let[t,o]=(0,r.useState)({leftTheWorkshop:!1});(0,r.useEffect)(()=>((0,c.s)(window)&&(!1===t.leftTheWorkshop?window.addEventListener("beforeunload",u):window.removeEventListener("beforeunload",u)),()=>{window.removeEventListener("beforeunload",u)}),[t.leftTheWorkshop]);let u=e=>{e.preventDefault()};return(0,n.jsx)(n.Fragment,{children:i.XF?(0,n.jsx)(d.A,{}):(0,n.jsx)(ev.Provider,{value:{participantSessionFlags:t,setParticipantSessionFlags:o},children:(0,n.jsx)(eg.A,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:s.sW.Client,children:(0,n.jsxs)(l.A,{role:s.sW.Client,children:[(0,n.jsx)(a.A,{}),(0,n.jsx)(eh,{})]})})})})}},96827:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(95155),r=o(72970),i=o(12115),s=o(24274),l=o(78211),a=o(2492);function c(e){let{language:t}=(0,i.useContext)(l.c),[o,c]=(0,i.useState)((0,r.Ay)(t));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.xC,{i18n:o,children:(0,n.jsx)(a.A,{sid:e.sid,role:e.role,refresh:e.refresh,joinCode:e.joinCode,children:e.children})})})}}}]);