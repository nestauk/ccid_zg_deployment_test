"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{11265:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(95155),i=o(80317),r=o(90073);function s(){return(0,n.jsxs)(r.A,{component:"main",sx:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem"},children:[(0,n.jsx)(i.A,{variant:"h1",sx:{fontSize:"2.25rem"},children:"The Situation Room"}),(0,n.jsxs)(i.A,{variant:"body1",children:["Thanks for trying to join ",(0,n.jsx)("b",{children:"The Situation Room"}),"."]}),(0,n.jsxs)(i.A,{variant:"body1",children:["Unfortunately, ",(0,n.jsx)("b",{children:"you can't use a phone"})," (or other device with a small screen) to take part in the session."]}),(0,n.jsxs)(i.A,{variant:"body1",children:[(0,n.jsx)("b",{children:"Please use a laptop, tablet"})," or other similar device to join."]})]})}},13202:(e,t,o)=>{o.d(t,{A:()=>c});var n=o(95155),i=o(80357),r=o(12115),s=o(77757);let l={0:{columns:1,rows:1},1:{columns:1,rows:1},2:{columns:1,rows:2},3:{columns:1,rows:3},4:{columns:2,rows:2},5:{columns:2,rows:3},6:{columns:2,rows:3},7:{columns:2,rows:4},8:{columns:2,rows:4},9:{columns:3,rows:3},10:{columns:3,rows:4},11:{columns:3,rows:4},12:{columns:3,rows:4},13:{columns:4,rows:4},14:{columns:4,rows:4},15:{columns:4,rows:4},16:{columns:4,rows:4}};function c(e){let{tiles:t}=(0,r.useContext)(s.qW),[o,c]=(0,r.useState)({rows:1,columns:1});return(0,r.useEffect)(()=>{let e=t.length;if(e<=16)c({rows:l[e].rows,columns:l[e].columns});else{let t=Math.ceil(Math.sqrt(e));c({rows:t,columns:Math.ceil(e/t)})}},[t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.A,{sx:{...e.sx,width:"100%",height:"100%",display:"grid",gap:1,gridTemplateRows:"repeat(".concat(o.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(o.columns,", 1fr)")},children:t})})}},19672:(e,t,o)=>{o.d(t,{A:()=>x,N:()=>p});var n=o(95155),i=o(25789),r=o(60193),s=o(39142),l=o(18098),c=o(60890),a=o(34678),d=o(24274),u=o(57476);let p=32;function x(e){let{t}=(0,d.Bd)(),o=(0,i.A)().palette.callControlButtonIcon.main,x="",f="";return"audio"===e.control?(x=t("audio.enableMic"),f=t("audio.muteMic")):"camera"===e.control&&(x=t("video.enableCamera"),f=t("video.disableCamera")),(0,n.jsxs)(r.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":e.enabled?f:x,onClick:e.toggleFn,sx:t=>({backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.main",height:u.LL,position:e.showMenu?"absolute":"initial",right:e.showMenu?"0":"initial",width:u.LL,"&:hover":{backgroundColor:e.enabled?"callControlButton.dark":"callControlButtonOff.main"},"&:focus-visible":{...t.customStyles.focusRingReverse}}),children:["audio"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(s.A,{color:o,size:p}):(0,n.jsx)(l.A,{color:o,size:p})}),"camera"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(c.A,{color:o,size:p}):(0,n.jsx)(a.A,{color:o,size:p})})]})}},25091:(e,t,o)=>{o.d(t,{GG:()=>h,Ay:()=>g,EI:()=>v});var n=o(95155),i=o(32276),r=o(46671),s=o.n(r),l=o(12115),c=o(78211),a=o(69999),d=o(54884);let u=["Microsoft Teams Audio","ZoomAudioDevice"];var p=o(23387),x=o(80890),f=o(59850);let h=(0,l.createContext)(void 0);function v(){let e=(0,l.useContext)(h);if(void 0===e)throw"Error: this component must be used within a <ZgMeetingConfigProvider>";return e}function g(e){var t,o;let{isStarted:r}=(0,l.useContext)(f.s),v=(0,l.useContext)(c.c),g=(0,i.GYC)(),{isVideoEnabled:b,toggleVideo:m}=(0,i.oCg)(),{muted:w,toggleMute:j}=(0,i.abu)(),A=(0,l.useRef)(j),C=(0,l.useRef)(m),[y,S]=(0,l.useState)(),[k,I]=(0,l.useState)(),[D,E]=(0,l.useState)(),{selectedDevice:R,devices:B}=(0,i.xtX)(),{selectedDevice:F,devices:M}=(0,i.gDU)(),{selectedDevice:L,devices:T}=(0,i.O54)(),{isVoiceFocusSupported:P,addVoiceFocus:K}=(0,i.IMw)(),O=(0,l.useRef)(K),{isBackgroundBlurSupported:W,createBackgroundBlurDevice:V}=(0,i.F6c)(),N=(0,l.useRef)(V);(0,l.useEffect)(()=>{O.current=K},[K]),(0,l.useEffect)(()=>{N.current=V},[V]),(0,l.useEffect)(()=>{A.current=j,C.current=m},[j,m]);let H={settings:{offerVoiceFocus:null!=(t=v.voiceFocus)?t:p.DY,offerBackgroundBlur:null!=(o=v.backgroundBlur)?o:p.YC},preference:(0,d.s)(e.initialPrefs)?{...e.initialPrefs,startMeeting:!0}:p.gZ,current:{isInitialised:!1,isMeetingStarted:r,isAudioEnabled:!w,isVideoEnabled:b,isVoiceFocusEnabled:!1,isVoiceFocusSupported:P,isBackgroundBlurEnabled:!1,isBackgroundBlurSupported:W,audioInputDevice:R,audioOutputDevice:F,videoInputDevice:L,availableAudioInputDevices:y,availableAudioOutputDevices:k,availableVideoInputDevices:D}},[_,U]=(0,l.useState)(H),[Z,z]=(0,l.useState)(),[J,q]=(0,l.useState)(),[G,X]=(0,l.useState)(),[Q,Y]=(0,l.useState)();(0,l.useEffect)(()=>(a.A.on(a.m.Meeting_AudioDeviceReplacement,Y),()=>{a.A.off(a.m.Meeting_AudioDeviceReplacement,Y)}),[]),(0,l.useEffect)(()=>{(0,d.s)(Q)&&Q.type==a.m.Meeting_AudioDeviceReplacement&&(console.debug("Meeting_AudioDeviceReplacement event captured in ZgMeetingConfigProvider",Q),g.updateDeviceLists())},[Q,g]),(0,l.useEffect)(()=>{_.current.isInitialised||((0,d.s)(_.current.videoInputDevice)&&(0,d.s)(_.current.audioInputDevice)&&(0,d.s)(_.current.isBackgroundBlurSupported)&&(0,d.s)(_.current.isVoiceFocusSupported)?(console.debug("ZgMeetingConfigProvider: Video call initialised"),U(t=>({...t,preference:{...t.preference,...e.initialPrefs},current:{...t.current,isInitialised:!0}}))):console.warn("ZgMeetingConfigProvider: Video call not initialised",{isMeetingStarted:_.current.isMeetingStarted,videoInputDevice:_.current.videoInputDevice,audioInputDevice:_.current.audioInputDevice}))},[_,e.initialPrefs]),(0,l.useEffect)(()=>{let e={current:{audioInputDevice:_.current.audioInputDevice,availableAudioInputDevices:_.current.availableAudioInputDevices,isAudioEnabled:_.current.isAudioEnabled,isInitialised:_.current.isInitialised,isVoiceFocusEnabled:_.current.isVoiceFocusEnabled,isVoiceFocusSupported:_.current.isVoiceFocusSupported},preference:{audio:_.preference.audio,audioInputDevice:_.preference.audioInputDevice,voiceFocus:_.preference.voiceFocus}};z(t=>s().isEqual(t,e)?t:e)},[_]),(0,l.useEffect)(()=>{let e={current:{videoInputDevice:_.current.videoInputDevice,availableVideoInputDevices:_.current.availableVideoInputDevices,isVideoEnabled:_.current.isVideoEnabled,isInitialised:_.current.isInitialised,isBackgroundBlurEnabled:_.current.isBackgroundBlurEnabled,isBackgroundBlurSupported:_.current.isBackgroundBlurSupported},preference:{video:_.preference.video,videoInputDevice:_.preference.videoInputDevice,backgroundBlur:_.preference.backgroundBlur}};X(t=>s().isEqual(t,e)?t:e)},[_]),(0,l.useEffect)(()=>{let e={current:{audioOutputDevice:_.current.audioOutputDevice,availableAudioOutputDevices:_.current.availableAudioOutputDevices,isInitialised:_.current.isInitialised},preference:{audioOutputDevice:_.preference.audioOutputDevice}};q(t=>s().isEqual(t,e)?t:e)},[_]),(0,l.useEffect)(()=>{S(B.map(e=>e).filter(e=>!u.some(t=>e.label.toLowerCase().includes(t.toLowerCase())))),I(M.map(e=>e).filter(e=>!u.some(t=>e.label.toLowerCase().includes(t.toLowerCase())))),E(T.map(e=>e).filter(e=>!0))},[B,M,T]),(0,l.useEffect)(()=>{U(e=>({...e,current:{...e.current,isVoiceFocusSupported:P}}))},[P]),(0,l.useEffect)(()=>{U(e=>({...e,current:{...e.current,isBackgroundBlurSupported:W}}))},[W]),(0,l.useEffect)(()=>{var t;null==(t=e.onUpdatePrefs)||t.call(e,_.preference)},[_.preference,e]),(0,l.useEffect)(()=>{U(e=>({...e,current:{...e.current,availableAudioInputDevices:y,availableAudioOutputDevices:k,availableVideoInputDevices:D}}))},[y,k,D]),(0,l.useEffect)(()=>{U(e=>({...e,current:{...e.current,isMeetingStarted:r}}))},[r]),(0,l.useEffect)(()=>{console.debug("Audio enabled: ".concat(!w)),U(e=>({...e,current:{...e.current,isAudioEnabled:!w}}))},[w]),(0,l.useEffect)(()=>{console.debug("Video enabled: ".concat(b)),U(e=>({...e,current:{...e.current,isVideoEnabled:b}}))},[b]),(0,l.useEffect)(()=>{(null==Z?void 0:Z.current.isInitialised)&&(0,d.s)(null==Z?void 0:Z.current.audioInputDevice)&&(null==Z?void 0:Z.preference.audio)===w&&A.current()},[Z,w]),(0,l.useEffect)(()=>{(null==G?void 0:G.current.isInitialised)&&(0,d.s)(null==G?void 0:G.current.videoInputDevice)&&(null==G?void 0:G.preference.video)!==b&&C.current()},[G,b]),(0,l.useEffect)(()=>{(0,d.s)(R)&&(console.debug("Audio input device started",R,(0,x.Xb)(R)),U(e=>({...e,current:{...e.current,audioInputDevice:R,isVoiceFocusEnabled:(0,x.Xb)(R)}})))},[R]),(0,l.useEffect)(()=>{(0,d.s)(F)&&(console.debug("Audio output device started",F),U(e=>({...e,current:{...e.current,audioOutputDevice:F}})))},[F]),(0,l.useEffect)(()=>{(0,d.s)(L)&&(console.debug("Video input device started",L),U(e=>({...e,current:{...e.current,videoInputDevice:L,isBackgroundBlurEnabled:(0,x.wS)(L)}})))},[L]),(0,l.useEffect)(()=>{(async()=>{if(!(0,d.s)(Z)||!Z.current.isInitialised)return;let e=await (0,x.l1)(Z.current.audioInputDevice),t=(0,x.kr)(Z.current.availableAudioInputDevices,{deviceId:await (0,i.IPJ)(e)}),o=(0,x.kr)(Z.current.availableAudioInputDevices,Z.preference.audioInputDevice);if(!(0,d.s)(o))return U(e=>({...e,preference:{...e.preference,audioInputDevice:t}}));let n=(null==t?void 0:t.deviceId)!==o.deviceId;if((0,d.s)(o))if(Z.current.isVoiceFocusEnabled&&(0,x.Xb)(Z.current.audioInputDevice)&&Z.preference.voiceFocus&&n){let e=await Z.current.audioInputDevice.chooseNewInnerDevice(o.deviceId);await g.startAudioInputDevice(e)}else if(!Z.current.isVoiceFocusEnabled&&Z.current.isVoiceFocusSupported&&Z.preference.voiceFocus){let e=await O.current(o.deviceId);await g.startAudioInputDevice(e)}else(n||Z.current.isVoiceFocusEnabled&&!Z.preference.voiceFocus)&&(console.debug("switching to basic device"),await g.startAudioInputDevice(o.deviceId))})()},[Z,g]),(0,l.useEffect)(()=>{(async()=>{if(!(0,d.s)(G)||!G.current.isInitialised)return;let e=await (0,x.oq)(G.current.videoInputDevice),t=(0,x.kr)(G.current.availableVideoInputDevices,{deviceId:await (0,i.IPJ)(e)}),o=(0,x.kr)(G.current.availableVideoInputDevices,G.preference.videoInputDevice);if(!(0,d.s)(o))return U(e=>({...e,preference:{...e.preference,videoInputDevice:t}}));let n=(null==t?void 0:t.deviceId)!==o.deviceId;if((0,d.s)(o))if(G.current.isBackgroundBlurEnabled&&(0,x.wS)(G.current.videoInputDevice)&&G.preference.backgroundBlur&&n){let e=await G.current.videoInputDevice.chooseNewInnerDevice(o.deviceId);await g.startVideoInputDevice(e)}else if(!(0,x.wS)(G.current.videoInputDevice)&&G.current.isBackgroundBlurSupported&&G.preference.backgroundBlur){let e=await N.current(o.deviceId);await g.startVideoInputDevice(e)}else(n||G.current.isBackgroundBlurEnabled&&!G.preference.backgroundBlur)&&await g.startVideoInputDevice(o.deviceId)})()},[g,G]),(0,l.useEffect)(()=>{(async()=>{if(!(0,d.s)(J)||!J.current.isInitialised)return;let e=(0,x.kr)(J.current.availableAudioOutputDevices,J.preference.audioOutputDevice);if(!(0,d.s)(e)){let e=(0,x.kr)(J.current.availableAudioOutputDevices,{deviceId:await (0,i.IPJ)(J.current.audioOutputDevice)});U(t=>({...t,preference:{...t.preference,audioOutputDevice:e}}));return}J.current.audioOutputDevice!==(null==e?void 0:e.deviceId)&&(0,d.s)(e)&&await g.startAudioOutputDevice(e.deviceId)})()},[J,g]);let $=(0,l.useCallback)(e=>{U(t=>({...t,preference:{...t.preference,audio:e}}))},[]),ee=(0,l.useCallback)(e=>U(t=>({...t,preference:{...t.preference,video:e}})),[]),et=(0,l.useCallback)(e=>{U(t=>({...t,preference:{...t.preference,audioInputDevice:e}}))},[]),eo=(0,l.useCallback)(e=>U(t=>({...t,preference:{...t.preference,audioOutputDevice:e}})),[]),en=(0,l.useCallback)(e=>U(t=>({...t,preference:{...t.preference,videoInputDevice:e}})),[]),ei=(0,l.useCallback)(e=>{U(t=>({...t,preference:{...t.preference,voiceFocus:e}}))},[]),er=(0,l.useCallback)(e=>U(t=>({...t,preference:{...t.preference,backgroundBlur:e}})),[]),es=(0,l.useCallback)(e=>U(t=>({...t,preference:{...t.preference,startMeeting:e}})),[]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.Provider,{value:{state:_,controls:{selectAudioEnabled:$,selectVideoEnabled:ee,selectAudioInputDevice:et,selectAudioOutputDevice:eo,selectVideoInputDevice:en,selectVoiceFocus:ei,selectBackgroundBlur:er,selectStartMeeting:es}},children:e.children})})}},25790:(e,t,o)=>{o.d(t,{A:()=>u});var n=o(95155),i=o(12115),r=o(98314),s=o(80431),l=o(84073),c=o(18932),a=o(25091),d=o(54884);function u(){let{role:e}=(0,i.useContext)(l.yk),{session:t}=(0,i.useContext)(r.$),{slideData:o}=(0,s.Zm)(),u=(0,i.useRef)(void 0),p=(0,i.useContext)(a.GG),x=(0,i.useCallback)(async()=>{let e=new Audio("/sounds/00-ding.mp3");if(e.volume=.5,(0,d.s)(null==p?void 0:p.state.current.audioOutputDevice))if((0,d.s)(e.setSinkId))try{await e.setSinkId(p.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for SlideTransitionSound",e)}else console.debug("Audio.setSinkId not defined");return e},[p]),f=(0,i.useCallback)(async()=>{(await x()).play()},[x]);return(0,i.useEffect)(()=>{(e===c.sW.Controller||t.remoteConfiguration!==c.LQ.InPerson)&&o.index!==u.current&&o.transitionSound&&(u.current=o.index,f())},[e,t.remoteConfiguration,o.index,o.transitionSound,f]),(0,n.jsx)(n.Fragment,{})}},28065:(e,t,o)=>{o.d(t,{A:()=>ea});var n=o(95155),i=o(98314),r=o(84073),s=o(18932),l=o(23387),c=o(80357),a=o(89041),d=o(4615),u=o(32276),p=o(34824),x=o(12115),f=o(30218),h=o(54884);class v{debug(e){this.logger.debug(e)}info(e){this.logger.info(e)}warn(e){this.logger.warn(e),this.observers.forEach(t=>t(p.LogLevel.WARN,e))}error(e){this.logger.error(e),this.observers.forEach(t=>t(p.LogLevel.ERROR,e))}setLogLevel(e){this.logger.setLogLevel(e)}getLogLevel(){return this.logger.getLogLevel()}addObserver(e){this.observers.push(e)}clearObservers(){this.observers=[]}constructor(e){this.logger=new p.ConsoleLogger("ZgObservableLogger",e),this.observers=[]}}let g=(0,x.createContext)({}),b=(0,x.memo)(function(e){let[t]=(0,x.useState)(new v(e.level)),[o,i]=(0,x.useState)({logger:t}),r=(0,x.useRef)(void 0),s=(0,x.useRef)(void 0);(0,x.useEffect)(()=>((0,h.s)(window)&&(r.current=window.onerror,window.onerror=l,console.debug("Captured window.onerror"),s.current=console.error,console.error=c,console.debug("Captured console.error")),t.addObserver((e,t)=>{i({...o,lastLog:{level:e,msg:t}})}),()=>{t.clearObservers(),(0,h.s)(window)&&(0,h.s)(r.current)&&(window.onerror=r.current),(0,h.s)(s.current)&&(console.error=s.current)}),[]);let l=(0,x.useCallback)((e,t,n,s,l)=>{if((0,h.s)(e)){var c;null==(c=r.current)||c.call(r,e,t,n,s,l),i({...o,lastLog:{level:0,msg:"[WINDOW] ".concat(null==l?void 0:l.message)}})}},[r,i]),c=(0,x.useCallback)(function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(0,h.s)(n)&&(null==(e=s.current)||e.call(s,...n),i({...o,lastLog:{level:1,msg:JSON.stringify([...n])}}))},[s,i]);return(0,n.jsx)(g.Provider,{value:o,children:(0,n.jsx)(u.IBQ,{logger:t,children:e.children})})},()=>!0);function m(e){let{logger:t}=(0,x.useContext)(g);return(0,n.jsx)(u.DNH,{options:{logger:t},children:e.children})}var w=o(59850),j=o(45238),A=o(69999),C=o(25091);function y(e){let[t,o]=(0,x.useState)({}),[i,l]=(0,x.useState)(!1),[c,a]=(0,x.useState)(),{deviceId:d,role:u}=(0,x.useContext)(r.yk),p=(0,C.EI)(),[f,v]=(0,x.useState)();(0,x.useEffect)(()=>(A.A.on(A.m.WSS_Distribute_Message,v),A.A.on(A.m.Media_Playback_Update,v),()=>{A.A.off(A.m.WSS_Distribute_Message,v),A.A.off(A.m.Media_Playback_Update,v)}),[]);let g=(0,x.useRef)(void 0);(0,x.useEffect)(()=>{if((0,h.s)(f)&&(null==(t=g.current)?void 0:t.id)!==f.id)switch(g.current=f,f.type){case A.m.WSS_Distribute_Message:var e,t,n,i=f.data;"mute-update"===i.type&&(n=i.content.pids,p.state.current.isAudioEnabled&&(n.some(e=>e===d)||n.some(e=>"*"===e))&&p.controls.selectAudioEnabled(!1));break;case A.m.Media_Playback_Update:e=f.data,o(t=>({...t,[e.videoId]:{update:e}}))}},[p.controls,p.state,d,f]),(0,x.useEffect)(()=>{l(Object.entries(t).some(e=>e[1].update.isPlaying))},[t]);let b=(0,x.useRef)(!1);return(0,x.useEffect)(()=>{i!==b.current&&(b.current=i,i?(a(p.state.current.isAudioEnabled),p.state.current.isAudioEnabled&&(u===s.sW.Controller?Object.entries(t).some(e=>{let[t,o]=e;return!0===o.update.isPlaying&&!1!==o.update.muteFacilitator})&&p.controls.selectAudioEnabled(!1):p.controls.selectAudioEnabled(!1))):(0,h.s)(c)&&p.state.current.isAudioEnabled!==c&&p.controls.selectAudioEnabled(c))},[i,p.controls,p.state,t,c,u]),(0,n.jsx)(n.Fragment,{children:e.children})}var S=o(62652),k=o(48484),I=o(80890);let D=["signalingDropped","sendingAudioFailed","meetingReconnected"];function E(e){let{children:t}=e,{selectedDevice:o}=(0,u.xtX)(),{addVoiceFocus:i}=(0,u.IMw)(),r=(0,u.j6L)(),s=(0,u.GYC)(),l=(0,u.VjK)(),c=(0,x.useRef)(i);(0,x.useEffect)(()=>{c.current=i},[i]);let[a]=(0,x.useState)({voiceFocusFellBackToInnerStream:(e,t)=>{console.warn("VoiceFocus fell back to inner stream",e,t)},voiceFocusInsufficientResources:()=>{console.warn("VoiceFocus insufficient resources")}});(0,x.useEffect)(()=>((0,I.Xb)(o)&&o.addObserver(a),()=>{(0,h.s)(o)&&(0,I.Xb)(o)&&o.removeObserver(a)}),[o,a]);let d=(0,x.useRef)(!1),f=(0,x.useCallback)(async e=>{if(l===u.e0s.Succeeded&&!d.current){d.current=!0,console.debug("ZgChimeMonitor: Restarting audio input shortly..."),await new Promise(t=>setTimeout(t,e)),console.debug("ZgChimeMonitor: Restarting audio input now."),d.current=!0;try{if((0,h.s)(o))if((0,I.Xb)(o)){let e=await (0,I.l1)(o);await o.stop();let t=await c.current(e);await s.startAudioInputDevice(t)}else await s.startAudioInputDevice(o);else throw"No audio device found."}catch(e){console.error("ZgChimeMonitor: Failed to restart audio input device",e)}finally{d.current=!1}}},[s,l,o]);return(0,x.useEffect)(()=>{(0,h.s)(r)&&D.some(e=>e===r.name)&&(console.warn("ZgChimeMonitor detected: ".concat(r.name)),f(100))},[r,f]),(0,x.useEffect)(()=>{let e=async e=>{let t=p.DefaultDeviceController.getAudioContext();if("suspended"===t.state)for(console.warn("ZgChimeMonitor: Audio context state: ".concat(t.state));"suspended"===t.state;)await t.resume(),await new Promise(e=>setTimeout(e,100)),"suspended"===t.state&&console.warn("ZgChimeMonitor: Failed to resume audio context - attempt ".concat(1," of 10."))};return l===u.e0s.Succeeded&&p.DefaultDeviceController.getAudioContext().addEventListener("statechange",e),()=>{p.DefaultDeviceController.getAudioContext().removeEventListener("statechange",e)}},[l]),(0,n.jsx)(n.Fragment,{children:t})}function R(e){let[t,o]=(0,x.useState)(),{zgJoinResponse:i}=(0,x.useContext)(j.K);return(0,x.useEffect)(()=>{console.debug("ZgVoiceFocus notes a change in joinResponse",i),(0,h.s)(null==i?void 0:i.createMeetingResponseJson)&&o(JSON.parse(i.createMeetingResponseJson))},[i]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.GZo,{options:{preload:!0},createMeetingResponse:t,children:e.children})})}let B=(0,x.memo)(function(e){(0,x.useEffect)(()=>{console.debug("Meeting preferences updated:",e.preferences)},[e.preferences]);let t=(0,x.useCallback)(async(e,t)=>(console.debug("Device replacement noted: ".concat(t," -> ").concat(e)),A.A.emit({type:A.m.Meeting_AudioDeviceReplacement,data:{currentDevice:t,nextDevice:e}}),e),[]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b,{level:p.LogLevel.WARN,children:(0,n.jsx)(u.Fjh,{onDeviceReplacement:t,children:(0,n.jsx)(j.A,{joinView:(0,n.jsx)(()=>(0,n.jsxs)(n.Fragment,{children:[e.isPreview&&(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(a.A,{}),(0,n.jsx)(d.A,{severity:"info",children:"Setting up video call preview..."})]}),!e.isPreview&&(0,n.jsx)(k.A,{preTitle:(0,n.jsx)(S.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(S.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."})]}),{}),isPreview:e.isPreview,children:(0,n.jsx)(m,{children:(0,n.jsx)(w.A,{children:(0,n.jsx)(R,{children:(0,n.jsx)(C.Ay,{initialPrefs:e.preferences,onUpdatePrefs:e.onUpdatePrefs,children:(0,n.jsx)(y,{children:(0,n.jsx)(E,{children:(0,n.jsx)(f.NP,{theme:u._kl,children:e.children})})})})})})})})})})})});var F=o(31240),M=o(57476),L=o(77757),T=o(13202);let P=(0,x.memo)(function(e){let[t,o]=(0,x.useState)(!1),{role:i}=(0,x.useContext)(r.yk),s=(0,x.useRef)(void 0);return(0,x.useEffect)(()=>{e.onSubmitPreferences(t,s.current)},[e,t]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.A,{className:"preview-call-and-alert-container",sx:{display:"flex",flexDirection:"column",gap:1,height:"45vh",width:"100%"},children:(0,n.jsx)(B,{isPreview:!0,preferences:void 0,onUpdatePrefs:e=>{s.current=e},children:(0,n.jsx)(L.Ay,{role:i,children:(0,n.jsxs)(c.A,{className:"preview-call-container",sx:{backgroundColor:"callControlPanelBackground.main",borderRadius:"10px",display:"flex",flexDirection:"column",height:"100%"},children:[(0,n.jsx)(T.A,{isPreview:!0}),(0,n.jsxs)(c.A,{className:"preview-call-controls-container",sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pl:2},children:[(0,n.jsx)(M.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!0}),(0,n.jsx)(c.A,{className:"join-button-container",sx:{alignContent:"center"},children:(0,n.jsx)(e=>{let{intent:t}=e;return console.debug("Button with intent to join:",t),(0,n.jsx)(F.A,{btnKey:"join",disableFocusRipple:!0,sx:e=>({backgroundColor:"callControlButton.main",color:"buttonStandard.main",mr:2,my:1,"&:hover":{backgroundColor:"callControlButton.light"},"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"}}),variant:t?"outlined":"contained",onClick:e=>o(!t),btnText:t?(0,n.jsx)(S.A,{i18nKey:"onboarding.leaveWorkshop"}):(0,n.jsx)(S.A,{i18nKey:"onboarding.joinWorkshop"})})},{intent:t})})]})]})})})})})},(e,t)=>!0);var K=o(91998),O=o(10310),W=o(66622),V=o(18414);function N(e){let{sid:t,period_ms:o=3e4,enabled:n=!0,duration_ms:i=6e5}=e,r=(0,x.useRef)(null),s=(0,x.useRef)(Date.now()),[l,c]=(0,x.useState)(),{api:a,start:d}=(0,x.useContext)(V.F$);return(0,x.useEffect)(()=>(s.current=Date.now(),r.current=setInterval(async()=>{let e=Date.now()-s.current;if(n&&("indefinite"===i||e<=i)){let e=await d(a.getBasicDeliberationSession(t,"session-state-poll"));(0,h.s)(e)&&c(e)}},o),()=>{(0,h.s)(r.current)&&clearInterval(r.current)}),[t,o,i,n]),{session:l}}var H=o(80317),_=o(24274);function U(){let{setParticipantSessionFlags:e}=(0,x.useContext)(K.C),{sid:t}=(0,x.useContext)(O.L),{t:o}=(0,_.Bd)(),{session:i}=N({sid:t});(0,x.useEffect)(()=>{A.A.emit({type:A.m.WSS_Request_Disconnect})},[]),(0,x.useEffect)(()=>{(0,h.s)(i)&&i.facilitationState===s.ve.Closed&&r()},[i]);let r=()=>{e({leftTheWorkshop:!1}),A.A.emit({type:A.m.WSS_Request_Reconnect})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{color:"white",sx:{mb:4},variant:"h1",children:(0,n.jsx)(S.A,{i18nKey:"workshop.participantLeftHeading"})}),(0,n.jsx)(H.A,{color:"white",sx:{mb:6},variant:"h2",children:(0,n.jsx)(S.A,{i18nKey:"workshop.participantLeftGuidance"})}),(0,n.jsx)(F.A,{color:"buttonReverse",btnText:o("workshop.rejoinCta"),btnKey:"start",onClick:r})]})}var Z=o(37440),z=o(52769);function J(e){let t="collective.intelligence@nesta.org.uk",o=e.showHeading,i=e.showSignupMethods&&!0,[r,l]=(0,x.useState)(),{sid:a}=(0,x.useContext)(O.L),{session:d}=N({sid:a});(0,x.useEffect)(()=>{A.A.emit({type:A.m.WSS_Request_Disconnect})},[]),(0,x.useEffect)(()=>{(0,h.s)(d)&&d.facilitationState!==s.ve.Closed&&u()},[d]);let u=()=>{A.A.emit({type:A.m.WSS_Request_Reconnect})};return(0,x.useEffect)(()=>{{let e="".concat(window.location.host,"/signup");z.toDataURL(e).then(e=>{l(e)}).catch(e=>{l(void 0),console.error(e)})}},[!0]),(0,n.jsxs)(c.A,{color:"#fff",sx:{display:"flex",flexDirection:"column",gap:"1.5vh"},children:[o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{variant:"h2",sx:{fontWeight:"bold"},children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.sessionIsClosedRegisterLinkAvailable"})}),(0,n.jsx)(H.A,{color:"white",component:"h2",variant:"h5",sx:{mt:1},children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.encouragement"})})]}),i&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)(H.A,{sx:{borderTop:o?"1px solid #fff;":"none",mt:2*!!o,pt:3*!!o},children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.visitWebsite"})}),(0,n.jsx)(Z.A,{href:"/signup",target:"_blank",variant:"h3",color:"#fff",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.signUpText"})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{sx:{pt:2},children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.orScanQrCode"})}),(0,n.jsx)("img",{alt:"QR code for signup link: ".concat(window.location.host,"/signup}"),src:r,style:{borderRadius:"5px",marginTop:"0.5rem",height:"175px",width:"175px"}})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{sx:{borderTop:"1px solid #ffffffff;",mt:3,pt:3},children:(0,n.jsx)(S.A,{i18nKey:"onboarding.sessionClosed.emailUs"})}),(0,n.jsx)(Z.A,{href:"mailto:".concat(t),target:"_blank",variant:"h5",color:"#fff",children:t})]})]})})]})}var q=o(79005),G=o(90073);function X(e){return(0,n.jsxs)(G.A,{sx:{display:"flex",flexDirection:"column",gap:1,pt:4},children:[e.session.facilitationState>=s.ve.Closed&&(0,n.jsx)(d.A,{severity:"warning",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.thisWorkshopIsClosed"})}),e.session.facilitationState===s.ve.Open&&!e.banned&&(0,n.jsxs)(d.A,{severity:"success",children:[(0,n.jsx)(S.A,{i18nKey:"onboarding.thisWorkshopIsOpen"}),(0,n.jsx)("br",{}),(0,n.jsx)(S.A,{i18nKey:"onboarding.pressJoinToEnter"})]}),e.banned&&(0,n.jsx)(d.A,{severity:"error",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.youAreRemoved"})})]})}function Q(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{variant:"body1",color:"white",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(q.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1,mt:4},children:(0,n.jsx)(X,{session:e.session,banned:!0})})]})}var Y=o(91028),$=o(39620),ee=o(25148),et=o(2218),eo=o(14962),en=o(77524),ei=o(24251);function er(){let[e,t]=(0,x.useState)(!1),[o,i]=(0,x.useState)(!1),[r,s]=(0,x.useState)(!1);(0,x.useEffect)(()=>{e&&setTimeout(()=>{s(!0)},3e3)},[e]);let[l]=(0,Y.Q)();return(0,n.jsxs)(eo.A,{children:[(0,n.jsx)(en.A,{expandIcon:(0,n.jsx)($.A,{}),"aria-controls":"support-panel-content",id:"support-panel",children:(0,n.jsx)(H.A,{variant:"body1",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.supportInfoHeading"})})}),(0,n.jsx)(ei.A,{children:(0,n.jsxs)(c.A,{sx:{display:"flex",flexDirection:"column",gap:1},ref:l,children:[(0,n.jsx)(H.A,{variant:"body2",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.supportInfoText1"})}),(0,n.jsx)(F.A,{variant:"outlined",btnKey:"reconnect",size:"small",busy:o,startIcon:(0,n.jsx)(ee.A,{}),onClick:()=>{A.A.emit({type:A.m.WSS_Refresh_Session}),i(!0),setTimeout(()=>{i(!1),t(!0)},2e3)},btnText:(0,n.jsx)(S.A,{i18nKey:"button.reconnect"})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{variant:"body2",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.supportInfoText2"})}),(0,n.jsx)(F.A,{variant:"outlined",btnKey:"reconnect",size:"small",startIcon:(0,n.jsx)(et.A,{}),onClick:()=>window.location.reload(),btnText:(0,n.jsx)(S.A,{i18nKey:"button.reload"})})]})]})})]})}function es(e){let t=e=>e.facilitationState===s.ve.Ready;return console.debug("session join info: start intention = ",e.startIntention),console.debug("session join info: isWaiting = ",t(e.session)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{variant:"body1",color:"white",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(q.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(X,{session:e.session,banned:e.banned}),e.startIntention&&t(e.session)&&(0,n.jsxs)(G.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(d.A,{severity:"info",children:(0,n.jsx)(S.A,{i18nKey:"onboarding.waitingForOpen"})}),(0,n.jsx)(er,{})]})]})}let el=e=>e.remoteConfiguration===s.LQ.RemoteWithVideoCall;function ec(e){let{session:t}=(0,x.useContext)(i.$),{publicContent:o}=(0,x.useContext)(O.L),{deviceId:l}=(0,x.useContext)(r.yk),[c,a]=(0,x.useState)(!1);console.debug("ZgOnboardingMeetingSetup render"),(0,x.useEffect)(()=>{(0,h.s)(t.deviceIdBanList)&&a(t.deviceIdBanList.includes(l))},[t,l]);let d=t.facilitationState===s.ve.Closed&&e.role===s.sW.Client;return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsx)(W.A,{background:!0,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(Q,{session:t})}),d&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(W.A,{background:!0,rightHalfBackground:"#3E7075CC",rightPanel:(0,n.jsx)(J,{showHeading:!1,showSignupMethods:!0}),privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(J,{showHeading:!0,showSignupMethods:!1})})}),!d&&e.participantLeft&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(W.A,{background:!0,rightHalfBackground:"#3E7075CC",privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(U,{})})}),!c&&!d&&!e.participantLeft&&(0,n.jsxs)(n.Fragment,{children:[el(t)&&(0,n.jsx)(W.A,{background:!1,rightPanel:e.videoCallPreview,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(es,{session:t,banned:c,role:e.role,startIntention:e.startIntention})}),!el(t)&&(0,n.jsx)(W.A,{background:!1,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:o.workshopInformationUrl,children:(0,n.jsx)(es,{session:t,banned:c,role:e.role,startIntention:e.startIntention})})]})]})}function ea(e){var t;let{session:o}=(0,x.useContext)(i.$),{deviceId:c}=(0,x.useContext)(r.yk),{participantSessionFlags:a}=(0,x.useContext)(K.C),d=o.remoteConfiguration===s.LQ.RemoteWithVideoCall,u=(0,x.useRef)(void 0),[p,f]=(0,x.useState)(!1),[h,v]=(0,x.useState)(!1),[g,b]=(0,x.useState)(!d),[m,w]=(0,x.useState)(!1),j=(0,x.useCallback)((e,t)=>{console.debug("onStartIntention",e,t),u.current=t,b(e)},[]);return(0,x.useEffect)(()=>{console.debug("deviceId changed",c)},[c]),(0,x.useEffect)(()=>{var e,t;f(o.facilitationState===s.ve.Open),v(null!=(t=null==(e=o.deviceIdBanList)?void 0:e.includes(c))&&t)},[c,o]),(0,x.useEffect)(()=>{let t,o;w((t=e.role,o=null==a?void 0:a.leftTheWorkshop,g&&(p||t===s.sW.Controller)&&(!h||t===s.sW.Controller)&&(!o||t===s.sW.Controller)))},[p,g,h,e.role,null==a?void 0:a.leftTheWorkshop]),(0,n.jsxs)(n.Fragment,{children:[!m&&(0,n.jsx)(ec,{participantLeft:null==a?void 0:a.leftTheWorkshop,role:e.role,startIntention:g,videoCallPreview:d?(0,n.jsx)(P,{onSubmitPreferences:j}):void 0}),m&&d&&(0,n.jsx)(B,{isPreview:!1,preferences:null!=(t=u.current)?t:l.gZ,children:e.children}),m&&!d&&(0,n.jsx)(n.Fragment,{children:e.children})]})}},57476:(e,t,o)=>{o.d(t,{LL:()=>Z,jg:()=>z,xP:()=>J,Ui:()=>q,CX:()=>G,Ay:()=>X,E0:()=>U});var n=o(95155),i=o(78211),r=o(84073),s=o(10310),l=o(18414),c=o(18932),a=o(62652),d=o(31240),u=o(54884),p=o(25789),x=o(80357),f=o(80317),h=o(32276),v=o(39142),g=o(71385),b=o(12115),m=o(23387),w=o(25091),j=o(80890),A=o(84389),C=o(34804),y=o(19131),S=o(23405),k=o(45279),I=o(48464),D=o(39970),E=o(5917),R=o(35130),B=o(88379),F=o(90073);function M(e){let t=(0,h.YGn)(),[o,i]=(0,b.useState)(0),{muted:r}=(0,h.abu)(),s=(0,b.useCallback)(e=>{r?i(0):i(parseFloat(e.toFixed(2)))},[i,r]);(0,h.q8N)(s);let l=e=>(0,n.jsx)(F.A,{sx:{borderWidth:1,flexGrow:1,height:"".concat(.25,"rem"),borderTopLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderBottomLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderTopRightRadius:e.isEnd?"".concat(.125,"rem"):0,borderBottomRightRadius:e.isEnd?"".concat(.125,"rem"):0,backgroundColor:o>=e.min?e.indicatorColor:"transparent",...e.sx}});return(0,n.jsxs)(F.A,{sx:{display:"flex",flexDirection:"row",gap:0,...e.sx},children:[!r&&Array(20).fill(void 0).map((e,t)=>.05*t).map((e,i)=>(0,n.jsx)(l,{min:e,value:o,indicatorColor:"callControlMenuItem.main",isStart:0===i,isEnd:e<=o&&o<e+.05},"meter-".concat(t,"-cell-").concat(i))),r&&(0,n.jsx)(a.A,{i18nKey:"audio.muted"})]})}function L(e){let t=(0,p.A)(),o=(0,b.useCallback)(t=>{console.debug("Audio output device selected: ".concat(t.label," (").concat(t.deviceId,")")),e.config.controls.selectAudioOutputDevice(t)},[e.config.controls]),i=(0,b.useCallback)(async()=>{let t=new Audio("/sounds/00-ding.mp3");if(t.volume=.5,(0,u.s)(e.config.state.current.audioOutputDevice))if((0,u.s)(t.setSinkId))try{await t.setSinkId(e.config.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for AudioMenu (test speaker)",e)}else console.debug("Audio.setSinkId not defined");return t},[e.config.state]),r=(0,b.useCallback)(async()=>{(await i()).play()},[i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(a.A,{i18nKey:"audio.audioOutputSelection"})})})}),e.audioOutputDeviceList.map(e=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>o(e.deviceType),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.selected,sx:{color:e.selected?"callControlButton.main":"callControlMenuItem.main"},children:U(e.deviceType)})]},"menu-item-select-".concat(e.deviceType.label))),(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsxs)(S.A,{disableRipple:!1,sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),onClick:()=>{r()},children:[(0,n.jsx)(k.A,{children:(0,n.jsx)(R.A,{color:t.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main"},children:"Test speaker"})]},"menu-item-output-audio-test")]})}function T(e){var t,o;let i=(0,p.A)(),r=(0,b.useCallback)(t=>{console.debug("Audio input device selected: ".concat(t.label," (").concat(t.deviceId,")")),e.config.controls.selectAudioInputDevice(t)},[e.config.controls]),s=(0,b.useCallback)(async t=>{console.debug("Voice focus: ".concat(t?"enable":"disable")),e.config.controls.selectVoiceFocus(t)},[e.config.controls]),l=e.config.state.settings.offerVoiceFocus&&!0===e.config.state.current.isVoiceFocusSupported;return(0,n.jsxs)(I.A,{...(0,B.NA)(e.popupState),anchorPosition:{left:null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().left,top:(null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().top)-z},anchorReference:"anchorPosition",sx:G,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(a.A,{i18nKey:"audio.audioInputSelection"})})})}),e.audioInputDeviceList&&e.audioInputDeviceList.map(e=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>r(e.deviceType),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.selected,sx:{color:e.selected?"callControlButton.main":"callControlMenuItem.main"},children:U(e.deviceType)})]},"menu-item-select-".concat(e.deviceType.label))),l&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),l&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>s(!e.config.state.current.isVoiceFocusEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isVoiceFocusEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isVoiceFocusEnabled,sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(a.A,{i18nKey:"audio.reduceBackgroundNoise"})})]},"menu-item-select-voice-focus"),e.showAudioInputVisualisation&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),e.showAudioInputVisualisation&&(0,n.jsxs)(D.Ay,{sx:{mb:1},children:[(0,n.jsx)(k.A,{sx:{minWidth:"36px"},children:(0,n.jsx)(v.A,{color:i.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{pl:0},children:(0,n.jsx)(M,{sx:{width:"100%",minWidth:"100px",userSelect:"none",color:"callControlMenuItem.main"}})})]},"menu-item-input-audio-visualisation"),e.audioOutputDeviceList&&0!==e.audioOutputDeviceList.length&&(0,n.jsx)(L,{config:e.config,audioOutputDeviceList:e.audioOutputDeviceList})]})}var P=o(19672),K=o(50533),O=o(53e3),W=o(60193),V=o(24274);function N(e){let{t}=(0,V.Bd)(),o="";return"audio"===e.control?o=t("audio.settingsMenu"):"camera"===e.control&&(o=t("video.settingsMenu")),(0,n.jsx)(W.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":o,...(0,B.cO)(e.popupState),sx:t=>({backgroundColor:e.enabled?"callControlMenuButton.main":"callControlButtonOff.dark",borderRadius:"30px",height:"100%",pl:"10px",pr:"calc(".concat(Z," + 6px)"),"&:hover":{backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.dark"},"&:focus-visible":{...t.customStyles.focusRingReverse}}),children:e.popupState.isOpen?(0,n.jsx)(K.A,{sx:{color:"callControlButtonIcon.main"}}):(0,n.jsx)(O.A,{sx:{color:"callControlButtonIcon.main"}})})}var H=o(26667);function _(e){var t,o;let i=(0,b.useCallback)(async t=>{e.config.controls.selectBackgroundBlur(t)},[e.config.controls]),r=(0,b.useCallback)(t=>{e.config.controls.selectVideoInputDevice(t)},[e.config.controls]),s=e.config.state.settings.offerBackgroundBlur&&!0===e.config.state.current.isBackgroundBlurSupported;return(0,n.jsxs)(I.A,{...(0,B.NA)(e.popupState),anchorPosition:{left:null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().left,top:(null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().top)-z},anchorReference:"anchorPosition",sx:G,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(a.A,{i18nKey:"video.videoInputSelection"})})})}),e.videoDeviceList&&e.videoDeviceList.map(e=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>r(e.deviceType),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.selected,sx:{color:e.selected?"callControlButton.main":"callControlMenuItem.main"},children:U(e.deviceType)})]},"menu-item-select-".concat(e.deviceType.label))),s&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),s&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>i(!e.config.state.current.isBackgroundBlurEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isBackgroundBlurEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(H.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isBackgroundBlurEnabled,sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(a.A,{i18nKey:"video.blurBackground"})})]},"menu-item-select-background-blur")]})}let U=e=>e.label,Z="52px",z=8,J="36px",q="6px",G={"& .MuiPaper-root":{backgroundColor:"callControlMenuBackground.main",border:"2px solid",borderColor:"callControlButton.main",borderRadius:"10px"}};function X(e){let{meetingDebug:t}=(0,b.useContext)(i.c),[o,A]=(0,b.useState)(),[C,y]=(0,b.useState)(),[S,k]=(0,b.useState)(),{start:I,api:D}=(0,b.useContext)(l.F$),{sid:E}=(0,b.useContext)(s.L),{role:R,user:B,sessionToken:F,deviceId:L}=(0,b.useContext)(r.yk),K=(0,w.EI)(),O=(0,p.A)(),W=async()=>{K.controls.selectVideoEnabled(!K.state.current.isVideoEnabled)},V=async()=>{K.controls.selectAudioEnabled(!K.state.current.isAudioEnabled)};(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableAudioInputDevices)){let e=(0,u.s)(K.state.current.audioInputDevice)?await (0,h.IPJ)(await (0,j.l1)(K.state.current.audioInputDevice)):void 0;A(K.state.current.availableAudioInputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state]),(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableAudioOutputDevices)){let e=(0,u.s)(K.state.current.audioOutputDevice)?await (0,h.IPJ)(K.state.current.audioOutputDevice):void 0;y(K.state.current.availableAudioOutputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state]),(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(K.state.current.availableVideoInputDevices)){let e=(0,u.s)(K.state.current.videoInputDevice)?await (0,j.oq)(K.state.current.videoInputDevice):void 0;k(K.state.current.availableVideoInputDevices.map(t=>({deviceType:t,selected:t.deviceId===e})))}})()},[K.state]);let H=e=>(0,n.jsx)(x.A,{className:e.className,sx:{height:Z,mx:"auto",position:"relative",width:"fit-content"},children:e.children});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(x.A,{className:e.className,sx:{display:"flex",flexDirection:e.direction,gap:2,justifyContent:"center",my:2,...e.sx},children:[(0,n.jsxs)(x.A,{className:"outer-container",children:[(0,n.jsxs)(H,{className:"camera-controls-container",children:[e.showCameraConfigMenu&&(0,n.jsx)(g.Ay,{variant:"popover",popupId:"camera-menu-popup",children:t=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{busy:e.busy,control:"camera",enabled:K.state.current.isVideoEnabled,popupState:t}),(0,n.jsx)(_,{config:K,popupState:t,videoDeviceList:S})]})}),(0,n.jsx)(P.A,{busy:e.busy,control:"camera",enabled:K.state.current.isVideoEnabled,showMenu:e.showCameraConfigMenu,toggleFn:W})]}),m.BX&&(0,n.jsx)(f.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(a.A,{i18nKey:"video.videoInputSelection"})})]}),(0,n.jsxs)(x.A,{className:"outer-container",children:[(0,n.jsxs)(H,{className:"audio-controls-container",children:[e.showAudioConfigMenu&&(0,n.jsx)(g.Ay,{variant:"popover",popupId:"audio-menu-popup",children:t=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{busy:e.busy,control:"audio",enabled:K.state.current.isAudioEnabled,popupState:t}),(0,n.jsx)(T,{audioInputDeviceList:o,audioOutputDeviceList:C,config:K,showAudioInputVisualisation:!0,popupState:t})]})}),(0,n.jsx)(P.A,{busy:e.busy,control:"audio",enabled:K.state.current.isAudioEnabled,showMenu:e.showAudioConfigMenu,toggleFn:V})]}),m.BX&&(0,n.jsx)(f.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(a.A,{i18nKey:"audio.audioInputSelection"})})]}),e.isPreview&&(0,n.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,n.jsx)(x.A,{sx:{color:"callControlMenuItem.main",fontSize:"0.75rem",userSelect:"none"},children:(0,n.jsx)(a.A,{i18nKey:"onboarding.preview.audio.prompt"})}),(0,n.jsxs)(x.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",gap:.5,height:"1.5rem"},children:[(0,n.jsx)(v.A,{color:O.palette.callControlButtonIcon.main,size:"1.25rem"}),(0,n.jsx)(M,{sx:{color:"callControlMenuItem.main",width:"100px"}})]})]}),!e.isPreview&&t&&R===c.sW.Controller&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.A,{btnKey:"init-meeting",variant:"outlined",color:"buttonReverse",onClick:()=>{I(D.postFacilitatorAction(B.access_token,F,{action:"init-meeting",sessionId:E,ticks:new Date().getTime(),originator:L,parameters:{force:!0}}))},btnText:"RE-INIT"})})]})})}},59850:(e,t,o)=>{o.d(t,{A:()=>v,s:()=>h});var n=o(95155),i=o(32276),r=o(34824),s=o(12115),l=o(98314),c=o(78211),a=o(57300),d=o(84073),u=o(18932),p=o(54884),x=o(23387),f=o(45238);let h=(0,s.createContext)({});function v(e){let t=(0,i.GYC)(),o=(0,i.VjK)(),v=(0,s.useContext)(c.c),[g,b]=(0,s.useState)({meetingStatus:o,isStarted:!1}),{session:m}=(0,s.useContext)(l.$),{subscriptions:w}=(0,s.useContext)(a.f),{role:j,deviceId:A}=(0,s.useContext)(d.yk),{zgJoinResponse:C,isPreview:y}=(0,s.useContext)(f.K),[S,k]=(0,s.useState)(),[I,D]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(0,p.s)(m.deviceIdBanList)&&D(m.deviceIdBanList.includes(A))},[m,A]),(0,s.useEffect)(()=>()=>{t.getAttendee=void 0,t.leave()},[t]),(0,s.useEffect)(()=>{b(e=>({...e,meetingStatus:o}))},[o]),(0,s.useEffect)(()=>{o===i.e0s.Succeeded&&I&&t.leave()},[o,I,t]),(0,s.useEffect)(()=>{let e;if(e=m.facilitationState,!I&&void 0!==C&&(j===u.sW.Controller||e===u.ve.Open||y)){if(C.chimeMeetingId!==(null==S?void 0:S.meetingId)){let e=new r.MeetingSessionConfiguration({MeetingId:C.chimeMeetingId,MediaPlacement:{AudioHostUrl:C.audioHostUrl,SignalingUrl:C.signalingUrl,TurnControlUrl:C.turnControlUrl,AudioFallbackUrl:C.audioFallbackUrl,EventIngestionUrl:C.eventIngestionUrl,ScreenDataUrl:C.screenDataUrl,ScreenViewingUrl:C.screenViewingUrl}},{ExternalUserId:C.chimeAttendeeExternalId,AttendeeId:C.chimeAttendeeId,JoinToken:C.chimeJoinToken});console.debug("ZgMeetingConnectionProvider: updating meeting config",C,e),k(e)}}else k(void 0)},[j,m.facilitationState,C,y,S,I]),(0,s.useEffect)(()=>{(async()=>{if(t.meetingId!==(null==S?void 0:S.meetingId)&&(console.debug("ZgMeetingConnectionProvider: Current meeting id has changed...",null==S?void 0:S.meetingId),o===i.e0s.Succeeded&&(console.debug("ZgMeetingConnectionProvider: Disconnecting from previous meeting..."),await t.leave()),(0,p.s)(null==S?void 0:S.meetingId)&&o!==i.e0s.Succeeded&&o!==i.e0s.Reconnecting))try{let e;console.debug("ZgMeetingConnectionProvider: Joining meeting...",S);await t.join(S,(null!=v.voiceFocus||x.aW,{deviceLabels:i.iin.AudioAndVideo,enableWebAudio:!0,eventController:(e=S,new r.DefaultEventController(e,new r.ConsoleLogger("SDK",r.LogLevel.INFO),new r.NoOpEventReporter))})),console.debug("ZgMeetingConnectionProvider: Successfully joined meeting."),console.debug("ZgMeetingConnectionProvider: Starting meeting..."),await t.start(),console.debug("ZgMeetingConnectionProvider: Meeting start succeeded.")}catch(e){console.error("ZgMeetingConnectionProvider: Error joining meeting",e)}})()},[S,v.voiceFocus,t,o]),(0,s.useEffect)(()=>{t.getAttendee=async(e,t)=>{void 0===t&&console.warn("Undefined pid passed from chime.");var o,n=w.find(e=>e.deviceId===t);return void 0===n&&console.warn("No subscription found for pid: ".concat(t),w),{name:null!=(o=null==n?void 0:n.participantName)?o:"Unknown"}}},[t,w]),(0,s.useEffect)(()=>{console.debug("ZgMeetingConnectionProvider: meeting status: ".concat(i.e0s[o])),b(e=>({...e,isStarted:o===i.e0s.Succeeded}))},[o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h.Provider,{value:g,children:e.children})})}},77757:(e,t,o)=>{o.d(t,{Ay:()=>u,nh:()=>d,qW:()=>a});var n=o(95155),i=o(18932),r=o(12115),s=o(57300),l=o(45238),c=o(17448);let a=(0,r.createContext)({}),d=(e,t)=>{if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o].subscriptionId!=e[o].subscriptionId)return!1;return!0};function u(e){let{subscriptions:t,deviceIdBanList:o,thisUser:u}=(0,r.useContext)(s.f),{isPreview:p}=(0,r.useContext)(l.K),[x,f]=(0,r.useState)([]),[h,v]=(0,r.useState)([]),[g,b]=(0,r.useState)({tiles:[]});(0,r.useEffect)(()=>{let n=t.filter(e=>void 0===o.find(t=>e.deviceId===t)),r=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===i.sW.Controller)].sort((e,t)=>e.deviceId.localeCompare(t.deviceId)),s=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===i.sW.Client)].sort((e,t)=>e.deviceId.localeCompare(t.deviceId)),l=p?u?[u]:[]:e.role===i.sW.Client?[...r,...u?[u]:[],...s]:[...u?[u]:[],...r,...s];d(l,x)||f(l)},[t,o]);let m=e=>"video-tile-".concat(e.subscriptionId);return(0,r.useEffect)(()=>{let e=[];x.forEach((t,o)=>{let i=h.find(e=>e.key===m(t));i?e.push(i):e.push((0,n.jsx)(c.Ay,{subscription:t,test:!1},m(t)))}),((e,t)=>{if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t||e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(e[o].key!==t[o].key)return!1;return!0})(e,h)||v(e)},[x]),(0,r.useEffect)(()=>{b({tiles:h})},[h]),(0,n.jsx)(a.Provider,{value:g,children:e.children})}},80890:(e,t,o)=>{o.d(t,{Xb:()=>r,kr:()=>a,l1:()=>l,oq:()=>c,wS:()=>s});var n=o(34824),i=o(54884);function r(e){return(0,i.s)(e)&&e instanceof n.VoiceFocusTransformDevice}function s(e){return(0,i.s)(e)&&e instanceof n.DefaultVideoTransformDevice}let l=async e=>(0,i.s)(e)?r(e)?await e.getInnerDevice():e:void 0,c=async e=>(0,i.s)(e)?s(e)?await e.getInnerDevice():e:void 0,a=(e,t)=>{var o;return(0,i.s)(t)?null!=(o=null==e?void 0:e.find(e=>e.deviceId===(null==t?void 0:t.deviceId)))?o:null==e?void 0:e.find(e=>e.label===(null==t?void 0:t.label)):void 0}},89207:(e,t,o)=>{o.d(t,{A:()=>x});var n=o(95155),i=o(80357),r=o(4615),s=o(32276),l=o(12115),c=o(24274),a=o(62652),d=o(39268),u=o(59850);let p=[s.e0s.Failed,s.e0s.Ended,s.e0s.JoinedFromAnotherDevice,s.e0s.TerminalFailure,s.e0s.Left];function x(e){let{meetingStatus:t}=(0,l.useContext)(u.s),[o,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t===s.e0s.Succeeded&&x(!0)},[t]);let[f,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{h(t===s.e0s.Succeeded||o&&!p.some(e=>e===t))},[t,o]);let v=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(t===s.e0s.Loading){var e;v.current=null!=(e=v.current)?e:setTimeout(()=>{g()},5e3)}return()=>{v.current&&(clearTimeout(v.current),v.current=null)}},[t]);let g=()=>{v.current&&(clearTimeout(v.current),v.current=null),f||m(!0)};(0,l.useEffect)(()=>{f&&(m(!1),v.current&&(clearTimeout(v.current),v.current=null))},[f]);let[b,m]=(0,l.useState)(!1),{t:w}=(0,c.Bd)();return(0,n.jsxs)(n.Fragment,{children:[f&&e.children,!f&&(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",...e.sx},children:[(t===s.e0s.Loading||t===s.e0s.Reconnecting)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.A,{severity:"info",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.joining"})}),(0,n.jsx)(d.A,{options:[{key:"ready",text:"Ready",filled:!1}],open:b,setOpen:m,title:w("videoCall.outcomeMessages.interaction.title"),content:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.interaction.content"})})]}),t===s.e0s.Failed&&(0,n.jsx)(r.A,{severity:"error",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.failed"})}),t===s.e0s.Ended&&(0,n.jsx)(r.A,{severity:"warning",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.ended"})}),t===s.e0s.JoinedFromAnotherDevice&&(0,n.jsx)(r.A,{severity:"warning",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.joinedFromAnotherDevice"})}),t===s.e0s.TerminalFailure&&(0,n.jsx)(r.A,{severity:"error",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.terminalFailure"})}),t===s.e0s.Left&&(0,n.jsx)(r.A,{severity:"info",children:(0,n.jsx)(a.A,{i18nKey:"videoCall.outcomeMessages.left"})})]})]})}},91998:(e,t,o)=>{o.d(t,{C:()=>eb,A:()=>em});var n=o(95155),i=o(12115),r=o(92253),s=o(18932),l=o(28065),c=o(25790),a=o(54884),d=o(11265),u=o(78211),p=o(80431),x=o(21644),f=o(10310),h=o(62652),v=o(57476),g=o(24274),b=o(60193),m=o(80317),w=o(91911),j=o(57915),A=o(90073),C=o(25612),y=o(57300),S=o(5611),k=o(55279),I=o(23387),D=o(19672);function E(e){let{thisUser:t}=(0,i.useContext)(y.f),o=(0,i.useContext)(C.j),[r,s]=(0,i.useState)(!1),l=(0,i.useRef)(null),c=(0,i.useRef)(null),d=(0,i.useRef)(void 0),u=(0,j.A)(),{t:p}=(0,g.Bd)(),x=(0,k.A)(null==t?void 0:t.deviceId);return(0,i.useEffect)(()=>{(0,a.s)(null==x?void 0:x.raiseHand)||!0!==c.current?(0,a.s)(null==x?void 0:x.raiseHand)&&!0!==c.current&&(c.current=!0):(s(!0),c.current=!1,d.current=setTimeout(()=>{s(!1)},5e3))},[x]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.A,{className:"raise-hand-container",sx:{display:"flex",flexDirection:"column",mb:2,ml:0,mt:2},children:[(0,n.jsx)(A.A,{className:"raise-hand-button-container",sx:{display:"flex",flexDirection:"row",height:v.LL,justifyContent:"center"},children:(0,n.jsx)(b.A,{"aria-label":p((0,a.s)(null==x?void 0:x.raiseHand)?"button.lowerHand":"button.raiseHand"),disableRipple:!0,disableFocusRipple:!0,onClick:()=>{o.sendMessage({action:"user-signals",content:{signal:{kind:"raiseHand"},signalAction:(0,a.s)(null==x?void 0:x.raiseHand)?"remove":"add"},sid:e.session.id,type:"user-signals-request"})},ref:l,sx:e=>({backgroundColor:(0,a.s)(null==x?void 0:x.raiseHand)?"#ffffffff":"callControlButton.main",flexShrink:0,height:v.LL,mx:"auto",width:v.LL,"&:focus-visible":{backgroundColor:"callControlButton.dark",...e.customStyles.focusRingReverse},"&:hover":{backgroundColor:"callControlButton.dark"}}),children:(0,n.jsx)(S.A,{fill:(0,a.s)(null==x?void 0:x.raiseHand)?void 0:"transparent",height:D.N,stroke:(0,a.s)(null==x?void 0:x.raiseHand)?void 0:u.palette.callControlButtonIcon.main,width:D.N})})}),I.BX&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.A,{"aria-hidden":"true",sx:{height:0,textWrap:"nowrap",visibility:"hidden"},children:(0,n.jsx)(h.A,{i18nKey:"button.lowerHand"})}),(0,n.jsx)(m.A,{color:"white",sx:{textWrap:"nowrap",userSelect:"none"},children:(0,a.s)(null==x?void 0:x.raiseHand)?(0,n.jsx)(h.A,{i18nKey:"button.lowerHand"}):(0,n.jsx)(h.A,{i18nKey:"button.raiseHand"})})]})]}),(0,n.jsx)(w.Ay,{anchorEl:l.current,anchorOrigin:{horizontal:"center",vertical:-10},onClose:()=>{s(!1),clearTimeout(d.current)},open:r,slotProps:{paper:{sx:{backgroundColor:"transparent",boxShadow:"none"}}},transformOrigin:{horizontal:"center",vertical:"bottom"},children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{sx:{backgroundColor:"#ffffffff",borderRadius:"15px",boxShadow:"2px 4px 3px 0px #00000040",margin:"10px 10px 0 10px",padding:1.5},children:(0,n.jsx)(m.A,{sx:{userSelect:"none"},children:(0,n.jsx)(h.A,{i18nKey:"feedback.handLowered"})})}),(0,n.jsx)(A.A,{sx:{borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"12px solid #ffffffff",height:0,margin:"0 auto",width:0}})]})})]})}var R=o(77757),B=o(333),F=o(95507),M=o(27855),L=o(39268);function T(){let[e,t]=(0,i.useState)(!1),{setParticipantSessionFlags:o}=(0,i.useContext)(eb),{t:r}=(0,g.Bd)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{disableFocusRipple:!0,sx:e=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",height:"fit-content",px:3,py:1,width:"max-content","&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...e.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>t(!0),children:(0,n.jsx)(h.A,{i18nKey:"onboarding.leaveWorkshop"})}),(0,n.jsx)(L.A,{open:e,setOpen:t,onSelect:e=>{"leave"===e&&o({leftTheWorkshop:!0})},prompt:r("workshop.leaveConfirm"),options:[{key:"leave",text:r("workshop.leaveCta"),filled:!0},{key:"return",text:r("workshop.returnCta"),filled:!1}]})]})}var P=o(85921),K=o(49502);let O="20px";function W(e){return(0,n.jsxs)(M.A,{color:"buttonVideoCallPagination",disabled:e.disabled,disableFocusRipple:!0,disableRipple:!0,onClick:e.onClick,startIcon:"previous"===e.direction?(0,n.jsx)(P.A,{size:O,style:{rotate:"180deg"}}):(0,n.jsx)(P.A,{size:O}),sx:t=>({backgroundColor:"#5A6BDDFF",border:"2px solid #273AB6FF",borderRadius:"previous"===e.direction?"0 10px 10px 0":"10px 0 0 10px",flexDirection:"column",minWidth:"40px",px:.25,visibility:e.disabled?"hidden":"visible","&:focus-visible":{...t.customStyles.focusRingReverse,outlineOffset:"2px"},"& > .MuiButton-icon":{m:0,mb:.5}}),children:[(0,n.jsx)("div",{"aria-hidden":"true",style:{height:0,visibility:"hidden",width:"".concat(e.maxLabelLengthChars,"ch")}}),e.label]})}function V(e){let{pageIndex:t,setPageIndex:o,totalPages:i,handleToggleTechSupport:r,session:s}=e,{t:l}=(0,g.Bd)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container",sx:{alignSelf:"center"},children:(0,n.jsx)(W,{direction:"previous",disabled:t<1,label:"".concat(t+1,"/").concat(i),maxLabelLengthChars:1+2*i.toString().length,onClick:()=>{t>0&&o(e=>e-1)}})}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(v.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:s})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:[(0,n.jsx)(T,{}),(0,n.jsxs)(b.A,{"aria-label":l("techSupport.buttons.support"),disableFocusRipple:!0,onClick:r,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(K.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(m.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.support"})})]}),(0,n.jsx)(W,{direction:"next",disabled:t+1>=i,label:"".concat(t+1,"/").concat(i),maxLabelLengthChars:1+2*i.toString().length,onClick:()=>{i>t+1&&o(e=>e+1)}})]})]})})}var N=o(79384),H=o(78055),_=o(91028),U=o(8085),Z=o(95831),z=o(25789),J=o(80357),q=o(17448);let G={w:960,h:700},X="".concat(G.w," / ").concat(G.h),Q={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},Y={0:{[H.t.default]:{cols:1,rows:1},[H.t.deliberation]:{cols:1,rows:1}},1:{[H.t.default]:{cols:3,rows:2},[H.t.deliberation]:{cols:3,rows:2}},2:{[H.t.default]:{cols:3,rows:2},[H.t.deliberation]:{cols:3,rows:2}},3:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},4:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},5:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},6:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},7:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},8:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},9:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},10:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},11:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},12:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},13:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},14:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},15:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},16:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},17:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},18:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},19:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},20:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},21:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},22:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},23:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},24:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},25:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},26:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}}},$={0:{[H.t.default]:{col:1,row:1,span:{cols:1,rows:1}},[H.t.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[H.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[H.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},ee=(0,i.memo)(function(e){var t,o,s,l,c,a,d,u;let{tiles:p}=(0,i.useContext)(R.qW),[x,f]=(0,i.useState)(!1),[h,v]=(0,i.useState)(),g=void 0!==e.testSubscriptions;(0,i.useEffect)(()=>{var t,o;let i=Math.min(null!=(o=null==p?void 0:p.length)?o:null==(t=e.testSubscriptions)?void 0:t.length,26),r=e.activity,s=Y[i][r],l={w:s.cols*G.w,h:s.rows*G.h},c="repeat(".concat(s.cols,", 1fr)"),a="repeat(".concat(s.rows,", 1fr)"),d=e.enableExpandButton&&i>0&&e.activity===H.t.deliberation;v({colsTemplate:c,rowsTemplate:a,cells:s,gridAspect:l,litter:i,activity:r,showExpandButton:d,tiles:e.testSubscriptions?e.testSubscriptions.map((e,t)=>(0,n.jsx)(q.Ay,{test:!0,subscription:e},"test-tile-".concat(t,"-").concat(e.subscriptionId))):p})},[g,p,e.testSubscriptions,e.activity,e.enableExpandButton]),(0,i.useEffect)(()=>{h&&h.activity!==H.t.deliberation&&f(!1)},[h]);let[m]=(0,_.Q)({duration:200}),w="0.5rem",j=(0,z.A)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(J.A,{className:"tiles-inner-container",sx:{width:null!=(d=null==(t=e.availableSpace)?void 0:t.w)?d:"100%",height:null!=(u=null==(o=e.availableSpace)?void 0:o.h)?u:"100%",position:"relative"},children:h&&(0,n.jsx)(J.A,{className:"tiles-container",sx:{aspectRatio:"".concat(h.gridAspect.w,"/").concat(h.gridAspect.h),objectFit:"contain",height:r.nr?null==(s=e.availableSpace)?void 0:s.h:void 0,width:r.nr?null==(l=e.availableSpace)?void 0:l.w:void 0,maxHeight:null==(c=e.availableSpace)?void 0:c.h,maxWidth:null==(a=e.availableSpace)?void 0:a.w,mx:"auto",my:"auto",p:1},children:(0,n.jsxs)(J.A,{className:"tiles-grid",ref:m,sx:{width:"100%",height:"100%",display:"grid",gap:w,gridTemplateColumns:h.colsTemplate,gridTemplateRows:h.rowsTemplate},children:[(0,n.jsxs)(J.A,{sx:{position:x?"absolute":"relative",gridColumnStart:x?void 0:$[h.litter][h.activity].col,gridColumnEnd:x?void 0:$[h.litter][h.activity].col+$[h.litter][h.activity].span.cols,gridRowStart:x?void 0:$[h.litter][h.activity].row,gridRowEnd:x?void 0:$[h.litter][h.activity].row+$[h.litter][h.activity].span.rows,width:x?void 0:"100%",height:x?void 0:"100%",left:x?"2.5vh":void 0,top:x?"2.5vh":void 0,bottom:x?"2.5vh":void 0,right:x?"2.5vh":void 0,zIndex:x?10:void 0},children:[h.showExpandButton&&(0,n.jsx)(J.A,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,n.jsx)(b.A,{"aria-label":"expand presentation button",onClick:()=>f(!x),sx:{border:"2px solid",borderColor:j.palette.promptPanelBackground.main,background:j.palette.slideSectionBackground.main},children:x?(0,n.jsx)(U.A,{}):(0,n.jsx)(Z.A,{})})}),(0,n.jsx)(J.A,{sx:{width:"100%",height:"100%",borderRadius:2,border:x?"solid 2px white":void 0},className:"shadow",children:e.presentation})]},"presentation-cell"),h.activity===H.t.deliberation&&(0,n.jsx)(n.Fragment,{children:h.tiles.map((e,t)=>{let o=Q[t+1];return void 0!==o?(0,n.jsx)(J.A,{sx:{gridColumnStart:o.col,gridColumnEnd:o.col+o.span.cols,gridRowStart:o.row,gridRowEnd:o.row+o.span.rows},children:e},"video-cell-at-".concat(t)):(console.warn("Tile with index ".concat(t," not rendered - no position data available")),(0,n.jsx)(n.Fragment,{}))})}),h.activity!=H.t.deliberation&&(0,n.jsxs)(n.Fragment,{children:[h.tiles.slice(0,Math.min(2,h.litter)).map((e,t)=>(0,n.jsx)(J.A,{sx:{gridColumn:Y[h.litter][h.activity].cols,gridRow:t+1},children:e},"video-cell-at-".concat(t))),h.litter>2&&(0,n.jsx)(J.A,{sx:{gridColumn:h.cells.cols,gridRowStart:3,gridRowEnd:h.cells.rows+1,overflowY:"auto"},children:h.tiles.slice(2).map((e,t)=>(0,n.jsx)(J.A,{sx:{width:"100%",aspectRatio:X,mb:w},children:e},"video-cell-at-".concat(t)))})]})]})})})})},(e,t)=>{var o,n;let i=e.activity===t.activity,r=e.availableSpace===t.availableSpace,s=e.enableExpandButton===t.enableExpandButton,l=e.presentation===t.presentation,c=(0,R.nh)(null!=(o=e.testSubscriptions)?o:[],null!=(n=t.testSubscriptions)?n:[]);return i&&r&&s&&l&&c});var et=o(89207),eo=o(48484),en=o(8553),ei=o(35626),er=o(65229),es=o(27747),el=o(2021),ec=o(99496),ea=o(37440),ed=o(62995),eu=o(68060),ep=o(51404),ex=o(23405),ef=function(e){return e.None="",e.CannotHearOthers="cannot-hear-others",e.OthersCannotHearMe="others-cannot-hear-me",e.StillNeedHelp="still-need-help",e}(ef||{});function eh(e){let[t,o]=(0,i.useState)(""),{t:r}=(0,g.Bd)(),s=()=>{e.setShowTechSupport(!1),o("")},l=()=>{s()};return(0,n.jsxs)(es.A,{className:"tech-support-dialog",fullWidth:!0,maxWidth:"sm",onClose:()=>{s()},open:e.showTechSupport,PaperProps:{sx:{border:"3px solid #A5A5FF",borderRadius:"10px",pointerEvents:"auto"}},scroll:"paper",sx:{pointerEvents:"none","& .MuiDialog-container":{height:e.backdropHeight||"100%"}},slots:{backdrop:()=>(0,n.jsx)(J.A,{onClick:l,sx:{backgroundColor:"rgba(0,0,0,0.7)",height:e.backdropHeight||"100%",pointerEvents:"auto",position:"fixed",width:"100%"}})},transitionDuration:0,children:[(0,n.jsxs)(J.A,{className:"tech-support-dialog-controls",sx:{display:"flex",flexDirection:"row",justifyContent:""===t?"end":"space-between"},children:[""!==t&&(0,n.jsx)(b.A,{"aria-label":"back",onClick:()=>{o("")},sx:{width:"fit-content"},children:(0,n.jsx)(ei.A,{size:"24px"})}),(0,n.jsx)(b.A,{"aria-label":"close",onClick:s,sx:{width:"fit-content"},children:(0,n.jsx)(er.A,{size:"24px"})})]}),(0,n.jsxs)(el.A,{align:"center",color:"#292D32",sx:{mx:1,userSelect:"none"},variant:"h3",children:[""===t&&"What problem are you experiencing?","cannot-hear-others"===t&&(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.heading"}),"others-cannot-hear-me"===t&&(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.heading"}),"still-need-help"===t&&"Please tell us about the problem you're experiencing"]}),"cannot-hear-others"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(el.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(ec.A,{sx:{mx:1,my:2,pb:0},children:(0,n.jsxs)("ol",{style:{margin:"0"},children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Body"})]}),(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Body"})]})]})})]}),"others-cannot-hear-me"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(el.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(ec.A,{children:(0,n.jsxs)("ol",{children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Body"})]})]})})]}),""!==t&&"still-need-help"!==t&&(0,n.jsxs)(ec.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"center",mb:1,p:2},children:[(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{s()},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"outlined",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.problemSolved"})}),(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{o("still-need-help")},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"contained",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.stillNeedHelp"})})]}),"still-need-help"===t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(el.A,{align:"center",color:"#292D32",component:"h3",sx:{mx:1},variant:"h4",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.teamIsAvailable"})}),(0,n.jsx)(ec.A,{children:(0,n.jsxs)(J.A,{sx:{display:"grid",gap:1,gridTemplateColumns:"auto 1fr",mx:"auto",my:2,width:"fit-content"},children:[(0,n.jsx)(m.A,{sx:{mr:1},variant:"body1",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.phone"})}),(0,n.jsx)(ea.A,{href:"tel:020 7031 7209",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"020 7031 7209"}),(0,n.jsx)(m.A,{children:(0,n.jsx)(h.A,{i18nKey:"techSupport.email"})}),(0,n.jsx)(ea.A,{href:"mailto:workshop-support@nesta.org.uk?subject=Workshop tech support",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"workshop-support@nesta.org.uk"})]})})]}),""===t&&(0,n.jsx)(ec.A,{sx:{textAlign:"center"},children:(0,n.jsxs)(ed.A,{sx:{my:3,minWidth:"24rem",userSelect:"none"},children:[(0,n.jsx)(eu.A,{id:"select-problem",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.chooseProblem"})}),(0,n.jsxs)(ep.A,{label:r("techSupport.chooseProblem"),labelId:"select-problem",onChange:e=>{o(e.target.value)},value:t,children:[(0,n.jsx)(ex.A,{value:"cannot-hear-others",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.cannotHearOthers.description"})}),(0,n.jsx)(ex.A,{value:"others-cannot-hear-me",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.othersCannotHearMe.description"})}),(0,n.jsx)(ex.A,{value:"still-need-help",children:(0,n.jsx)(h.A,{i18nKey:"techSupport.problems.differentProblem.description"})})]})]})})]})}function ev(){let{largeVideoCalls:e}=(0,i.useContext)(u.c),{session:t}=(0,i.useContext)(f.L),{slideData:o}=(0,p.Zm)(),r=(0,i.useContext)(x.z),[l,c]=(0,i.useState)(0),[a,d]=(0,i.useState)(0),[w,j]=(0,i.useState)(!1),[C,y]=(0,i.useState)(!1),{t:S}=(0,g.Bd)(),[k,I]=(0,i.useState)({activity:o.activity,enableExpandButton:!0,presentation:r.presentation,availableSpace:void 0});(0,i.useEffect)(()=>{j(t.remoteConfiguration===s.LQ.RemoteWithVideoCall)},[t]),(0,i.useEffect)(()=>{I({...k,activity:o.activity,enableExpandButton:!0,presentation:r.presentation})},[o.activity]);let[D,M]=(0,en.W_)();(0,i.useEffect)(()=>{M&&M.width&&M.height&&(I({...k,availableSpace:{w:M.width,h:M.height}}),console.debug("available space: ".concat(M.width," x ").concat(M.height)))},[M]),(0,i.useEffect)(()=>{l>=a&&c(a>0?a-1:0)},[l,a]);let L=()=>(0,n.jsx)(eo.A,{preTitle:(0,n.jsx)(h.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(h.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),P=()=>{y(e=>!e)},O={width:"100vw",height:"100vh",background:"linear-gradient(to bottom, #FF0080, #FF8C00, #40E0D0)"};return(0,n.jsxs)(n.Fragment,{children:[w&&e&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(et.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(L,{}),children:(0,n.jsx)(B.Ay,{role:s.sW.Client,children:(0,n.jsx)(B.n8.Consumer,{children:e=>{let{arrangement:o}=e;return(0,n.jsx)(A.A,{sx:O,children:(0,n.jsx)(N.A,{aspectRatio:F.M.aspectRatio,minCellWidth_px:F.M.minTileWidth_px,controlBarHeight_px:F.M.controlBarHeight_px,padding_px:F.M.padding_px,gap_px:F.M.gap_px,slideSpan:F.M.slideSpan,arrangement:o,pageIndex:l,setTotalPages:d,activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,mode:B.LY.Chime,footerContent:(0,n.jsx)(V,{handleToggleTechSupport:P,pageIndex:l,setPageIndex:c,totalPages:a,session:t})})})}})})})}),w&&!e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(et.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(L,{}),children:[(0,n.jsxs)(A.A,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,n.jsx)(A.A,{className:"available-space-ref",ref:D,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container"}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(v.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:t})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifySelf:"end",pr:1},children:[(0,n.jsx)(T,{}),(0,n.jsxs)(b.A,{"aria-label":S("techSupport.buttons.support"),disableFocusRipple:!0,onClick:P,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(K.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(m.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(h.A,{i18nKey:"techSupport.buttons.support"})})]})]})]})]}),(0,n.jsx)(A.A,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,n.jsx)(R.Ay,{role:s.sW.Client,children:(0,n.jsx)(ee,{activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,availableSpace:k.availableSpace})})})]}),(0,n.jsx)(eh,{backdropHeight:M.height,showTechSupport:C,setShowTechSupport:y})]}),!w&&(0,n.jsx)(A.A,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:r.presentation})]})}var eg=o(96827);let eb=(0,i.createContext)({});function em(e){let[t,o]=(0,i.useState)({leftTheWorkshop:!1});(0,i.useEffect)(()=>((0,a.s)(window)&&(!1===t.leftTheWorkshop?window.addEventListener("beforeunload",u):window.removeEventListener("beforeunload",u)),()=>{window.removeEventListener("beforeunload",u)}),[t.leftTheWorkshop]);let u=e=>{e.preventDefault()};return(0,n.jsx)(n.Fragment,{children:r.XF?(0,n.jsx)(d.A,{}):(0,n.jsx)(eb.Provider,{value:{participantSessionFlags:t,setParticipantSessionFlags:o},children:(0,n.jsx)(eg.A,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:s.sW.Client,children:(0,n.jsxs)(l.A,{role:s.sW.Client,children:[(0,n.jsx)(c.A,{}),(0,n.jsx)(ev,{})]})})})})}},96827:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(95155),i=o(7494),r=o(12115),s=o(24274),l=o(78211),c=o(2492);function a(e){let{language:t}=(0,r.useContext)(l.c),[o,a]=(0,r.useState)((0,i.Ay)(t));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.xC,{i18n:o,children:(0,n.jsx)(c.A,{sid:e.sid,role:e.role,refresh:e.refresh,joinCode:e.joinCode,children:e.children})})})}}}]);