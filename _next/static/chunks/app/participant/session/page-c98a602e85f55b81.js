(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(o,s,l){Promise.resolve().then(l.bind(l,62448))},62448:function(o,s,l){"use strict";l.r(s),l.d(s,{default:function(){return G}});var e=l(57437),t=l(53622),r=l(63858),i=l(94547),a=l(78364),n=l(28356),c=l(96608),d=l(4766),w=l(93191),p=l(37570),u=l(83593),S=l(15785),b=l(40772),f=l(59676),h=l(81386),v=l(22960),x=l(31193),g=l(60335),m=l(29921),j=l(2265),y=l(59887),E=l(2215);let Z="".concat(960," / ").concat(700),C={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},R={0:{[S.S.default]:{cols:1,rows:1},[S.S.deliberation]:{cols:1,rows:1}},1:{[S.S.default]:{cols:3,rows:2},[S.S.deliberation]:{cols:3,rows:2}},2:{[S.S.default]:{cols:3,rows:2},[S.S.deliberation]:{cols:3,rows:2}},3:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:3,rows:3}},4:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:3,rows:3}},5:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:3,rows:3}},6:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:3}},7:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:3}},8:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:3}},9:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:4}},10:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:4}},11:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:4}},12:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:4,rows:4}},13:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:5,rows:4}},14:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:5,rows:4}},15:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:5,rows:4}},16:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:5,rows:4}},17:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:4}},18:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:4}},19:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:4}},20:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:4}},21:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}},22:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}},23:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}},24:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}},25:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}},26:{[S.S.default]:{cols:6,rows:5},[S.S.deliberation]:{cols:6,rows:5}}},k={0:{[S.S.default]:{col:1,row:1,span:{cols:1,rows:1}},[S.S.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[S.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[S.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[S.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[S.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},B=o=>o.map((o,s)=>(0,e.jsx)(y.ZP,{test:!0,subscription:o},"test-tile-".concat(s,"-").concat(o.subscriptionId)));var A=(0,j.memo)(function(o){var s,l,t,i,a,n,c,d;let{tiles:w}=(0,j.useContext)(E.fp),[p,u]=(0,j.useState)(!1),[y,A]=(0,j.useState)(),F=(0,j.useRef)(null),[T,_]=(0,j.useState)([]);(0,m.y)(F,_);let L=void 0!==o.testSubscriptions;(0,j.useEffect)(()=>{var s,l;let e=Math.min(null!==(l=null==w?void 0:w.length)&&void 0!==l?l:null===(s=o.testSubscriptions)||void 0===s?void 0:s.length,26),t=o.activity,r=R[e][t],i={w:960*r.cols,h:700*r.rows},a="repeat(".concat(r.cols,", 1fr)"),n="repeat(".concat(r.rows,", 1fr)"),c=o.enableExpandButton&&e>0&&o.activity===S.S.deliberation;A({colsTemplate:a,rowsTemplate:n,cells:r,gridAspect:i,litter:e,activity:t,showExpandButton:c,tiles:o.testSubscriptions?B(o.testSubscriptions):w})},[L,w,o.testSubscriptions,o.activity,o.enableExpandButton]),(0,j.useEffect)(()=>{y&&y.activity!==S.S.deliberation&&u(!1)},[y]),(0,j.useEffect)(()=>{o.onResize()},[T,p,o.availableSpace]);let[z]=(0,b.u)({duration:200}),P="0.5rem",N=(0,v.Z)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(x.Z,{sx:{width:null!==(c=null===(s=o.availableSpace)||void 0===s?void 0:s.w)&&void 0!==c?c:"100%",height:null!==(d=null===(l=o.availableSpace)||void 0===l?void 0:l.h)&&void 0!==d?d:"100%",position:"relative"},children:y&&(0,e.jsx)(x.Z,{sx:{aspectRatio:"".concat(y.gridAspect.w,"/").concat(y.gridAspect.h),objectFit:"contain",height:r.G6?null===(t=o.availableSpace)||void 0===t?void 0:t.h:void 0,width:r.G6?null===(i=o.availableSpace)||void 0===i?void 0:i.w:void 0,maxHeight:null===(a=o.availableSpace)||void 0===a?void 0:a.h,maxWidth:null===(n=o.availableSpace)||void 0===n?void 0:n.w,mx:"auto",my:"auto"},children:(0,e.jsxs)(x.Z,{ref:z,sx:{width:"100%",height:"100%",display:"grid",gap:P,gridTemplateColumns:y.colsTemplate,gridTemplateRows:y.rowsTemplate},children:[(0,e.jsxs)(x.Z,{ref:F,sx:{position:p?"absolute":"relative",gridColumnStart:p?void 0:k[y.litter][y.activity].col,gridColumnEnd:p?void 0:k[y.litter][y.activity].col+k[y.litter][y.activity].span.cols,gridRowStart:p?void 0:k[y.litter][y.activity].row,gridRowEnd:p?void 0:k[y.litter][y.activity].row+k[y.litter][y.activity].span.rows,width:p?void 0:"100%",height:p?void 0:"100%",left:p?"2.5vh":void 0,top:p?"2.5vh":void 0,bottom:p?"2.5vh":void 0,right:p?"2.5vh":void 0,zIndex:p?10:void 0},children:[y.showExpandButton&&(0,e.jsx)(x.Z,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,e.jsx)(g.Z,{"aria-label":"expand presentation button",onClick:()=>u(!p),sx:{border:"2px solid",borderColor:N.palette.promptPanelBackground.main,background:N.palette.slideSectionBackground.main},children:p?(0,e.jsx)(f.Z,{}):(0,e.jsx)(h.Z,{})})}),(0,e.jsx)(x.Z,{sx:{width:"100%",height:"100%",borderRadius:2,border:p?"solid 2px white":void 0},className:"shadow",children:o.presentation})]},"presentation-cell"),y.activity===S.S.deliberation&&(0,e.jsx)(e.Fragment,{children:y.tiles.map((o,s)=>{let l=C[s+1];return void 0!==l?(0,e.jsx)(x.Z,{sx:{gridColumnStart:l.col,gridColumnEnd:l.col+l.span.cols,gridRowStart:l.row,gridRowEnd:l.row+l.span.rows},children:o},"video-cell-at-".concat(s)):(console.warn("Tile with index ".concat(s," not rendered - no position data available")),(0,e.jsx)(e.Fragment,{}))})}),y.activity!=S.S.deliberation&&(0,e.jsxs)(e.Fragment,{children:[y.tiles.slice(0,Math.min(2,y.litter)).map((o,s)=>(0,e.jsx)(x.Z,{sx:{gridColumn:R[y.litter][y.activity].cols,gridRow:s+1},children:o},"video-cell-at-".concat(s))),y.litter>2&&(0,e.jsx)(x.Z,{sx:{gridColumn:y.cells.cols,gridRowStart:3,gridRowEnd:y.cells.rows+1,overflowY:"auto"},children:y.tiles.slice(2).map((o,s)=>(0,e.jsx)(x.Z,{sx:{width:"100%",aspectRatio:Z,mb:P},children:o},"video-cell-at-".concat(s)))})]})]})})})})},(o,s)=>{var l,e;let t=o.activity===s.activity,r=o.availableSpace===s.availableSpace,i=o.enableExpandButton===s.enableExpandButton,a=o.presentation===s.presentation,n=(0,E.wB)(null!==(l=o.testSubscriptions)&&void 0!==l?l:[],null!==(e=s.testSubscriptions)&&void 0!==e?e:[]);return t&&r&&i&&a&&n}),F=l(43670),T=l(17882),_=l(16003),L=l(33351),z=l(43061),P=l(96537),N=l(40395);function H(){let[o,s]=(0,j.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>s(!0),sx:{py:1},children:"LEAVE CALL"}),(0,e.jsx)(N.Z,{open:o,setOpen:s,onSelect:o=>{"leave"===o&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function M(){let{session:o}=(0,j.useContext)(p.H),{slideData:s}=(0,j.useContext)(d.X),l=(0,j.useContext)(w.N),t=(0,j.useContext)(_.ui),[r,a]=(0,j.useState)(!1),[n,c]=(0,j.useState)({activity:s.activity,enableExpandButton:!0,onResize:()=>{S()},presentation:l.presentation,availableSpace:void 0});(0,j.useEffect)(()=>{a(o.remoteConfiguration===i.VS.RemoteWithVideoCall)},[o]),(0,j.useEffect)(()=>{c({...n,activity:s.activity,enableExpandButton:!0,onResize:()=>{S()},presentation:l.presentation})},[s.activity]);let S=()=>{u.Z.emit({type:u.M.Request_SlideRefresh})},[b,f]=(0,z.xE)();return(0,j.useEffect)(()=>{f&&f.width&&f.height&&(c({...n,availableSpace:{w:f.width,h:f.height}}),console.debug("available space: ".concat(f.width," x ").concat(f.height)))},[f]),(0,e.jsxs)(e.Fragment,{children:[r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column",p:1,gap:1},children:[(0,e.jsx)(L.Z,{ref:b,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,e.jsxs)(L.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"end",gap:2,px:1},children:[(0,e.jsx)(T.Z,{orientation:"row"}),(0,e.jsx)(L.Z,{sx:{alignSelf:"center"},children:(0,e.jsx)(H,{})})]})]}),(0,e.jsx)(L.Z,{sx:{position:"absolute",left:0,top:0,right:0,display:"block",p:1},children:(0,e.jsx)(F.Z,{initialCallPreferences:t.call,sx:{width:"100%",height:"100%"},children:(0,e.jsx)(E.ZP,{role:i._b.Client,children:(0,e.jsx)(A,{activity:n.activity,enableExpandButton:n.enableExpandButton,onResize:n.onResize,presentation:n.presentation,availableSpace:n.availableSpace})})})})]}),!r&&(0,e.jsx)(L.Z,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:l.presentation})]})}function O(o){return(0,e.jsx)(e.Fragment,{children:r.UA?(0,e.jsx)(c.Z,{}):(0,e.jsxs)(n.Z,{sid:o.sid,joinCode:o.joinCode,refresh:o.refresh,role:i._b.Client,children:[(0,e.jsx)(a.Z,{}),(0,e.jsx)(M,{})]})})}var V=l(16463);function G(){let o=(0,V.useSearchParams)(),s=o.get("sid"),l=o.get("code"),r="true"===o.get("refresh");return null===s||null===l?(0,e.jsx)("p",{children:"Missing session id or join code"}):(0,e.jsx)(t.Z,{searchParams:o,children:(0,e.jsx)(O,{sid:s,joinCode:l,refresh:r})})}}},function(o){o.O(0,[908,444,866,221,732,403,964,447,913,194,920,297,971,23,744],function(){return o(o.s=83686)}),_N_E=o.O()}]);