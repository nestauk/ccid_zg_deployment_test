(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(o,s,l){Promise.resolve().then(l.bind(l,2898))},2898:function(o,s,l){"use strict";l.r(s),l.d(s,{default:function(){return K}});var e=l(57437),r=l(53622),t=l(63858),i=l(94547),a=l(56832),n=l(78364),c=l(96608),d=l(4766),w=l(93191),p=l(37570),u=l(83593),S=l(4087),b=l(72862);function f(o){return(0,e.jsx)(b.Z,{direction:o.orientation,showConfigMenu:!0,busy:!1})}var h=l(89504),x=l(15785),v=l(40772),g=l(59676),j=l(81386),m=l(22960),y=l(31193),Z=l(60335),E=l(29921),C=l(2265),R=l(88880);let k="".concat(960," / ").concat(700),B={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},T={0:{[x.S.default]:{cols:1,rows:1},[x.S.deliberation]:{cols:1,rows:1}},1:{[x.S.default]:{cols:3,rows:2},[x.S.deliberation]:{cols:3,rows:2}},2:{[x.S.default]:{cols:3,rows:2},[x.S.deliberation]:{cols:3,rows:2}},3:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},4:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},5:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},6:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},7:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},8:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},9:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},10:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},11:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},12:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},13:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},14:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},15:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},16:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},17:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},18:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},19:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},20:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},21:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},22:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},23:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},24:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},25:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},26:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}}},_={0:{[x.S.default]:{col:1,row:1,span:{cols:1,rows:1}},[x.S.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[x.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[x.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},A=o=>o.map((o,s)=>(0,e.jsx)(R.ZP,{test:!0,subscription:o},"test-tile-".concat(s,"-").concat(o.subscriptionId)));var F=(0,C.memo)(function(o){var s,l,r,i,a,n,c,d;let{tiles:w}=(0,C.useContext)(h.fp),[p,u]=(0,C.useState)(!1),[S,b]=(0,C.useState)(),f=(0,C.useRef)(null),[R,F]=(0,C.useState)([]);(0,E.y)(f,F);let L=void 0!==o.testSubscriptions;(0,C.useEffect)(()=>{var s,l;let e=Math.min(null!==(l=null==w?void 0:w.length)&&void 0!==l?l:null===(s=o.testSubscriptions)||void 0===s?void 0:s.length,26),r=o.activity,t=T[e][r],i={w:960*t.cols,h:700*t.rows},a="repeat(".concat(t.cols,", 1fr)"),n="repeat(".concat(t.rows,", 1fr)"),c=o.enableExpandButton&&e>0&&o.activity===x.S.deliberation;b({colsTemplate:a,rowsTemplate:n,cells:t,gridAspect:i,litter:e,activity:r,showExpandButton:c,tiles:o.testSubscriptions?A(o.testSubscriptions):w})},[L,w,o.testSubscriptions,o.activity,o.enableExpandButton]),(0,C.useEffect)(()=>{S&&S.activity!==x.S.deliberation&&u(!1)},[S]),(0,C.useEffect)(()=>{o.onResize()},[R,p,o.availableSpace]);let[z]=(0,v.u)({duration:200}),N="0.5rem",P=(0,m.Z)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(y.Z,{sx:{width:null!==(c=null===(s=o.availableSpace)||void 0===s?void 0:s.w)&&void 0!==c?c:"100%",height:null!==(d=null===(l=o.availableSpace)||void 0===l?void 0:l.h)&&void 0!==d?d:"100%",position:"relative"},children:S&&(0,e.jsx)(y.Z,{sx:{aspectRatio:"".concat(S.gridAspect.w,"/").concat(S.gridAspect.h),objectFit:"contain",height:t.G6?null===(r=o.availableSpace)||void 0===r?void 0:r.h:void 0,width:t.G6?null===(i=o.availableSpace)||void 0===i?void 0:i.w:void 0,maxHeight:null===(a=o.availableSpace)||void 0===a?void 0:a.h,maxWidth:null===(n=o.availableSpace)||void 0===n?void 0:n.w,mx:"auto",my:"auto"},children:(0,e.jsxs)(y.Z,{ref:z,sx:{width:"100%",height:"100%",display:"grid",gap:N,gridTemplateColumns:S.colsTemplate,gridTemplateRows:S.rowsTemplate},children:[(0,e.jsxs)(y.Z,{ref:f,sx:{position:p?"absolute":"relative",gridColumnStart:p?void 0:_[S.litter][S.activity].col,gridColumnEnd:p?void 0:_[S.litter][S.activity].col+_[S.litter][S.activity].span.cols,gridRowStart:p?void 0:_[S.litter][S.activity].row,gridRowEnd:p?void 0:_[S.litter][S.activity].row+_[S.litter][S.activity].span.rows,width:p?void 0:"100%",height:p?void 0:"100%",left:p?"2.5vh":void 0,top:p?"2.5vh":void 0,bottom:p?"2.5vh":void 0,right:p?"2.5vh":void 0,zIndex:p?10:void 0},children:[S.showExpandButton&&(0,e.jsx)(y.Z,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,e.jsx)(Z.Z,{"aria-label":"expand presentation button",onClick:()=>u(!p),sx:{border:"2px solid",borderColor:P.palette.promptPanelBackground.main,background:P.palette.slideSectionBackground.main},children:p?(0,e.jsx)(g.Z,{}):(0,e.jsx)(j.Z,{})})}),(0,e.jsx)(y.Z,{sx:{width:"100%",height:"100%",borderRadius:2,border:p?"solid 2px white":void 0},className:"shadow",children:o.presentation})]},"presentation-cell"),S.activity===x.S.deliberation&&(0,e.jsx)(e.Fragment,{children:S.tiles.map((o,s)=>{let l=B[s+1];return void 0!==l?(0,e.jsx)(y.Z,{sx:{gridColumnStart:l.col,gridColumnEnd:l.col+l.span.cols,gridRowStart:l.row,gridRowEnd:l.row+l.span.rows},children:o},"video-cell-at-".concat(s)):(console.warn("Tile with index ".concat(s," not rendered - no position data available")),(0,e.jsx)(e.Fragment,{}))})}),S.activity!=x.S.deliberation&&(0,e.jsxs)(e.Fragment,{children:[S.tiles.slice(0,Math.min(2,S.litter)).map((o,s)=>(0,e.jsx)(y.Z,{sx:{gridColumn:T[S.litter][S.activity].cols,gridRow:s+1},children:o},"video-cell-at-".concat(s))),S.litter>2&&(0,e.jsx)(y.Z,{sx:{gridColumn:S.cells.cols,gridRowStart:3,gridRowEnd:S.cells.rows+1,overflowY:"auto"},children:S.tiles.slice(2).map((o,s)=>(0,e.jsx)(y.Z,{sx:{width:"100%",aspectRatio:k,mb:N},children:o},"video-cell-at-".concat(s)))})]})]})})})})},(o,s)=>{var l,e;let r=o.activity===s.activity,t=o.availableSpace===s.availableSpace,i=o.enableExpandButton===s.enableExpandButton,a=o.presentation===s.presentation,n=(0,h.wB)(null!==(l=o.testSubscriptions)&&void 0!==l?l:[],null!==(e=s.testSubscriptions)&&void 0!==e?e:[]);return r&&t&&i&&a&&n}),L=l(61190),z=l(44100),N=l(33351),P=l(43061),M=l(96537),V=l(40395);function G(){let[o,s]=(0,C.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.Z,{variant:"outlined",color:"buttonStandard",onClick:()=>s(!0),sx:{py:1},children:"LEAVE CALL"}),(0,e.jsx)(V.Z,{open:o,setOpen:s,onSelect:o=>{"leave"===o&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function H(){let{session:o}=(0,C.useContext)(p.H),{slideData:s}=(0,C.useContext)(d.X),l=(0,C.useContext)(w.N),[r,t]=(0,C.useState)(!1),[a,n]=(0,C.useState)({activity:s.activity,enableExpandButton:!0,onResize:()=>{c()},presentation:l.presentation,availableSpace:void 0});(0,C.useEffect)(()=>{t(o.remoteConfiguration===i.VS.RemoteWithVideoCall)},[o]),(0,C.useEffect)(()=>{n({...a,activity:s.activity,enableExpandButton:!0,onResize:()=>{c()},presentation:l.presentation})},[s.activity]);let c=()=>{u.Z.emit({type:u.M.Request_SlideRefresh})},[b,x]=(0,P.xE)();return(0,C.useEffect)(()=>{x&&x.width&&x.height&&(n({...a,availableSpace:{w:x.width,h:x.height}}),console.debug("available space: ".concat(x.width," x ").concat(x.height)))},[x]),(0,e.jsxs)(e.Fragment,{children:[r&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(L.Z,{sx:{flexGrow:1},joinView:(0,e.jsx)(()=>(0,e.jsx)(z.Z,{preTitle:(0,e.jsx)(S.Z,{i18nKey:"onboarding.thanks"}),title:(0,e.jsx)(S.Z,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),{}),children:[(0,e.jsxs)(N.Z,{sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column",p:1,gap:1},children:[(0,e.jsx)(N.Z,{ref:b,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,e.jsxs)(N.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"end",gap:2,px:1},children:[(0,e.jsx)(f,{orientation:"row"}),(0,e.jsx)(N.Z,{sx:{alignSelf:"center"},children:(0,e.jsx)(G,{})})]})]}),(0,e.jsx)(N.Z,{sx:{position:"absolute",left:0,top:0,right:0,display:"block",p:1},children:(0,e.jsx)(h.ZP,{role:i._b.Client,children:(0,e.jsx)(F,{activity:a.activity,enableExpandButton:a.enableExpandButton,onResize:a.onResize,presentation:a.presentation,availableSpace:a.availableSpace})})})]})}),!r&&(0,e.jsx)(N.Z,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:l.presentation})]})}var O=l(25907);function I(o){return(0,e.jsx)(e.Fragment,{children:t.UA?(0,e.jsx)(c.Z,{}):(0,e.jsx)(O.Z,{sid:o.sid,joinCode:o.joinCode,refresh:o.refresh,role:i._b.Client,children:(0,e.jsxs)(a.Z,{role:i._b.Client,children:[(0,e.jsx)(n.Z,{}),(0,e.jsx)(H,{})]})})})}var D=l(16463);function K(){let o=(0,D.useSearchParams)(),s=o.get("sid"),l=o.get("code"),t="true"===o.get("refresh");return null===s||null===l?(0,e.jsx)("p",{children:"Missing session id or join code"}):(0,e.jsx)(r.Z,{searchParams:o,children:(0,e.jsx)(I,{sid:s,joinCode:l,refresh:t})})}}},function(o){o.O(0,[908,444,866,221,732,403,964,447,808,194,920,335,971,23,744],function(){return o(o.s=83686)}),_N_E=o.O()}]);