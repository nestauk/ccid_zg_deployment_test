(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(o,s,e){Promise.resolve().then(e.bind(e,2898))},2898:function(o,s,e){"use strict";e.r(s),e.d(s,{default:function(){return K}});var l=e(57437),r=e(53622),t=e(63858),a=e(94547),i=e(56832),n=e(78364),c=e(96608),d=e(4766),w=e(93191),p=e(37570),u=e(83593),S=e(4087),b=e(55712);function f(o){return(0,l.jsx)(b.ZP,{direction:o.orientation,showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1})}var v=e(89504),h=e(15785),x=e(40772),g=e(59676),m=e(81386),j=e(22960),y=e(31193),C=e(60335),Z=e(29921),R=e(2265),E=e(88880);let k="".concat(960," / ").concat(700),B={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},N={0:{[h.S.default]:{cols:1,rows:1},[h.S.deliberation]:{cols:1,rows:1}},1:{[h.S.default]:{cols:3,rows:2},[h.S.deliberation]:{cols:3,rows:2}},2:{[h.S.default]:{cols:3,rows:2},[h.S.deliberation]:{cols:3,rows:2}},3:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},4:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},5:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:3,rows:3}},6:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},7:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},8:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:3}},9:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},10:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},11:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},12:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:4,rows:4}},13:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},14:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},15:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},16:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:5,rows:4}},17:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},18:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},19:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},20:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:4}},21:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},22:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},23:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},24:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},25:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}},26:{[h.S.default]:{cols:6,rows:5},[h.S.deliberation]:{cols:6,rows:5}}},T={0:{[h.S.default]:{col:1,row:1,span:{cols:1,rows:1}},[h.S.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[h.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[h.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[h.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[h.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},F=o=>o.map((o,s)=>(0,l.jsx)(E.ZP,{test:!0,subscription:o},"test-tile-".concat(s,"-").concat(o.subscriptionId)));var _=(0,R.memo)(function(o){var s,e,r,a,i,n,c,d;let{tiles:w}=(0,R.useContext)(v.fp),[p,u]=(0,R.useState)(!1),[S,b]=(0,R.useState)(),f=(0,R.useRef)(null),[E,_]=(0,R.useState)([]);(0,Z.y)(f,_);let A=void 0!==o.testSubscriptions;(0,R.useEffect)(()=>{var s,e;let l=Math.min(null!==(e=null==w?void 0:w.length)&&void 0!==e?e:null===(s=o.testSubscriptions)||void 0===s?void 0:s.length,26),r=o.activity,t=N[l][r],a={w:960*t.cols,h:700*t.rows},i="repeat(".concat(t.cols,", 1fr)"),n="repeat(".concat(t.rows,", 1fr)"),c=o.enableExpandButton&&l>0&&o.activity===h.S.deliberation;b({colsTemplate:i,rowsTemplate:n,cells:t,gridAspect:a,litter:l,activity:r,showExpandButton:c,tiles:o.testSubscriptions?F(o.testSubscriptions):w})},[A,w,o.testSubscriptions,o.activity,o.enableExpandButton]),(0,R.useEffect)(()=>{S&&S.activity!==h.S.deliberation&&u(!1)},[S]),(0,R.useEffect)(()=>{o.onResize()},[E,p,o.availableSpace]);let[P]=(0,x.u)({duration:200}),z="0.5rem",D=(0,j.Z)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Z,{className:"tiles-inner-container",sx:{width:null!==(c=null===(s=o.availableSpace)||void 0===s?void 0:s.w)&&void 0!==c?c:"100%",height:null!==(d=null===(e=o.availableSpace)||void 0===e?void 0:e.h)&&void 0!==d?d:"100%",position:"relative"},children:S&&(0,l.jsx)(y.Z,{className:"tiles-container",sx:{aspectRatio:"".concat(S.gridAspect.w,"/").concat(S.gridAspect.h),objectFit:"contain",height:t.G6?null===(r=o.availableSpace)||void 0===r?void 0:r.h:void 0,width:t.G6?null===(a=o.availableSpace)||void 0===a?void 0:a.w:void 0,maxHeight:null===(i=o.availableSpace)||void 0===i?void 0:i.h,maxWidth:null===(n=o.availableSpace)||void 0===n?void 0:n.w,mx:"auto",my:"auto",p:1},children:(0,l.jsxs)(y.Z,{className:"tiles-grid",ref:P,sx:{width:"100%",height:"100%",display:"grid",gap:z,gridTemplateColumns:S.colsTemplate,gridTemplateRows:S.rowsTemplate},children:[(0,l.jsxs)(y.Z,{ref:f,sx:{position:p?"absolute":"relative",gridColumnStart:p?void 0:T[S.litter][S.activity].col,gridColumnEnd:p?void 0:T[S.litter][S.activity].col+T[S.litter][S.activity].span.cols,gridRowStart:p?void 0:T[S.litter][S.activity].row,gridRowEnd:p?void 0:T[S.litter][S.activity].row+T[S.litter][S.activity].span.rows,width:p?void 0:"100%",height:p?void 0:"100%",left:p?"2.5vh":void 0,top:p?"2.5vh":void 0,bottom:p?"2.5vh":void 0,right:p?"2.5vh":void 0,zIndex:p?10:void 0},children:[S.showExpandButton&&(0,l.jsx)(y.Z,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,l.jsx)(C.Z,{"aria-label":"expand presentation button",onClick:()=>u(!p),sx:{border:"2px solid",borderColor:D.palette.promptPanelBackground.main,background:D.palette.slideSectionBackground.main},children:p?(0,l.jsx)(g.Z,{}):(0,l.jsx)(m.Z,{})})}),(0,l.jsx)(y.Z,{sx:{width:"100%",height:"100%",borderRadius:2,border:p?"solid 2px white":void 0},className:"shadow",children:o.presentation})]},"presentation-cell"),S.activity===h.S.deliberation&&(0,l.jsx)(l.Fragment,{children:S.tiles.map((o,s)=>{let e=B[s+1];return void 0!==e?(0,l.jsx)(y.Z,{sx:{gridColumnStart:e.col,gridColumnEnd:e.col+e.span.cols,gridRowStart:e.row,gridRowEnd:e.row+e.span.rows},children:o},"video-cell-at-".concat(s)):(console.warn("Tile with index ".concat(s," not rendered - no position data available")),(0,l.jsx)(l.Fragment,{}))})}),S.activity!=h.S.deliberation&&(0,l.jsxs)(l.Fragment,{children:[S.tiles.slice(0,Math.min(2,S.litter)).map((o,s)=>(0,l.jsx)(y.Z,{sx:{gridColumn:N[S.litter][S.activity].cols,gridRow:s+1},children:o},"video-cell-at-".concat(s))),S.litter>2&&(0,l.jsx)(y.Z,{sx:{gridColumn:S.cells.cols,gridRowStart:3,gridRowEnd:S.cells.rows+1,overflowY:"auto"},children:S.tiles.slice(2).map((o,s)=>(0,l.jsx)(y.Z,{sx:{width:"100%",aspectRatio:k,mb:z},children:o},"video-cell-at-".concat(s)))})]})]})})})})},(o,s)=>{var e,l;let r=o.activity===s.activity,t=o.availableSpace===s.availableSpace,a=o.enableExpandButton===s.enableExpandButton,i=o.presentation===s.presentation,n=(0,v.wB)(null!==(e=o.testSubscriptions)&&void 0!==e?e:[],null!==(l=s.testSubscriptions)&&void 0!==l?l:[]);return r&&t&&a&&i&&n}),A=e(61190),P=e(44100),z=e(33351),D=e(43061),M=e(96537),L=e(40395);function O(){let[o,s]=(0,R.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.Z,{disableFocusRipple:!0,sx:o=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",px:3,py:1,"&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...o.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>s(!0),children:(0,l.jsx)(S.Z,{i18nKey:"onboarding.leaveCall"})}),(0,l.jsx)(L.Z,{open:o,setOpen:s,onSelect:o=>{"leave"===o&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function G(){let{session:o}=(0,R.useContext)(p.H),{slideData:s}=(0,R.useContext)(d.X),e=(0,R.useContext)(w.N),[r,t]=(0,R.useState)(!1),[i,n]=(0,R.useState)({activity:s.activity,enableExpandButton:!0,onResize:()=>{c()},presentation:e.presentation,availableSpace:void 0});(0,R.useEffect)(()=>{t(o.remoteConfiguration===a.VS.RemoteWithVideoCall)},[o]),(0,R.useEffect)(()=>{n({...i,activity:s.activity,enableExpandButton:!0,onResize:()=>{c()},presentation:e.presentation})},[s.activity]);let c=()=>{u.Z.emit({type:u.M.Request_SlideRefresh})},[b,h]=(0,D.xE)();return(0,R.useEffect)(()=>{h&&h.width&&h.height&&(n({...i,availableSpace:{w:h.width,h:h.height}}),console.debug("available space: ".concat(h.width," x ").concat(h.height)))},[h]),(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(A.Z,{sx:{flexGrow:1},joinView:(0,l.jsx)(()=>(0,l.jsx)(P.Z,{preTitle:(0,l.jsx)(S.Z,{i18nKey:"onboarding.thanks"}),title:(0,l.jsx)(S.Z,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),{}),children:[(0,l.jsxs)(z.Z,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,l.jsx)(z.Z,{className:"available-space-ref",ref:b,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,l.jsxs)(z.Z,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr",px:1},children:[(0,l.jsx)(z.Z,{}),(0,l.jsx)(f,{orientation:"row"}),(0,l.jsx)(z.Z,{sx:{alignSelf:"center",justifySelf:"end",pr:1},children:(0,l.jsx)(O,{})})]})]}),(0,l.jsx)(z.Z,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,l.jsx)(v.ZP,{role:a._b.Client,children:(0,l.jsx)(_,{activity:i.activity,enableExpandButton:i.enableExpandButton,onResize:i.onResize,presentation:i.presentation,availableSpace:i.availableSpace})})})]})}),!r&&(0,l.jsx)(z.Z,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:e.presentation})]})}var H=e(25907);function V(o){return(0,l.jsx)(l.Fragment,{children:t.UA?(0,l.jsx)(c.Z,{}):(0,l.jsx)(H.Z,{sid:o.sid,joinCode:o.joinCode,refresh:o.refresh,role:a._b.Client,children:(0,l.jsxs)(i.Z,{role:a._b.Client,children:[(0,l.jsx)(n.Z,{}),(0,l.jsx)(G,{})]})})})}var I=e(16463);function K(){let o=(0,I.useSearchParams)(),s=o.get("sid"),e=o.get("code"),t="true"===o.get("refresh");return null===s||null===e?(0,l.jsx)("p",{children:"Missing session id or join code"}):(0,l.jsx)(r.Z,{searchParams:o,children:(0,l.jsx)(V,{sid:s,joinCode:e,refresh:t})})}}},function(o){o.O(0,[908,444,866,221,732,403,964,747,976,194,920,335,971,23,744],function(){return o(o.s=83686)}),_N_E=o.O()}]);