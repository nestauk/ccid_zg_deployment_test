(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[32],{83686:function(o,e,s){Promise.resolve().then(s.bind(s,62448))},62448:function(o,e,s){"use strict";s.r(e),s.d(e,{default:function(){return K}});var l=s(57437),r=s(53622),t=s(2265),a=s(63858),i=s(94547),n=s(56832),c=s(78364),d=s(71432),w=s(96608),p=s(4766),u=s(93191),S=s(37570),b=s(83593),f=s(4087),v=s(23336),h=s(89504),x=s(15785),g=s(40772),m=s(59676),j=s(81386),y=s(22960),C=s(31193),Z=s(60335),E=s(29921),R=s(88880);let k="".concat(960," / ").concat(700),B={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},N={0:{[x.S.default]:{cols:1,rows:1},[x.S.deliberation]:{cols:1,rows:1}},1:{[x.S.default]:{cols:3,rows:2},[x.S.deliberation]:{cols:3,rows:2}},2:{[x.S.default]:{cols:3,rows:2},[x.S.deliberation]:{cols:3,rows:2}},3:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},4:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},5:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:3,rows:3}},6:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},7:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},8:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:3}},9:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},10:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},11:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},12:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:4,rows:4}},13:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},14:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},15:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},16:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:5,rows:4}},17:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},18:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},19:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},20:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:4}},21:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},22:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},23:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},24:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},25:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}},26:{[x.S.default]:{cols:6,rows:5},[x.S.deliberation]:{cols:6,rows:5}}},T={0:{[x.S.default]:{col:1,row:1,span:{cols:1,rows:1}},[x.S.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[x.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[x.S.default]:{col:1,row:1,span:{cols:2,rows:2}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[x.S.default]:{col:1,row:1,span:{cols:5,rows:5}},[x.S.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},F=o=>o.map((o,e)=>(0,l.jsx)(R.ZP,{test:!0,subscription:o},"test-tile-".concat(e,"-").concat(o.subscriptionId)));var _=(0,t.memo)(function(o){var e,s,r,i,n,c,d,w;let{tiles:p}=(0,t.useContext)(h.fp),[u,S]=(0,t.useState)(!1),[b,f]=(0,t.useState)(),v=(0,t.useRef)(null),[R,_]=(0,t.useState)([]);(0,E.y)(v,_);let A=void 0!==o.testSubscriptions;(0,t.useEffect)(()=>{var e,s;let l=Math.min(null!==(s=null==p?void 0:p.length)&&void 0!==s?s:null===(e=o.testSubscriptions)||void 0===e?void 0:e.length,26),r=o.activity,t=N[l][r],a={w:960*t.cols,h:700*t.rows},i="repeat(".concat(t.cols,", 1fr)"),n="repeat(".concat(t.rows,", 1fr)"),c=o.enableExpandButton&&l>0&&o.activity===x.S.deliberation;f({colsTemplate:i,rowsTemplate:n,cells:t,gridAspect:a,litter:l,activity:r,showExpandButton:c,tiles:o.testSubscriptions?F(o.testSubscriptions):p})},[A,p,o.testSubscriptions,o.activity,o.enableExpandButton]),(0,t.useEffect)(()=>{b&&b.activity!==x.S.deliberation&&S(!1)},[b]),(0,t.useEffect)(()=>{o.onResize()},[R,u,o.availableSpace]);let[P]=(0,g.u)({duration:200}),z="0.5rem",D=(0,y.Z)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(C.Z,{className:"tiles-inner-container",sx:{width:null!==(d=null===(e=o.availableSpace)||void 0===e?void 0:e.w)&&void 0!==d?d:"100%",height:null!==(w=null===(s=o.availableSpace)||void 0===s?void 0:s.h)&&void 0!==w?w:"100%",position:"relative"},children:b&&(0,l.jsx)(C.Z,{className:"tiles-container",sx:{aspectRatio:"".concat(b.gridAspect.w,"/").concat(b.gridAspect.h),objectFit:"contain",height:a.G6?null===(r=o.availableSpace)||void 0===r?void 0:r.h:void 0,width:a.G6?null===(i=o.availableSpace)||void 0===i?void 0:i.w:void 0,maxHeight:null===(n=o.availableSpace)||void 0===n?void 0:n.h,maxWidth:null===(c=o.availableSpace)||void 0===c?void 0:c.w,mx:"auto",my:"auto",p:1},children:(0,l.jsxs)(C.Z,{className:"tiles-grid",ref:P,sx:{width:"100%",height:"100%",display:"grid",gap:z,gridTemplateColumns:b.colsTemplate,gridTemplateRows:b.rowsTemplate},children:[(0,l.jsxs)(C.Z,{ref:v,sx:{position:u?"absolute":"relative",gridColumnStart:u?void 0:T[b.litter][b.activity].col,gridColumnEnd:u?void 0:T[b.litter][b.activity].col+T[b.litter][b.activity].span.cols,gridRowStart:u?void 0:T[b.litter][b.activity].row,gridRowEnd:u?void 0:T[b.litter][b.activity].row+T[b.litter][b.activity].span.rows,width:u?void 0:"100%",height:u?void 0:"100%",left:u?"2.5vh":void 0,top:u?"2.5vh":void 0,bottom:u?"2.5vh":void 0,right:u?"2.5vh":void 0,zIndex:u?10:void 0},children:[b.showExpandButton&&(0,l.jsx)(C.Z,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,l.jsx)(Z.Z,{"aria-label":"expand presentation button",onClick:()=>S(!u),sx:{border:"2px solid",borderColor:D.palette.promptPanelBackground.main,background:D.palette.slideSectionBackground.main},children:u?(0,l.jsx)(m.Z,{}):(0,l.jsx)(j.Z,{})})}),(0,l.jsx)(C.Z,{sx:{width:"100%",height:"100%",borderRadius:2,border:u?"solid 2px white":void 0},className:"shadow",children:o.presentation})]},"presentation-cell"),b.activity===x.S.deliberation&&(0,l.jsx)(l.Fragment,{children:b.tiles.map((o,e)=>{let s=B[e+1];return void 0!==s?(0,l.jsx)(C.Z,{sx:{gridColumnStart:s.col,gridColumnEnd:s.col+s.span.cols,gridRowStart:s.row,gridRowEnd:s.row+s.span.rows},children:o},"video-cell-at-".concat(e)):(console.warn("Tile with index ".concat(e," not rendered - no position data available")),(0,l.jsx)(l.Fragment,{}))})}),b.activity!=x.S.deliberation&&(0,l.jsxs)(l.Fragment,{children:[b.tiles.slice(0,Math.min(2,b.litter)).map((o,e)=>(0,l.jsx)(C.Z,{sx:{gridColumn:N[b.litter][b.activity].cols,gridRow:e+1},children:o},"video-cell-at-".concat(e))),b.litter>2&&(0,l.jsx)(C.Z,{sx:{gridColumn:b.cells.cols,gridRowStart:3,gridRowEnd:b.cells.rows+1,overflowY:"auto"},children:b.tiles.slice(2).map((o,e)=>(0,l.jsx)(C.Z,{sx:{width:"100%",aspectRatio:k,mb:z},children:o},"video-cell-at-".concat(e)))})]})]})})})})},(o,e)=>{var s,l;let r=o.activity===e.activity,t=o.availableSpace===e.availableSpace,a=o.enableExpandButton===e.enableExpandButton,i=o.presentation===e.presentation,n=(0,h.wB)(null!==(s=o.testSubscriptions)&&void 0!==s?s:[],null!==(l=e.testSubscriptions)&&void 0!==l?l:[]);return r&&t&&a&&i&&n}),A=s(61190),P=s(44100),z=s(33351),D=s(43061),L=s(96537),M=s(40395);function O(){let[o,e]=(0,t.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(L.Z,{disableFocusRipple:!0,sx:o=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",px:3,py:1,"&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...o.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>e(!0),children:(0,l.jsx)(f.Z,{i18nKey:"onboarding.leaveCall"})}),(0,l.jsx)(M.Z,{open:o,setOpen:e,onSelect:o=>{"leave"===o&&window.location.reload()},prompt:"Are you sure you want to leave the call?",options:[{key:"return",text:"RETURN TO THE CALL",filled:!0},{key:"leave",text:"LEAVE THE CALL",filled:!1}]})]})}function G(){let{session:o}=(0,t.useContext)(S.H),{slideData:e}=(0,p.Ao)(),s=(0,t.useContext)(u.N),[r,a]=(0,t.useState)(!1),[n,c]=(0,t.useState)({activity:e.activity,enableExpandButton:!0,onResize:()=>{d()},presentation:s.presentation,availableSpace:void 0});(0,t.useEffect)(()=>{a(o.remoteConfiguration===i.VS.RemoteWithVideoCall)},[o]),(0,t.useEffect)(()=>{c({...n,activity:e.activity,enableExpandButton:!0,onResize:()=>{d()},presentation:s.presentation})},[e.activity]);let d=()=>{b.Z.emit({type:b.M.Request_SlideRefresh})},[w,x]=(0,D.xE)();return(0,t.useEffect)(()=>{x&&x.width&&x.height&&(c({...n,availableSpace:{w:x.width,h:x.height}}),console.debug("available space: ".concat(x.width," x ").concat(x.height)))},[x]),(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(A.Z,{sx:{flexGrow:1},joinView:(0,l.jsx)(()=>(0,l.jsx)(P.Z,{preTitle:(0,l.jsx)(f.Z,{i18nKey:"onboarding.thanks"}),title:(0,l.jsx)(f.Z,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),{}),children:[(0,l.jsxs)(z.Z,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,l.jsx)(z.Z,{className:"available-space-ref",ref:w,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,l.jsxs)(z.Z,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr",px:1},children:[(0,l.jsx)(z.Z,{}),(0,l.jsx)(v.ZP,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,l.jsx)(z.Z,{sx:{alignSelf:"center",justifySelf:"end",pr:1},children:(0,l.jsx)(O,{})})]})]}),(0,l.jsx)(z.Z,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,l.jsx)(h.ZP,{role:i._b.Client,children:(0,l.jsx)(_,{activity:n.activity,enableExpandButton:n.enableExpandButton,onResize:n.onResize,presentation:n.presentation,availableSpace:n.availableSpace})})})]})}),!r&&(0,l.jsx)(z.Z,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:s.presentation})]})}var H=s(25907);function V(o){return(0,t.useEffect)(()=>{(0,d.r)(window)&&window.addEventListener("beforeunload",o=>{o.preventDefault()})},[]),(0,l.jsx)(l.Fragment,{children:a.UA?(0,l.jsx)(w.Z,{}):(0,l.jsx)(H.Z,{sid:o.sid,joinCode:o.joinCode,refresh:o.refresh,role:i._b.Client,children:(0,l.jsxs)(n.Z,{role:i._b.Client,children:[(0,l.jsx)(c.Z,{}),(0,l.jsx)(G,{})]})})})}var I=s(16463);function K(){let o=(0,I.useSearchParams)(),e=o.get("sid"),s=o.get("code"),t="true"===o.get("refresh");return null===e||null===s?(0,l.jsx)("p",{children:"Missing session id or join code"}):(0,l.jsx)(r.Z,{searchParams:o,children:(0,l.jsx)(V,{sid:e,joinCode:s,refresh:t})})}}},function(o){o.O(0,[908,444,866,221,732,964,403,310,338,662,741,194,691,335,971,23,744],function(){return o(o.s=83686)}),_N_E=o.O()}]);