"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{11265:(e,o,t)=>{t.d(o,{A:()=>i});var n=t(95155),s=t(80317),r=t(90073);function i(){return(0,n.jsxs)(r.A,{component:"main",sx:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem"},children:[(0,n.jsx)(s.A,{variant:"h1",sx:{fontSize:"2.25rem"},children:"The Situation Room"}),(0,n.jsxs)(s.A,{variant:"body1",children:["Thanks for trying to join ",(0,n.jsx)("b",{children:"The Situation Room"}),"."]}),(0,n.jsxs)(s.A,{variant:"body1",children:["Unfortunately, ",(0,n.jsx)("b",{children:"you can't use a phone"})," (or other device with a small screen) to take part in the session."]}),(0,n.jsxs)(s.A,{variant:"body1",children:[(0,n.jsx)("b",{children:"Please use a laptop, tablet"})," or other similar device to join."]})]})}},13202:(e,o,t)=>{t.d(o,{A:()=>a});var n=t(95155),s=t(80357),r=t(12115),i=t(77757);let l={0:{columns:1,rows:1},1:{columns:1,rows:1},2:{columns:1,rows:2},3:{columns:1,rows:3},4:{columns:2,rows:2},5:{columns:2,rows:3},6:{columns:2,rows:3},7:{columns:2,rows:4},8:{columns:2,rows:4},9:{columns:3,rows:3},10:{columns:3,rows:4},11:{columns:3,rows:4},12:{columns:3,rows:4},13:{columns:4,rows:4},14:{columns:4,rows:4},15:{columns:4,rows:4},16:{columns:4,rows:4}};function a(e){let{tiles:o}=(0,r.useContext)(i.qW),[t,a]=(0,r.useState)({rows:1,columns:1});return(0,r.useEffect)(()=>{let e=o.length;if(e<=16)a({rows:l[e].rows,columns:l[e].columns});else{let o=Math.ceil(Math.sqrt(e));a({rows:o,columns:Math.ceil(e/o)})}},[o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.A,{sx:{...e.sx,width:"100%",height:"100%",display:"grid",gap:1,gridTemplateRows:"repeat(".concat(t.rows,", 1fr)"),gridTemplateColumns:"repeat(".concat(t.columns,", 1fr)")},children:o})})}},19672:(e,o,t)=>{t.d(o,{A:()=>x,N:()=>p});var n=t(95155),s=t(25789),r=t(60193),i=t(39142),l=t(18098),a=t(60890),c=t(34678),d=t(24274),u=t(57476);let p=32;function x(e){let{t:o}=(0,d.Bd)(),t=(0,s.A)().palette.callControlButtonIcon.main,x="",h="";return"audio"===e.control?(x=o("audio.enableMic"),h=o("audio.muteMic")):"camera"===e.control&&(x=o("video.enableCamera"),h=o("video.disableCamera")),(0,n.jsxs)(r.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":e.enabled?h:x,onClick:e.toggleFn,sx:o=>({backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.main",height:u.LL,position:e.showMenu?"absolute":"initial",right:e.showMenu?"0":"initial",width:u.LL,"&:hover":{backgroundColor:e.enabled?"callControlButton.dark":"callControlButtonOff.main"},"&:focus-visible":{...o.customStyles.focusRingReverse}}),children:["audio"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(i.A,{color:t,size:p}):(0,n.jsx)(l.A,{color:t,size:p})}),"camera"===e.control&&(0,n.jsx)(n.Fragment,{children:e.enabled?(0,n.jsx)(a.A,{color:t,size:p}):(0,n.jsx)(c.A,{color:t,size:p})})]})}},25790:(e,o,t)=>{t.d(o,{A:()=>u});var n=t(95155),s=t(12115),r=t(98314),i=t(80431),l=t(84073),a=t(18932),c=t(25091),d=t(54884);function u(){let{role:e}=(0,s.useContext)(l.yk),{session:o}=(0,s.useContext)(r.$),{slideData:t}=(0,i.Zm)(),u=(0,s.useRef)(void 0),p=(0,s.useContext)(c.GG),x=(0,s.useCallback)(async()=>{let e=new Audio("/sounds/00-ding.mp3");if(e.volume=.5,(0,d.s)(null==p?void 0:p.state.current.audioOutputDevice))if((0,d.s)(e.setSinkId))try{await e.setSinkId(p.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for SlideTransitionSound",e)}else console.debug("Audio.setSinkId not defined");return e},[p]),h=(0,s.useCallback)(async()=>{(await x()).play()},[x]);return(0,s.useEffect)(()=>{(e===a.sW.Controller||o.remoteConfiguration!==a.LQ.InPerson)&&t.index!==u.current&&t.transitionSound&&(u.current=t.index,h())},[e,o.remoteConfiguration,t.index,t.transitionSound,h]),(0,n.jsx)(n.Fragment,{})}},53285:(e,o,t)=>{t.d(o,{A:()=>ec});var n=t(95155),s=t(98314),r=t(84073),i=t(18932),l=t(23387),a=t(80357),c=t(89041),d=t(4615),u=t(32276),p=t(34824),x=t(12115),h=t(30218),f=t(54884);class g{debug(e){this.logger.debug(e)}info(e){this.logger.info(e)}warn(e){this.logger.warn(e),this.observers.forEach(o=>o(p.LogLevel.WARN,e))}error(e){this.logger.error(e),this.observers.forEach(o=>o(p.LogLevel.ERROR,e))}setLogLevel(e){this.logger.setLogLevel(e)}getLogLevel(){return this.logger.getLogLevel()}addObserver(e){this.observers.push(e)}clearObservers(){this.observers=[]}constructor(e){this.logger=new p.ConsoleLogger("ZgObservableLogger",e),this.observers=[]}}let m=(0,x.createContext)({}),b=(0,x.memo)(function(e){let[o]=(0,x.useState)(new g(e.level)),[t,s]=(0,x.useState)({logger:o}),r=(0,x.useRef)(void 0),i=(0,x.useRef)(void 0);(0,x.useEffect)(()=>((0,f.s)(window)&&(r.current=window.onerror,window.onerror=l,console.debug("Captured window.onerror"),i.current=console.error,console.error=a,console.debug("Captured console.error")),o.addObserver((e,o)=>{s({...t,lastLog:{level:e,msg:o}})}),()=>{o.clearObservers(),(0,f.s)(window)&&(0,f.s)(r.current)&&(window.onerror=r.current),(0,f.s)(i.current)&&(console.error=i.current)}),[]);let l=(0,x.useCallback)((e,o,n,i,l)=>{if((0,f.s)(e)){var a;null==(a=r.current)||a.call(r,e,o,n,i,l),s({...t,lastLog:{level:0,msg:"[WINDOW] ".concat(null==l?void 0:l.message)}})}},[r,s]),a=(0,x.useCallback)(function(){for(var e,o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];(0,f.s)(n)&&(null==(e=i.current)||e.call(i,...n),s({...t,lastLog:{level:1,msg:JSON.stringify([...n])}}))},[i,s]);return(0,n.jsx)(m.Provider,{value:t,children:(0,n.jsx)(u.IBQ,{logger:o,children:e.children})})},()=>!0);function v(e){let{logger:o}=(0,x.useContext)(m);return(0,n.jsx)(u.DNH,{options:{logger:o},children:e.children})}var w=t(25612),j=t(25091),A=t(80890),C=t(59850);function y(e){let{state:o}=(0,x.useContext)(w.j),{state:t}=(0,j.EI)(),{meetingStatus:s}=(0,x.useContext)(C.s),{lastLog:r}=(0,x.useContext)(m),i=(0,u.GYC)(),{selectedDevice:l}=(0,u.xtX)(),a=(0,u.j6L)(),[c,d]=(0,x.useState)(),[h]=(0,x.useState)({voiceFocusFellBackToInnerStream:(e,o)=>{console.warn("VoiceFocus fell back to inner stream",e,o)},voiceFocusInsufficientResources:()=>{console.warn("VoiceFocus insufficient resources")}});(0,x.useEffect)(()=>{l!==c&&(0,A.Xb)(c)&&c.removeObserver(h),d(l),(0,A.Xb)(l)&&l.addObserver(h)},[l]);let g=(0,x.useRef)(!1),b=async e=>{if(s!==u.e0s.Succeeded)return void console.debug("ZgChimeMonitor: Meeting not in Succeeded state, not restarting audio input.");if(g.current)return void console.debug("ZgChimeMonitor: Already restarting audio input.");g.current=!0,console.debug("ZgChimeMonitor: Restarting audio input shortly..."),await new Promise(o=>setTimeout(o,e)),console.debug("ZgChimeMonitor: Restarting audio input now."),g.current=!0;try{var o,n;let e=(0,A.Xb)(c)?c.getInnerDevice():(0,f.s)(c)?c:null!=(n=t.preference.audioDevice)?n:null==(o=i.audioInputDevices)?void 0:o[0];if(console.info("ZgChimeMonitor: Restarting audio input device",e),(0,f.s)(e)){if((0,A.Xb)(c))try{await c.stop()}catch(e){console.warn("Error encountered stopping audio transform device.",e)}await i.startAudioInputDevice(e)}else throw"No device preferences found."}catch(e){console.error("ZgChimeMonitor: Failed to restart audio input device",e)}finally{g.current=!1}};(0,x.useEffect)(()=>{void 0!==r&&(r.msg.includes("SendingAudioFailure health policy maximum warnings breached.")&&(console.warn("ZgChimeMonitor: Detected audio failure log."),b(0)),r.msg.includes("Cannot read properties of undefined (reading 'destroy_audio_buffer')")&&(console.warn("ZgChimeMonitor: Detected uncaught transform error log."),b(0)))},[r]);let v=["signalingDropped","sendingAudioFailed","meetingReconnected"];(0,x.useEffect)(()=>{void 0!==a&&(console.debug("ZgChimeMonitor: Meeting event",a.name),v.some(e=>e===a.name)&&!g.current&&b(2e3))},[a]);let y=(0,x.useRef)(!1);(0,x.useEffect)(()=>{console.debug("ZgChimeMonitor: Meeting status: ".concat(u.e0s[s])),s===u.e0s.Succeeded&&y.current&&b(0),y.current=!0},[s]),(0,x.useEffect)(()=>{s===u.e0s.Succeeded?p.DefaultDeviceController.getAudioContext().addEventListener("statechange",S):p.DefaultDeviceController.getAudioContext().removeEventListener("statechange",S)},[]);let S=(0,x.useCallback)(async e=>{let o=p.DefaultDeviceController.getAudioContext();if("suspended"===o.state)for(console.warn("ZgChimeMonitor: Audio context state: ".concat(o.state));"suspended"===o.state;)await o.resume(),await new Promise(e=>setTimeout(e,100)),"suspended"===o.state&&console.warn("ZgChimeMonitor: Failed to resume audio context - attempt ".concat(1," of 10."))},[]),k=(0,x.useRef)(void 0),[I,R]=(0,x.useState)(),[E,D]=(0,x.useState)();return(0,x.useEffect)(()=>{var e;R(null==(e=t.current.availableAudioInputDevices)?void 0:e.find(e=>"default"===e.deviceId))},[t.current.availableAudioInputDevices]),(0,x.useEffect)(()=>{(async e=>{D(await (0,u.IPJ)(e))})(t.current.audioInputDevice)},[t.current.audioInputDevice]),(0,x.useEffect)(()=>{"default"===E&&(0,f.s)(I)&&(0,f.s)(k.current)&&I.label!==k.current.label&&b(0),k.current=I},[I]),(0,n.jsx)(n.Fragment,{children:e.children})}var S=t(45238),k=t(69999);function I(e){let[o,t]=(0,x.useState)({}),[s,l]=(0,x.useState)(!1),[a,c]=(0,x.useState)(),{deviceId:d,role:u}=(0,x.useContext)(r.yk),p=(0,j.EI)(),[h,f]=(0,x.useState)();(0,x.useEffect)(()=>(k.A.on(k.m.WSS_Distribute_Message,f),k.A.on(k.m.Media_Playback_Update,f),()=>{k.A.off(k.m.WSS_Distribute_Message,f),k.A.off(k.m.Media_Playback_Update,f)}),[]),(0,x.useEffect)(()=>{if(void 0!==h)switch(h.type){case k.m.WSS_Distribute_Message:m(h.data);break;case k.m.Media_Playback_Update:g(h.data)}},[h]);let g=e=>{t({...o,[e.videoId]:{update:e}})};(0,x.useEffect)(()=>{l(Object.entries(o).some(e=>e[1].update.isPlaying))},[o]),(0,x.useEffect)(()=>{s&&(c(p.state.current.isAudioEnabled),p.state.current.isAudioEnabled&&(u===i.sW.Controller&&Object.entries(o).some(e=>{let[o,t]=e;return!0===t.update.isPlaying&&!1===t.update.muteFacilitator})||p.controls.selectAudioEnabled(!1))),s||void 0===a||p.state.current.isAudioEnabled===a||p.controls.selectAudioEnabled(a)},[s]);let m=e=>{"mute-update"===e.type&&b(e.content.pids)},b=e=>{p.state.current.isAudioEnabled&&(e.some(e=>e===d)||e.some(e=>"*"===e))&&p.controls.selectAudioEnabled(!1)};return(0,n.jsx)(n.Fragment,{children:e.children})}var R=t(62652),E=t(48484);function D(e){let[o,t]=(0,x.useState)(),{zgJoinResponse:s}=(0,x.useContext)(S.K);return(0,x.useEffect)(()=>{console.debug("ZgVoiceFocus notes a change in joinResponse",s),(0,f.s)(null==s?void 0:s.createMeetingResponseJson)&&t(JSON.parse(s.createMeetingResponseJson))},[s]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.GZo,{options:{preload:!0},createMeetingResponse:o,children:e.children})})}let F=(0,x.memo)(function(e){return(0,x.useEffect)(()=>{console.debug("Meeting preferences updated:",e.preferences)},[e.preferences]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(b,{level:p.LogLevel.WARN,children:(0,n.jsx)(u.Fjh,{children:(0,n.jsx)(S.A,{joinView:(0,n.jsx)(()=>(0,n.jsxs)(n.Fragment,{children:[e.isPreview&&(0,n.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(c.A,{}),(0,n.jsx)(d.A,{severity:"info",children:"Setting up video call preview..."})]}),!e.isPreview&&(0,n.jsx)(E.A,{preTitle:(0,n.jsx)(R.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(R.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."})]}),{}),isPreview:e.isPreview,children:(0,n.jsx)(v,{children:(0,n.jsx)(C.A,{children:(0,n.jsx)(D,{children:(0,n.jsx)(j.Ay,{initialPrefs:e.preferences,onUpdatePrefs:e.onUpdatePrefs,children:(0,n.jsx)(I,{children:(0,n.jsx)(y,{children:(0,n.jsx)(h.NP,{theme:u._kl,children:e.children})})})})})})})})})})})});var B=t(31240),M=t(57476),T=t(77757),K=t(13202);let L=(0,x.memo)(function(e){let[o,t]=(0,x.useState)(!1),{role:s}=(0,x.useContext)(r.yk),i=(0,x.useRef)(void 0);return(0,x.useEffect)(()=>{e.onSubmitPreferences(o,i.current)},[o]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.A,{className:"preview-call-and-alert-container",sx:{display:"flex",flexDirection:"column",gap:1,height:"45vh",width:"100%"},children:(0,n.jsx)(F,{isPreview:!0,preferences:void 0,onUpdatePrefs:e=>{i.current=e},children:(0,n.jsx)(T.Ay,{role:s,children:(0,n.jsxs)(a.A,{className:"preview-call-container",sx:{backgroundColor:"callControlPanelBackground.main",borderRadius:"10px",display:"flex",flexDirection:"column",height:"100%"},children:[(0,n.jsx)(K.A,{isPreview:!0}),(0,n.jsxs)(a.A,{className:"preview-call-controls-container",sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pl:2},children:[(0,n.jsx)(M.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!0}),(0,n.jsx)(a.A,{className:"join-button-container",sx:{alignContent:"center"},children:(0,n.jsx)(e=>{let{intent:o}=e;return console.debug("Button with intent to join:",o),(0,n.jsx)(B.A,{btnKey:"join",disableFocusRipple:!0,sx:e=>({backgroundColor:"callControlButton.main",color:"buttonStandard.main",mr:2,my:1,"&:hover":{backgroundColor:"callControlButton.light"},"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"}}),variant:o?"outlined":"contained",onClick:e=>t(!o),btnText:o?(0,n.jsx)(R.A,{i18nKey:"onboarding.leaveWorkshop"}):(0,n.jsx)(R.A,{i18nKey:"onboarding.joinWorkshop"})})},{intent:o})})]})]})})})})})},(e,o)=>!0);var W=t(91998),O=t(10310),P=t(66622),N=t(18414);function H(e){let{sid:o,period_ms:t=3e4,enabled:n=!0,duration_ms:s=6e5}=e,r=(0,x.useRef)(null),i=(0,x.useRef)(Date.now()),[l,a]=(0,x.useState)(),{api:c,start:d}=(0,x.useContext)(N.F$);return(0,x.useEffect)(()=>(i.current=Date.now(),r.current=setInterval(async()=>{let e=Date.now()-i.current;if(n&&("indefinite"===s||e<=s)){let e=await d(c.getBasicDeliberationSession(o,"session-state-poll"));(0,f.s)(e)&&a(e)}},t),()=>{(0,f.s)(r.current)&&clearInterval(r.current)}),[o,t,s,n]),{session:l}}var _=t(80317),V=t(24274);function z(){let{setParticipantSessionFlags:e}=(0,x.useContext)(W.C),{sid:o}=(0,x.useContext)(O.L),{t}=(0,V.Bd)(),{session:s}=H({sid:o});(0,x.useEffect)(()=>{k.A.emit({type:k.m.WSS_Request_Disconnect})},[]),(0,x.useEffect)(()=>{(0,f.s)(s)&&s.facilitationState===i.ve.Closed&&r()},[s]);let r=()=>{e({leftTheWorkshop:!1}),k.A.emit({type:k.m.WSS_Request_Reconnect})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{color:"white",sx:{mb:4},variant:"h1",children:(0,n.jsx)(R.A,{i18nKey:"workshop.participantLeftHeading"})}),(0,n.jsx)(_.A,{color:"white",sx:{mb:6},variant:"h2",children:(0,n.jsx)(R.A,{i18nKey:"workshop.participantLeftGuidance"})}),(0,n.jsx)(B.A,{color:"buttonReverse",btnText:t("workshop.rejoinCta"),btnKey:"start",onClick:r})]})}var U=t(37440),Z=t(52769);function J(e){let o="collective.intelligence@nesta.org.uk",t=e.showHeading,s=e.showSignupMethods&&!0,[r,l]=(0,x.useState)(),{sid:c}=(0,x.useContext)(O.L),{session:d}=H({sid:c});(0,x.useEffect)(()=>{k.A.emit({type:k.m.WSS_Request_Disconnect})},[]),(0,x.useEffect)(()=>{(0,f.s)(d)&&d.facilitationState!==i.ve.Closed&&u()},[d]);let u=()=>{k.A.emit({type:k.m.WSS_Request_Reconnect})};return(0,x.useEffect)(()=>{{let e="".concat(window.location.host,"/signup");Z.toDataURL(e).then(e=>{l(e)}).catch(e=>{l(void 0),console.error(e)})}},[!0]),(0,n.jsxs)(a.A,{color:"#fff",sx:{display:"flex",flexDirection:"column",gap:"1.5vh"},children:[t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{variant:"h2",sx:{fontWeight:"bold"},children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.sessionIsClosedRegisterLinkAvailable"})}),(0,n.jsx)(_.A,{color:"white",component:"h2",variant:"h5",sx:{mt:1},children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.encouragement"})})]}),s&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(a.A,{children:[(0,n.jsx)(_.A,{sx:{borderTop:t?"1px solid #fff;":"none",mt:2*!!t,pt:3*!!t},children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.visitWebsite"})}),(0,n.jsx)(U.A,{href:"/signup",target:"_blank",variant:"h3",color:"#fff",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.signUpText"})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{sx:{pt:2},children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.orScanQrCode"})}),(0,n.jsx)("img",{alt:"QR code for signup link: ".concat(window.location.host,"/signup}"),src:r,style:{borderRadius:"5px",marginTop:"0.5rem",height:"175px",width:"175px"}})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{sx:{borderTop:"1px solid #ffffffff;",mt:3,pt:3},children:(0,n.jsx)(R.A,{i18nKey:"onboarding.sessionClosed.emailUs"})}),(0,n.jsx)(U.A,{href:"mailto:".concat(o),target:"_blank",variant:"h5",color:"#fff",children:o})]})]})})]})}var q=t(79005),G=t(90073);function X(e){return(0,n.jsxs)(G.A,{sx:{display:"flex",flexDirection:"column",gap:1,pt:4},children:[e.session.facilitationState>=i.ve.Closed&&(0,n.jsx)(d.A,{severity:"warning",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.thisWorkshopIsClosed"})}),e.session.facilitationState===i.ve.Open&&!e.banned&&(0,n.jsxs)(d.A,{severity:"success",children:[(0,n.jsx)(R.A,{i18nKey:"onboarding.thisWorkshopIsOpen"}),(0,n.jsx)("br",{}),(0,n.jsx)(R.A,{i18nKey:"onboarding.pressJoinToEnter"})]}),e.banned&&(0,n.jsx)(d.A,{severity:"error",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.youAreRemoved"})})]})}function Q(e){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{variant:"body1",color:"white",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(q.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1,mt:4},children:(0,n.jsx)(X,{session:e.session,banned:!0})})]})}var $=t(91028),Y=t(39620),ee=t(25148),eo=t(2218),et=t(14962),en=t(77524),es=t(24251);function er(){let[e,o]=(0,x.useState)(!1),[t,s]=(0,x.useState)(!1),[r,i]=(0,x.useState)(!1);(0,x.useEffect)(()=>{e&&setTimeout(()=>{i(!0)},3e3)},[e]);let[l]=(0,$.Q)();return(0,n.jsxs)(et.A,{children:[(0,n.jsx)(en.A,{expandIcon:(0,n.jsx)(Y.A,{}),"aria-controls":"support-panel-content",id:"support-panel",children:(0,n.jsx)(_.A,{variant:"body1",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.supportInfoHeading"})})}),(0,n.jsx)(es.A,{children:(0,n.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",gap:1},ref:l,children:[(0,n.jsx)(_.A,{variant:"body2",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.supportInfoText1"})}),(0,n.jsx)(B.A,{variant:"outlined",btnKey:"reconnect",size:"small",busy:t,startIcon:(0,n.jsx)(ee.A,{}),onClick:()=>{k.A.emit({type:k.m.WSS_Refresh_Session}),s(!0),setTimeout(()=>{s(!1),o(!0)},2e3)},btnText:(0,n.jsx)(R.A,{i18nKey:"button.reconnect"})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{variant:"body2",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.supportInfoText2"})}),(0,n.jsx)(B.A,{variant:"outlined",btnKey:"reconnect",size:"small",startIcon:(0,n.jsx)(eo.A,{}),onClick:()=>window.location.reload(),btnText:(0,n.jsx)(R.A,{i18nKey:"button.reload"})})]})]})})]})}function ei(e){let o=e=>e.facilitationState===i.ve.Ready;return console.debug("session join info: start intention = ",e.startIntention),console.debug("session join info: isWaiting = ",o(e.session)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.A,{variant:"body1",color:"white",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.youAreAboutToJoin"})}),(0,n.jsx)(q.A,{session:e.session,welcome:!1,layout:"column",white:!0}),(0,n.jsx)(X,{session:e.session,banned:e.banned}),e.startIntention&&o(e.session)&&(0,n.jsxs)(G.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(d.A,{severity:"info",children:(0,n.jsx)(R.A,{i18nKey:"onboarding.waitingForOpen"})}),(0,n.jsx)(er,{})]})]})}let el=e=>e.remoteConfiguration===i.LQ.RemoteWithVideoCall;function ea(e){let{session:o}=(0,x.useContext)(s.$),{publicContent:t}=(0,x.useContext)(O.L),{deviceId:l}=(0,x.useContext)(r.yk),[a,c]=(0,x.useState)(!1);console.debug("ZgOnboardingMeetingSetup render"),(0,x.useEffect)(()=>{(0,f.s)(o.deviceIdBanList)&&c(o.deviceIdBanList.includes(l))},[o,l]);let d=o.facilitationState===i.ve.Closed&&e.role===i.sW.Client;return(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsx)(P.A,{background:!0,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,n.jsx)(Q,{session:o})}),d&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(P.A,{background:!0,rightHalfBackground:"#3E7075CC",rightPanel:(0,n.jsx)(J,{showHeading:!1,showSignupMethods:!0}),privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,n.jsx)(J,{showHeading:!0,showSignupMethods:!1})})}),!d&&e.participantLeft&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(P.A,{background:!0,rightHalfBackground:"#3E7075CC",privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,n.jsx)(z,{})})}),!a&&!d&&!e.participantLeft&&(0,n.jsxs)(n.Fragment,{children:[el(o)&&(0,n.jsx)(P.A,{background:!1,rightPanel:e.videoCallPreview,privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,n.jsx)(ei,{session:o,banned:a,role:e.role,startIntention:e.startIntention})}),!el(o)&&(0,n.jsx)(P.A,{background:!1,rightPanel:void 0,privacyNotice:!0,workshopInformationUrl:t.workshopInformationUrl,children:(0,n.jsx)(ei,{session:o,banned:a,role:e.role,startIntention:e.startIntention})})]})]})}function ec(e){var o;let{session:t}=(0,x.useContext)(s.$),{deviceId:a}=(0,x.useContext)(r.yk),{participantSessionFlags:c}=(0,x.useContext)(W.C),d=t.remoteConfiguration===i.LQ.RemoteWithVideoCall,u=(0,x.useRef)(void 0),[p,h]=(0,x.useState)(!1),[f,g]=(0,x.useState)(!1),[m,b]=(0,x.useState)(!d),[v,w]=(0,x.useState)(!1),j=(0,x.useCallback)((e,o)=>{console.debug("onStartIntention",e,o),u.current=o,b(e)},[]);return(0,x.useEffect)(()=>{console.debug("deviceId changed",a)},[a]),(0,x.useEffect)(()=>{var e,o;h(t.facilitationState===i.ve.Open),g(null!=(o=null==(e=t.deviceIdBanList)?void 0:e.includes(a))&&o)},[t]),(0,x.useEffect)(()=>{let o,t;w((o=e.role,t=null==c?void 0:c.leftTheWorkshop,m&&(p||o===i.sW.Controller)&&(!f||o===i.sW.Controller)&&(!t||o===i.sW.Controller)))},[p,m,f,e.role,null==c?void 0:c.leftTheWorkshop]),(0,n.jsxs)(n.Fragment,{children:[!v&&(0,n.jsx)(ea,{participantLeft:null==c?void 0:c.leftTheWorkshop,role:e.role,startIntention:m,videoCallPreview:d?(0,n.jsx)(L,{onSubmitPreferences:j}):void 0}),v&&d&&(0,n.jsx)(F,{isPreview:!1,preferences:null!=(o=u.current)?o:l.gZ,children:e.children}),v&&!d&&(0,n.jsx)(n.Fragment,{children:e.children})]})}},57476:(e,o,t)=>{t.d(o,{LL:()=>U,jg:()=>Z,xP:()=>J,Ui:()=>q,CX:()=>G,Ay:()=>X,E0:()=>z});var n=t(95155),s=t(78211),r=t(84073),i=t(10310),l=t(18414),a=t(18932),c=t(62652),d=t(31240),u=t(54884),p=t(25789),x=t(80357),h=t(80317),f=t(32276),g=t(39142),m=t(71385),b=t(12115),v=t(23387),w=t(25091),j=t(80890),A=t(84389),C=t(34804),y=t(19131),S=t(23405),k=t(45279),I=t(48464),R=t(39970),E=t(5917),D=t(35130),F=t(88379),B=t(90073);function M(e){let o=(0,f.YGn)(),[t,s]=(0,b.useState)(0),{muted:r}=(0,f.abu)(),i=(0,b.useCallback)(e=>{r?s(0):s(parseFloat(e.toFixed(2)))},[s,r]);(0,f.q8N)(i);let l=e=>(0,n.jsx)(B.A,{sx:{borderWidth:1,flexGrow:1,height:"".concat(.25,"rem"),borderTopLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderBottomLeftRadius:e.isStart?"".concat(.125,"rem"):0,borderTopRightRadius:e.isEnd?"".concat(.125,"rem"):0,borderBottomRightRadius:e.isEnd?"".concat(.125,"rem"):0,backgroundColor:t>=e.min?e.indicatorColor:"transparent",...e.sx}});return(0,n.jsxs)(B.A,{sx:{display:"flex",flexDirection:"row",gap:0,...e.sx},children:[!r&&Array(20).fill(void 0).map((e,o)=>.05*o).map((e,s)=>(0,n.jsx)(l,{min:e,value:t,indicatorColor:"callControlMenuItem.main",isStart:0===s,isEnd:e<=t&&t<e+.05},"meter-".concat(o,"-cell-").concat(s))),r&&(0,n.jsx)(c.A,{i18nKey:"audio.muted"})]})}function T(e){let o=(0,p.A)(),t=async()=>{let o=new Audio("/sounds/00-ding.mp3");if(o.volume=.5,(0,u.s)(e.config.state.current.audioOutputDevice))if((0,u.s)(o.setSinkId))try{await o.setSinkId(e.config.state.current.audioOutputDevice)}catch(e){console.warn("Error setting audio output device for AudioMenu (test speaker)",e)}else console.debug("Audio.setSinkId not defined");return o},s=(0,b.useCallback)(async()=>{(await t()).play()},[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"audio.audioOutputSelection"})})})}),e.audioOutputDeviceList.map(o=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var t;return t=o.deviceType.deviceId,void e.config.controls.selectAudioOutputDevice(t)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[o.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!o.selected,sx:{color:o.selected?"callControlButton.main":"callControlMenuItem.main"},children:z(o.deviceType)})]},"menu-item-select-".concat(o.deviceType.label))),(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),(0,n.jsxs)(S.A,{disableRipple:!1,sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),onClick:()=>{s()},children:[(0,n.jsx)(k.A,{children:(0,n.jsx)(D.A,{color:o.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main"},children:"Test speaker"})]},"menu-item-output-audio-test")]})}function K(e){var o,t;let s=(0,p.A)(),r=async o=>{e.config.controls.selectVoiceFocus(o)},i=e.config.state.settings.offerVoiceFocus&&!0===e.config.state.current.isVoiceFocusSupported;return(0,n.jsxs)(I.A,{...(0,F.NA)(e.popupState),anchorPosition:{left:null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().left,top:(null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().top)-Z},anchorReference:"anchorPosition",sx:G,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"audio.audioInputSelection"})})})}),e.audioInputDeviceList&&e.audioInputDeviceList.map(o=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var t;return t=o.deviceType.deviceId,void e.config.controls.selectAudioDevice(t)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[o.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!o.selected,sx:{color:o.selected?"callControlButton.main":"callControlMenuItem.main"},children:z(o.deviceType)})]},"menu-item-select-".concat(o.deviceType.label))),i&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),i&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>r(!e.config.state.current.isVoiceFocusEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isVoiceFocusEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isVoiceFocusEnabled,sx:{color:e.config.state.current.isVoiceFocusEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(c.A,{i18nKey:"audio.reduceBackgroundNoise"})})]},"menu-item-select-voice-focus"),e.showAudioInputVisualisation&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),e.showAudioInputVisualisation&&(0,n.jsxs)(R.Ay,{sx:{mb:1},children:[(0,n.jsx)(k.A,{sx:{minWidth:"36px"},children:(0,n.jsx)(g.A,{color:s.palette.callControlButtonIcon.main,size:"1.25rem"})}),(0,n.jsx)(y.A,{sx:{pl:0},children:(0,n.jsx)(M,{sx:{width:"100%",minWidth:"100px",userSelect:"none",color:"callControlMenuItem.main"}})})]},"menu-item-input-audio-visualisation"),e.audioOutputDeviceList&&0!==e.audioOutputDeviceList.length&&(0,n.jsx)(T,{config:e.config,audioOutputDeviceList:e.audioOutputDeviceList})]})}var L=t(19672),W=t(50533),O=t(53e3),P=t(60193),N=t(24274);function H(e){let{t:o}=(0,N.Bd)(),t="";return"audio"===e.control?t=o("audio.settingsMenu"):"camera"===e.control&&(t=o("video.settingsMenu")),(0,n.jsx)(P.A,{disabled:e.busy,disableFocusRipple:!0,"aria-label":t,...(0,F.cO)(e.popupState),sx:o=>({backgroundColor:e.enabled?"callControlMenuButton.main":"callControlButtonOff.dark",borderRadius:"30px",height:"100%",pl:"10px",pr:"calc(".concat(U," + 6px)"),"&:hover":{backgroundColor:e.enabled?"callControlButton.main":"callControlButtonOff.dark"},"&:focus-visible":{...o.customStyles.focusRingReverse}}),children:e.popupState.isOpen?(0,n.jsx)(W.A,{sx:{color:"callControlButtonIcon.main"}}):(0,n.jsx)(O.A,{sx:{color:"callControlButtonIcon.main"}})})}var _=t(26667);function V(e){var o,t;let s=async o=>{e.config.controls.selectBackgroundBlur(o)},r=e.config.state.settings.offerBackgroundBlur&&!0===e.config.state.current.isBackgroundBlurSupported;return(0,n.jsxs)(I.A,{...(0,F.NA)(e.popupState),anchorPosition:{left:null==(o=e.popupState.anchorEl)?void 0:o.getBoundingClientRect().left,top:(null==(t=e.popupState.anchorEl)?void 0:t.getBoundingClientRect().top)-Z},anchorReference:"anchorPosition",sx:G,transformOrigin:{vertical:"bottom",horizontal:"left"},children:[(0,n.jsx)(C.A,{disableSticky:!0,sx:{backgroundColor:"transparent",py:q},children:(0,n.jsx)(y.A,{sx:{color:"callControlMenuItem.main",pl:J,userSelect:"none"},children:(0,n.jsx)("b",{children:(0,n.jsx)(c.A,{i18nKey:"video.videoInputSelection"})})})}),e.videoDeviceList&&e.videoDeviceList.map(o=>(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>{var t;return t=o.deviceType.deviceId,void e.config.controls.selectVideoDevice(t)},sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[o.selected&&(0,n.jsx)(k.A,{sx:{color:"callControlButton.main"},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(y.A,{inset:!o.selected,sx:{color:o.selected?"callControlButton.main":"callControlMenuItem.main"},children:z(o.deviceType)})]},"menu-item-select-".concat(o.deviceType.label))),r&&(0,n.jsx)(A.A,{component:"li",sx:{borderColor:"callControlMenuDivider.main"}}),r&&(0,n.jsxs)(S.A,{disableRipple:!0,onClick:()=>s(!e.config.state.current.isBackgroundBlurEnabled),sx:e=>({"&:hover":{backgroundColor:"callControlMenuBackground.light"},"&:focus-visible":{...e.customStyles.focusRingReverse}}),children:[e.config.state.current.isBackgroundBlurEnabled&&(0,n.jsx)(k.A,{sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(_.A,{})}),(0,n.jsx)(y.A,{inset:!e.config.state.current.isBackgroundBlurEnabled,sx:{color:e.config.state.current.isBackgroundBlurEnabled?"callControlButton.main":"callControlMenuItem.main"},children:(0,n.jsx)(c.A,{i18nKey:"video.blurBackground"})})]},"menu-item-select-background-blur")]})}let z=e=>e.label,U="52px",Z=8,J="36px",q="6px",G={"& .MuiPaper-root":{backgroundColor:"callControlMenuBackground.main",border:"2px solid",borderColor:"callControlButton.main",borderRadius:"10px"}};function X(e){let{meetingDebug:o}=(0,b.useContext)(s.c),[t,A]=(0,b.useState)(),[C,y]=(0,b.useState)(),[S,k]=(0,b.useState)(),{start:I,api:R}=(0,b.useContext)(l.F$),{sid:E}=(0,b.useContext)(i.L),{role:D,user:F,sessionToken:B,deviceId:T}=(0,b.useContext)(r.yk),W=(0,w.EI)(),O=(0,p.A)(),P=async()=>{W.controls.selectVideoEnabled(!W.state.current.isVideoEnabled)},N=async()=>{W.controls.selectAudioEnabled(!W.state.current.isAudioEnabled)};(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(W.state.current.availableAudioInputDevices)){let e=(0,u.s)(W.state.current.audioInputDevice)?await (0,f.IPJ)(await (0,j.l1)(W.state.current.audioInputDevice)):void 0;A(W.state.current.availableAudioInputDevices.map(o=>({deviceType:o,selected:o.deviceId===e})))}})()},[W.state.current.availableAudioInputDevices,W.state.current.audioInputDevice]),(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(W.state.current.availableAudioOutputDevices)){let e=(0,u.s)(W.state.current.audioOutputDevice)?await (0,f.IPJ)(W.state.current.audioOutputDevice):void 0;y(W.state.current.availableAudioOutputDevices.map(o=>({deviceType:o,selected:o.deviceId===e})))}})()},[W.state.current.availableAudioOutputDevices,W.state.current.audioOutputDevice]),(0,b.useEffect)(()=>{(async()=>{if((0,u.s)(W.state.current.availableVideoInputDevices)){let e=(0,u.s)(W.state.current.videoInputDevice)?await (0,j.oq)(W.state.current.videoInputDevice):void 0;k(W.state.current.availableVideoInputDevices.map(o=>({deviceType:o,selected:o.deviceId===e})))}})()},[W.state.current.availableVideoInputDevices,W.state.current.videoInputDevice]);let _=e=>(0,n.jsx)(x.A,{className:e.className,sx:{height:U,mx:"auto",position:"relative",width:"fit-content"},children:e.children});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(x.A,{className:e.className,sx:{display:"flex",flexDirection:e.direction,gap:2,justifyContent:"center",my:2,...e.sx},children:[(0,n.jsxs)(x.A,{className:"outer-container",children:[(0,n.jsxs)(_,{className:"camera-controls-container",children:[e.showCameraConfigMenu&&(0,n.jsx)(m.Ay,{variant:"popover",popupId:"camera-menu-popup",children:o=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{busy:e.busy,control:"camera",enabled:W.state.current.isVideoEnabled,popupState:o}),(0,n.jsx)(V,{config:W,popupState:o,videoDeviceList:S})]})}),(0,n.jsx)(L.A,{busy:e.busy,control:"camera",enabled:W.state.current.isVideoEnabled,showMenu:e.showCameraConfigMenu,toggleFn:P})]}),v.BX&&(0,n.jsx)(h.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"video.videoInputSelection"})})]}),(0,n.jsxs)(x.A,{className:"outer-container",children:[(0,n.jsxs)(_,{className:"audio-controls-container",children:[e.showAudioConfigMenu&&(0,n.jsx)(m.Ay,{variant:"popover",popupId:"audio-menu-popup",children:o=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H,{busy:e.busy,control:"audio",enabled:W.state.current.isAudioEnabled,popupState:o}),(0,n.jsx)(K,{audioInputDeviceList:t,audioOutputDeviceList:C,config:W,showAudioInputVisualisation:!0,popupState:o})]})}),(0,n.jsx)(L.A,{busy:e.busy,control:"audio",enabled:W.state.current.isAudioEnabled,showMenu:e.showAudioConfigMenu,toggleFn:N})]}),v.BX&&(0,n.jsx)(h.A,{sx:{color:"white",textAlign:"center",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"audio.audioInputSelection"})})]}),e.isPreview&&(0,n.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[(0,n.jsx)(x.A,{sx:{color:"callControlMenuItem.main",fontSize:"0.75rem",userSelect:"none"},children:(0,n.jsx)(c.A,{i18nKey:"onboarding.preview.audio.prompt"})}),(0,n.jsxs)(x.A,{sx:{alignItems:"center",display:"flex",flexDirection:"row",gap:.5,height:"1.5rem"},children:[(0,n.jsx)(g.A,{color:O.palette.callControlButtonIcon.main,size:"1.25rem"}),(0,n.jsx)(M,{sx:{color:"callControlMenuItem.main",width:"100px"}})]})]}),!e.isPreview&&o&&D===a.sW.Controller&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.A,{btnKey:"init-meeting",variant:"outlined",color:"buttonReverse",onClick:()=>{I(R.postFacilitatorAction(F.access_token,B,{action:"init-meeting",sessionId:E,ticks:new Date().getTime(),originator:T,parameters:{force:!0}}))},btnText:"RE-INIT"})})]})})}},77757:(e,o,t)=>{t.d(o,{Ay:()=>u,nh:()=>d,qW:()=>c});var n=t(95155),s=t(18932),r=t(12115),i=t(57300),l=t(45238),a=t(17448);let c=(0,r.createContext)({}),d=(e,o)=>{if(void 0===e&&void 0===o)return!0;if(void 0===e||void 0===o||e.length!==o.length)return!1;for(var t=0;t<e.length;t++)if(e[t].subscriptionId!=e[t].subscriptionId)return!1;return!0};function u(e){let{subscriptions:o,deviceIdBanList:t,thisUser:u}=(0,r.useContext)(i.f),{isPreview:p}=(0,r.useContext)(l.K),[x,h]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[m,b]=(0,r.useState)({tiles:[]});(0,r.useEffect)(()=>{let n=o.filter(e=>void 0===t.find(o=>e.deviceId===o)),r=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===s.sW.Controller)].sort((e,o)=>e.deviceId.localeCompare(o.deviceId)),i=[...n.filter(e=>e.deviceId!==(null==u?void 0:u.deviceId)&&e.role===s.sW.Client)].sort((e,o)=>e.deviceId.localeCompare(o.deviceId)),l=p?u?[u]:[]:e.role===s.sW.Client?[...r,...u?[u]:[],...i]:[...u?[u]:[],...r,...i];d(l,x)||h(l)},[o,t]);let v=e=>"video-tile-".concat(e.subscriptionId);return(0,r.useEffect)(()=>{let e=[];x.forEach((o,t)=>{let s=f.find(e=>e.key===v(o));s?e.push(s):e.push((0,n.jsx)(a.Ay,{subscription:o,test:!1},v(o)))}),((e,o)=>{if(void 0===e&&void 0===o)return!0;if(void 0===e||void 0===o||e.length!==o.length)return!1;for(var t=0;t<e.length;t++)if(e[t].key!==o[t].key)return!1;return!0})(e,f)||g(e)},[x]),(0,r.useEffect)(()=>{b({tiles:f})},[f]),(0,n.jsx)(c.Provider,{value:m,children:e.children})}},89207:(e,o,t)=>{t.d(o,{A:()=>x});var n=t(95155),s=t(80357),r=t(4615),i=t(32276),l=t(12115),a=t(24274),c=t(62652),d=t(39268),u=t(59850);let p=[i.e0s.Failed,i.e0s.Ended,i.e0s.JoinedFromAnotherDevice,i.e0s.TerminalFailure,i.e0s.Left];function x(e){let{meetingStatus:o}=(0,l.useContext)(u.s),[t,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o===i.e0s.Succeeded&&x(!0)},[o]);let[h,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{f(o===i.e0s.Succeeded||t&&!p.some(e=>e===o))},[o,t]);let g=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(o===i.e0s.Loading){var e;g.current=null!=(e=g.current)?e:setTimeout(()=>{m()},5e3)}return()=>{g.current&&(clearTimeout(g.current),g.current=null)}},[o]);let m=()=>{g.current&&(clearTimeout(g.current),g.current=null),h||v(!0)};(0,l.useEffect)(()=>{h&&(v(!1),g.current&&(clearTimeout(g.current),g.current=null))},[h]);let[b,v]=(0,l.useState)(!1),{t:w}=(0,a.Bd)();return(0,n.jsxs)(n.Fragment,{children:[h&&e.children,!h&&(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",...e.sx},children:[(o===i.e0s.Loading||o===i.e0s.Reconnecting)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.A,{severity:"info",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.joining"})}),(0,n.jsx)(d.A,{options:[{key:"ready",text:"Ready",filled:!1}],open:b,setOpen:v,title:w("videoCall.outcomeMessages.interaction.title"),content:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.interaction.content"})})]}),o===i.e0s.Failed&&(0,n.jsx)(r.A,{severity:"error",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.failed"})}),o===i.e0s.Ended&&(0,n.jsx)(r.A,{severity:"warning",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.ended"})}),o===i.e0s.JoinedFromAnotherDevice&&(0,n.jsx)(r.A,{severity:"warning",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.joinedFromAnotherDevice"})}),o===i.e0s.TerminalFailure&&(0,n.jsx)(r.A,{severity:"error",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.terminalFailure"})}),o===i.e0s.Left&&(0,n.jsx)(r.A,{severity:"info",children:(0,n.jsx)(c.A,{i18nKey:"videoCall.outcomeMessages.left"})})]})]})}},91998:(e,o,t)=>{t.d(o,{C:()=>em,A:()=>eb});var n=t(95155),s=t(12115),r=t(92253),i=t(18932),l=t(53285),a=t(25790),c=t(54884),d=t(11265),u=t(78211),p=t(80431),x=t(21644),h=t(10310),f=t(62652),g=t(57476),m=t(24274),b=t(60193),v=t(80317),w=t(91911),j=t(57915),A=t(90073),C=t(25612),y=t(57300),S=t(5611),k=t(55279),I=t(23387),R=t(19672);function E(e){let{thisUser:o}=(0,s.useContext)(y.f),t=(0,s.useContext)(C.j),[r,i]=(0,s.useState)(!1),l=(0,s.useRef)(null),a=(0,s.useRef)(null),d=(0,s.useRef)(void 0),u=(0,j.A)(),{t:p}=(0,m.Bd)(),x=(0,k.A)(null==o?void 0:o.deviceId);return(0,s.useEffect)(()=>{(0,c.s)(null==x?void 0:x.raiseHand)||!0!==a.current?(0,c.s)(null==x?void 0:x.raiseHand)&&!0!==a.current&&(a.current=!0):(i(!0),a.current=!1,d.current=setTimeout(()=>{i(!1)},5e3))},[x]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(A.A,{className:"raise-hand-container",sx:{display:"flex",flexDirection:"column",mb:2,ml:0,mt:2},children:[(0,n.jsx)(A.A,{className:"raise-hand-button-container",sx:{display:"flex",flexDirection:"row",height:g.LL,justifyContent:"center"},children:(0,n.jsx)(b.A,{"aria-label":p((0,c.s)(null==x?void 0:x.raiseHand)?"button.lowerHand":"button.raiseHand"),disableRipple:!0,disableFocusRipple:!0,onClick:()=>{t.sendMessage({action:"user-signals",content:{signal:{kind:"raiseHand"},signalAction:(0,c.s)(null==x?void 0:x.raiseHand)?"remove":"add"},sid:e.session.id,type:"user-signals-request"})},ref:l,sx:e=>({backgroundColor:(0,c.s)(null==x?void 0:x.raiseHand)?"#ffffffff":"callControlButton.main",flexShrink:0,height:g.LL,mx:"auto",width:g.LL,"&:focus-visible":{backgroundColor:"callControlButton.dark",...e.customStyles.focusRingReverse},"&:hover":{backgroundColor:"callControlButton.dark"}}),children:(0,n.jsx)(S.A,{fill:(0,c.s)(null==x?void 0:x.raiseHand)?void 0:"transparent",height:R.N,stroke:(0,c.s)(null==x?void 0:x.raiseHand)?void 0:u.palette.callControlButtonIcon.main,width:R.N})})}),I.BX&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.A,{"aria-hidden":"true",sx:{height:0,textWrap:"nowrap",visibility:"hidden"},children:(0,n.jsx)(f.A,{i18nKey:"button.lowerHand"})}),(0,n.jsx)(v.A,{color:"white",sx:{textWrap:"nowrap",userSelect:"none"},children:(0,c.s)(null==x?void 0:x.raiseHand)?(0,n.jsx)(f.A,{i18nKey:"button.lowerHand"}):(0,n.jsx)(f.A,{i18nKey:"button.raiseHand"})})]})]}),(0,n.jsx)(w.Ay,{anchorEl:l.current,anchorOrigin:{horizontal:"center",vertical:-10},onClose:()=>{i(!1),clearTimeout(d.current)},open:r,slotProps:{paper:{sx:{backgroundColor:"transparent",boxShadow:"none"}}},transformOrigin:{horizontal:"center",vertical:"bottom"},children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{sx:{backgroundColor:"#ffffffff",borderRadius:"15px",boxShadow:"2px 4px 3px 0px #00000040",margin:"10px 10px 0 10px",padding:1.5},children:(0,n.jsx)(v.A,{sx:{userSelect:"none"},children:(0,n.jsx)(f.A,{i18nKey:"feedback.handLowered"})})}),(0,n.jsx)(A.A,{sx:{borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"12px solid #ffffffff",height:0,margin:"0 auto",width:0}})]})})]})}var D=t(77757),F=t(333),B=t(95507),M=t(27855),T=t(39268);function K(){let[e,o]=(0,s.useState)(!1),{setParticipantSessionFlags:t}=(0,s.useContext)(em),{t:r}=(0,m.Bd)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{disableFocusRipple:!0,sx:e=>({border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonDangerReverse.main",fontWeight:"bold",height:"fit-content",px:3,py:1,width:"max-content","&:hover":{backgroundColor:"buttonDangerReverse.main",border:"2px solid",borderColor:"buttonDangerReverse.main",color:"buttonStandard.main"},"&:focus-visible":{...e.customStyles.focusRingReverse,backgroundColor:"buttonDangerReverse.main",color:"buttonStandard.main",outlineOffset:"2px"}}),variant:"outlined",onClick:()=>o(!0),children:(0,n.jsx)(f.A,{i18nKey:"onboarding.leaveWorkshop"})}),(0,n.jsx)(T.A,{open:e,setOpen:o,onSelect:e=>{"leave"===e&&t({leftTheWorkshop:!0})},prompt:r("workshop.leaveConfirm"),options:[{key:"leave",text:r("workshop.leaveCta"),filled:!0},{key:"return",text:r("workshop.returnCta"),filled:!1}]})]})}var L=t(70835),W=t(15036),O=t(49502);function P(e){let{pageIndex:o,setPageIndex:t,totalPages:s,handleToggleTechSupport:r,session:i}=e,{t:l}=(0,m.Bd)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container",sx:{alignSelf:"center"},children:(0,n.jsxs)(A.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1},children:[(0,n.jsx)(b.A,{disableFocusRipple:!0,disabled:o<1,onClick:()=>{o>0&&t(e=>e-1)},children:(0,n.jsx)(L.A,{color:"#f5f5f5",size:"32px"})}),(0,n.jsxs)(A.A,{sx:{color:"white"},children:["page ",o+1,"\xa0of\xa0",s]}),(0,n.jsx)(b.A,{disableFocusRipple:!0,disabled:o+1>=s,onClick:()=>{s>o+1&&t(e=>e+1)},children:(0,n.jsx)(W.A,{color:"#f5f5f5",size:"32px"})})]})}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(g.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:i})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifySelf:"end",pr:1},children:[(0,n.jsx)(K,{}),(0,n.jsxs)(b.A,{"aria-label":l("techSupport.buttons.support"),disableFocusRipple:!0,onClick:r,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(O.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(v.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(f.A,{i18nKey:"techSupport.buttons.support"})})]})]})]})})}var N=t(79384),H=t(78055),_=t(91028),V=t(8085),z=t(95831),U=t(25789),Z=t(80357),J=t(17448);let q={w:960,h:700},G="".concat(q.w," / ").concat(q.h),X={1:{col:3,row:1,span:{cols:1,rows:1}},2:{col:3,row:2,span:{cols:1,rows:1}},3:{col:3,row:3,span:{cols:1,rows:1}},4:{col:2,row:3,span:{cols:1,rows:1}},5:{col:1,row:3,span:{cols:1,rows:1}},6:{col:4,row:1,span:{cols:1,rows:1}},7:{col:4,row:2,span:{cols:1,rows:1}},8:{col:4,row:3,span:{cols:1,rows:1}},9:{col:4,row:4,span:{cols:1,rows:1}},10:{col:3,row:4,span:{cols:1,rows:1}},11:{col:2,row:4,span:{cols:1,rows:1}},12:{col:1,row:4,span:{cols:1,rows:1}},13:{col:5,row:1,span:{cols:1,rows:1}},14:{col:5,row:2,span:{cols:1,rows:1}},15:{col:5,row:3,span:{cols:1,rows:1}},16:{col:5,row:4,span:{cols:1,rows:1}},17:{col:6,row:1,span:{cols:1,rows:1}},18:{col:6,row:2,span:{cols:1,rows:1}},19:{col:6,row:3,span:{cols:1,rows:1}},20:{col:6,row:4,span:{cols:1,rows:1}},21:{col:6,row:5,span:{cols:1,rows:1}},22:{col:5,row:5,span:{cols:1,rows:1}},23:{col:4,row:5,span:{cols:1,rows:1}},24:{col:3,row:5,span:{cols:1,rows:1}},25:{col:2,row:5,span:{cols:1,rows:1}},26:{col:1,row:5,span:{cols:1,rows:1}}},Q={0:{[H.t.default]:{cols:1,rows:1},[H.t.deliberation]:{cols:1,rows:1}},1:{[H.t.default]:{cols:3,rows:2},[H.t.deliberation]:{cols:3,rows:2}},2:{[H.t.default]:{cols:3,rows:2},[H.t.deliberation]:{cols:3,rows:2}},3:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},4:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},5:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:3,rows:3}},6:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},7:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},8:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:3}},9:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},10:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},11:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},12:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:4,rows:4}},13:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},14:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},15:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},16:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:5,rows:4}},17:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},18:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},19:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},20:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:4}},21:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},22:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},23:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},24:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},25:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}},26:{[H.t.default]:{cols:6,rows:5},[H.t.deliberation]:{cols:6,rows:5}}},$={0:{[H.t.default]:{col:1,row:1,span:{cols:1,rows:1}},[H.t.deliberation]:{col:1,row:1,span:{cols:1,rows:1}}},1:{[H.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},2:{[H.t.default]:{col:1,row:1,span:{cols:2,rows:2}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},3:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:3}}},4:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},5:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},6:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},7:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},8:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},9:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},10:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},11:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},12:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},13:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},14:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},15:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},16:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},17:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},18:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},19:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},20:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},21:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},22:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},23:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},24:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},25:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}},26:{[H.t.default]:{col:1,row:1,span:{cols:5,rows:5}},[H.t.deliberation]:{col:1,row:1,span:{cols:2,rows:2}}}},Y=(0,s.memo)(function(e){var o,t,i,l,a,c,d,u;let{tiles:p}=(0,s.useContext)(D.qW),[x,h]=(0,s.useState)(!1),[f,g]=(0,s.useState)(),m=void 0!==e.testSubscriptions;(0,s.useEffect)(()=>{var o,t;let s=Math.min(null!=(t=null==p?void 0:p.length)?t:null==(o=e.testSubscriptions)?void 0:o.length,26),r=e.activity,i=Q[s][r],l={w:i.cols*q.w,h:i.rows*q.h},a="repeat(".concat(i.cols,", 1fr)"),c="repeat(".concat(i.rows,", 1fr)"),d=e.enableExpandButton&&s>0&&e.activity===H.t.deliberation;g({colsTemplate:a,rowsTemplate:c,cells:i,gridAspect:l,litter:s,activity:r,showExpandButton:d,tiles:e.testSubscriptions?e.testSubscriptions.map((e,o)=>(0,n.jsx)(J.Ay,{test:!0,subscription:e},"test-tile-".concat(o,"-").concat(e.subscriptionId))):p})},[m,p,e.testSubscriptions,e.activity,e.enableExpandButton]),(0,s.useEffect)(()=>{f&&f.activity!==H.t.deliberation&&h(!1)},[f]);let[v]=(0,_.Q)({duration:200}),w="0.5rem",j=(0,U.A)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z.A,{className:"tiles-inner-container",sx:{width:null!=(d=null==(o=e.availableSpace)?void 0:o.w)?d:"100%",height:null!=(u=null==(t=e.availableSpace)?void 0:t.h)?u:"100%",position:"relative"},children:f&&(0,n.jsx)(Z.A,{className:"tiles-container",sx:{aspectRatio:"".concat(f.gridAspect.w,"/").concat(f.gridAspect.h),objectFit:"contain",height:r.nr?null==(i=e.availableSpace)?void 0:i.h:void 0,width:r.nr?null==(l=e.availableSpace)?void 0:l.w:void 0,maxHeight:null==(a=e.availableSpace)?void 0:a.h,maxWidth:null==(c=e.availableSpace)?void 0:c.w,mx:"auto",my:"auto",p:1},children:(0,n.jsxs)(Z.A,{className:"tiles-grid",ref:v,sx:{width:"100%",height:"100%",display:"grid",gap:w,gridTemplateColumns:f.colsTemplate,gridTemplateRows:f.rowsTemplate},children:[(0,n.jsxs)(Z.A,{sx:{position:x?"absolute":"relative",gridColumnStart:x?void 0:$[f.litter][f.activity].col,gridColumnEnd:x?void 0:$[f.litter][f.activity].col+$[f.litter][f.activity].span.cols,gridRowStart:x?void 0:$[f.litter][f.activity].row,gridRowEnd:x?void 0:$[f.litter][f.activity].row+$[f.litter][f.activity].span.rows,width:x?void 0:"100%",height:x?void 0:"100%",left:x?"2.5vh":void 0,top:x?"2.5vh":void 0,bottom:x?"2.5vh":void 0,right:x?"2.5vh":void 0,zIndex:x?10:void 0},children:[f.showExpandButton&&(0,n.jsx)(Z.A,{sx:{position:"absolute",top:"1rem",right:"1rem",zIndex:20},children:(0,n.jsx)(b.A,{"aria-label":"expand presentation button",onClick:()=>h(!x),sx:{border:"2px solid",borderColor:j.palette.promptPanelBackground.main,background:j.palette.slideSectionBackground.main},children:x?(0,n.jsx)(V.A,{}):(0,n.jsx)(z.A,{})})}),(0,n.jsx)(Z.A,{sx:{width:"100%",height:"100%",borderRadius:2,border:x?"solid 2px white":void 0},className:"shadow",children:e.presentation})]},"presentation-cell"),f.activity===H.t.deliberation&&(0,n.jsx)(n.Fragment,{children:f.tiles.map((e,o)=>{let t=X[o+1];return void 0!==t?(0,n.jsx)(Z.A,{sx:{gridColumnStart:t.col,gridColumnEnd:t.col+t.span.cols,gridRowStart:t.row,gridRowEnd:t.row+t.span.rows},children:e},"video-cell-at-".concat(o)):(console.warn("Tile with index ".concat(o," not rendered - no position data available")),(0,n.jsx)(n.Fragment,{}))})}),f.activity!=H.t.deliberation&&(0,n.jsxs)(n.Fragment,{children:[f.tiles.slice(0,Math.min(2,f.litter)).map((e,o)=>(0,n.jsx)(Z.A,{sx:{gridColumn:Q[f.litter][f.activity].cols,gridRow:o+1},children:e},"video-cell-at-".concat(o))),f.litter>2&&(0,n.jsx)(Z.A,{sx:{gridColumn:f.cells.cols,gridRowStart:3,gridRowEnd:f.cells.rows+1,overflowY:"auto"},children:f.tiles.slice(2).map((e,o)=>(0,n.jsx)(Z.A,{sx:{width:"100%",aspectRatio:G,mb:w},children:e},"video-cell-at-".concat(o)))})]})]})})})})},(e,o)=>{var t,n;let s=e.activity===o.activity,r=e.availableSpace===o.availableSpace,i=e.enableExpandButton===o.enableExpandButton,l=e.presentation===o.presentation,a=(0,D.nh)(null!=(t=e.testSubscriptions)?t:[],null!=(n=o.testSubscriptions)?n:[]);return s&&r&&i&&l&&a});var ee=t(89207),eo=t(48484),et=t(8553),en=t(35626),es=t(65229),er=t(27747),ei=t(2021),el=t(99496),ea=t(37440),ec=t(62995),ed=t(68060),eu=t(51404),ep=t(23405),ex=function(e){return e.None="",e.CannotHearOthers="cannot-hear-others",e.OthersCannotHearMe="others-cannot-hear-me",e.StillNeedHelp="still-need-help",e}(ex||{});function eh(e){let[o,t]=(0,s.useState)(""),{t:r}=(0,m.Bd)(),i=()=>{e.setShowTechSupport(!1),t("")},l=()=>{i()};return(0,n.jsxs)(er.A,{className:"tech-support-dialog",fullWidth:!0,maxWidth:"sm",onClose:()=>{i()},open:e.showTechSupport,PaperProps:{sx:{border:"3px solid #A5A5FF",borderRadius:"10px",pointerEvents:"auto"}},scroll:"paper",sx:{pointerEvents:"none","& .MuiDialog-container":{height:e.backdropHeight||"100%"}},slots:{backdrop:()=>(0,n.jsx)(Z.A,{onClick:l,sx:{backgroundColor:"rgba(0,0,0,0.7)",height:e.backdropHeight||"100%",pointerEvents:"auto",position:"fixed",width:"100%"}})},transitionDuration:0,children:[(0,n.jsxs)(Z.A,{className:"tech-support-dialog-controls",sx:{display:"flex",flexDirection:"row",justifyContent:""===o?"end":"space-between"},children:[""!==o&&(0,n.jsx)(b.A,{"aria-label":"back",onClick:()=>{t("")},sx:{width:"fit-content"},children:(0,n.jsx)(en.A,{size:"24px"})}),(0,n.jsx)(b.A,{"aria-label":"close",onClick:i,sx:{width:"fit-content"},children:(0,n.jsx)(es.A,{size:"24px"})})]}),(0,n.jsxs)(ei.A,{align:"center",color:"#292D32",sx:{mx:1,userSelect:"none"},variant:"h3",children:[""===o&&"What problem are you experiencing?","cannot-hear-others"===o&&(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.heading"}),"others-cannot-hear-me"===o&&(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.heading"}),"still-need-help"===o&&"Please tell us about the problem you're experiencing"]}),"cannot-hear-others"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(el.A,{sx:{mx:1,my:2,pb:0},children:(0,n.jsxs)("ol",{style:{margin:"0"},children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip1Body"})]}),(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip2Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.tip3Body"})]})]})})]}),"others-cannot-hear-me"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.A,{align:"center",color:"#292D32",component:"h3",variant:"h4",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.pleaseCheck"})}),(0,n.jsx)(el.A,{children:(0,n.jsxs)("ol",{children:[(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("b",{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip1Body"})]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Heading"})}),(0,n.jsx)("br",{}),(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.tip2Body"})]})]})})]}),""!==o&&"still-need-help"!==o&&(0,n.jsxs)(el.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"center",mb:1,p:2},children:[(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{i()},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"outlined",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.buttons.problemSolved"})}),(0,n.jsx)(M.A,{color:"buttonStandard",onClick:()=>{t("still-need-help")},sx:{fontWeight:"bold",p:"0.5rem 2rem",textTransform:"uppercase"},variant:"contained",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.buttons.stillNeedHelp"})})]}),"still-need-help"===o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.A,{align:"center",color:"#292D32",component:"h3",sx:{mx:1},variant:"h4",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.teamIsAvailable"})}),(0,n.jsx)(el.A,{children:(0,n.jsxs)(Z.A,{sx:{display:"grid",gap:1,gridTemplateColumns:"auto 1fr",mx:"auto",my:2,width:"fit-content"},children:[(0,n.jsx)(v.A,{sx:{mr:1},variant:"body1",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.phone"})}),(0,n.jsx)(ea.A,{href:"tel:020 7031 7209",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"020 7031 7209"}),(0,n.jsx)(v.A,{children:(0,n.jsx)(f.A,{i18nKey:"techSupport.email"})}),(0,n.jsx)(ea.A,{href:"mailto:workshop-support@nesta.org.uk?subject=Workshop tech support",sx:{color:"#000000ff",fontWeight:"bold"},target:"_blank",children:"workshop-support@nesta.org.uk"})]})})]}),""===o&&(0,n.jsx)(el.A,{sx:{textAlign:"center"},children:(0,n.jsxs)(ec.A,{sx:{my:3,minWidth:"24rem",userSelect:"none"},children:[(0,n.jsx)(ed.A,{id:"select-problem",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.chooseProblem"})}),(0,n.jsxs)(eu.A,{label:r("techSupport.chooseProblem"),labelId:"select-problem",onChange:e=>{t(e.target.value)},value:o,children:[(0,n.jsx)(ep.A,{value:"cannot-hear-others",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.cannotHearOthers.description"})}),(0,n.jsx)(ep.A,{value:"others-cannot-hear-me",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.othersCannotHearMe.description"})}),(0,n.jsx)(ep.A,{value:"still-need-help",children:(0,n.jsx)(f.A,{i18nKey:"techSupport.problems.differentProblem.description"})})]})]})})]})}function ef(){let{largeVideoCalls:e}=(0,s.useContext)(u.c),{session:o}=(0,s.useContext)(h.L),{slideData:t}=(0,p.Zm)(),r=(0,s.useContext)(x.z),[l,a]=(0,s.useState)(0),[c,d]=(0,s.useState)(0),[w,j]=(0,s.useState)(!1),[C,y]=(0,s.useState)(!1),{t:S}=(0,m.Bd)(),[k,I]=(0,s.useState)({activity:t.activity,enableExpandButton:!0,presentation:r.presentation,availableSpace:void 0});(0,s.useEffect)(()=>{j(o.remoteConfiguration===i.LQ.RemoteWithVideoCall)},[o]),(0,s.useEffect)(()=>{I({...k,activity:t.activity,enableExpandButton:!0,presentation:r.presentation})},[t.activity]);let[R,M]=(0,et.W_)();(0,s.useEffect)(()=>{M&&M.width&&M.height&&(I({...k,availableSpace:{w:M.width,h:M.height}}),console.debug("available space: ".concat(M.width," x ").concat(M.height)))},[M]),(0,s.useEffect)(()=>{l>=c&&a(c>0?c-1:0)},[l,c]);let T=()=>(0,n.jsx)(eo.A,{preTitle:(0,n.jsx)(f.A,{i18nKey:"onboarding.thanks"}),title:(0,n.jsx)(f.A,{i18nKey:"onboarding.almostThere"}),bar:"Connecting your video call..."}),L=()=>{y(e=>!e)},W={width:"100vw",height:"100vh",background:"linear-gradient(to bottom, #FF0080, #FF8C00, #40E0D0)"};return(0,n.jsxs)(n.Fragment,{children:[w&&e&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ee.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(T,{}),children:(0,n.jsx)(F.Ay,{role:i.sW.Client,children:(0,n.jsx)(F.n8.Consumer,{children:e=>{let{arrangement:t}=e;return(0,n.jsx)(A.A,{sx:W,children:(0,n.jsx)(N.A,{aspectRatio:B.M.aspectRatio,minCellWidth_px:B.M.minTileWidth_px,controlBarHeight_px:B.M.controlBarHeight_px,padding_px:B.M.padding_px,gap_px:B.M.gap_px,slideSpan:B.M.slideSpan,arrangement:t,pageIndex:l,setTotalPages:d,activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,mode:F.LY.Chime,footerContent:(0,n.jsx)(P,{handleToggleTechSupport:L,pageIndex:l,setPageIndex:a,totalPages:c,session:o})})})}})})})}),w&&!e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ee.A,{sx:{flexGrow:1},joinView:(0,n.jsx)(T,{}),children:[(0,n.jsxs)(A.A,{className:"available-space-and-controls-container",sx:{width:"100%",height:"100%",position:"absolute",left:0,top:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,n.jsx)(A.A,{className:"available-space-ref",ref:R,sx:{display:"block",flexGrow:1,m:0,p:0}}),(0,n.jsxs)(A.A,{className:"call-controls-container",sx:{backgroundColor:"callControlPanelBackground.main",display:"grid",gap:2,gridTemplateColumns:"1fr 1fr 1fr"},children:[(0,n.jsx)(A.A,{className:"left-controls-container"}),(0,n.jsxs)(A.A,{className:"centre-controls-container",sx:{alignItems:"flex-start",display:"flex",flexDirection:"row",gap:2,justifyContent:"center"},children:[(0,n.jsx)(g.Ay,{direction:"row",showAudioConfigMenu:!0,showCameraConfigMenu:!0,busy:!1,isPreview:!1}),(0,n.jsx)(E,{session:o})]}),(0,n.jsxs)(A.A,{className:"right-controls-container",sx:{alignItems:"center",alignSelf:"center",display:"flex",flexDirection:"row",justifySelf:"end",pr:1},children:[(0,n.jsx)(K,{}),(0,n.jsxs)(b.A,{"aria-label":S("techSupport.buttons.support"),disableFocusRipple:!0,onClick:L,sx:e=>({borderRadius:"4px",flexDirection:"column",ml:2,mr:1,p:.5,"&:focus-visible":{...e.customStyles.focusRingReverse,outlineOffset:"2px"},"&:hover":{"> p":{color:"#6C63FF"},"> svg":{stroke:"#6C63FF"}}}),children:[(0,n.jsx)(O.A,{color:"#f5f5f5",size:"32px"}),(0,n.jsx)(v.A,{color:"white",sx:{fontSize:"14px",textTransform:"uppercase"},children:(0,n.jsx)(f.A,{i18nKey:"techSupport.buttons.support"})})]})]})]})]}),(0,n.jsx)(A.A,{className:"tiles-outer-container",sx:{position:"absolute",left:0,top:0,right:0,display:"block"},children:(0,n.jsx)(D.Ay,{role:i.sW.Client,children:(0,n.jsx)(Y,{activity:k.activity,enableExpandButton:k.enableExpandButton,presentation:k.presentation,availableSpace:k.availableSpace})})})]}),(0,n.jsx)(eh,{backdropHeight:M.height,showTechSupport:C,setShowTechSupport:y})]}),!w&&(0,n.jsx)(A.A,{sx:{width:"100%",height:"100%",p:1,position:"relative"},children:r.presentation})]})}var eg=t(96827);let em=(0,s.createContext)({});function eb(e){let[o,t]=(0,s.useState)({leftTheWorkshop:!1});(0,s.useEffect)(()=>((0,c.s)(window)&&(!1===o.leftTheWorkshop?window.addEventListener("beforeunload",u):window.removeEventListener("beforeunload",u)),()=>{window.removeEventListener("beforeunload",u)}),[o.leftTheWorkshop]);let u=e=>{e.preventDefault()};return(0,n.jsx)(n.Fragment,{children:r.XF?(0,n.jsx)(d.A,{}):(0,n.jsx)(em.Provider,{value:{participantSessionFlags:o,setParticipantSessionFlags:t},children:(0,n.jsx)(eg.A,{sid:e.sid,joinCode:e.joinCode,refresh:e.refresh,role:i.sW.Client,children:(0,n.jsxs)(l.A,{role:i.sW.Client,children:[(0,n.jsx)(a.A,{}),(0,n.jsx)(ef,{})]})})})})}},96827:(e,o,t)=>{t.d(o,{A:()=>c});var n=t(95155),s=t(72970),r=t(12115),i=t(24274),l=t(78211),a=t(2492);function c(e){let{language:o}=(0,r.useContext)(l.c),[t,c]=(0,r.useState)((0,s.Ay)(o));return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.xC,{i18n:t,children:(0,n.jsx)(a.A,{sid:e.sid,role:e.role,refresh:e.refresh,joinCode:e.joinCode,children:e.children})})})}}}]);